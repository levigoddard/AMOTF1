country_event = {
	id = HRE_war_mechanics.001
	title = HRE_war_mechanics.001.t
	desc = HRE_war_mechanics.001.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		is_emperor = yes
	}
	immediate = {
		hidden_effect = {
			FROM = {
				save_event_target_as = hre_war_defender_leader
				set_variable = {
					which = hre_war_strength_comparison_gain
					which = hre_war_strength
				}
				set_variable = {
					which = hre_war_strength_comparison_remove
					which = hre_war_strength
				}
				every_country = {
					limit = {
						is_in_war = {
							attacker_leader = THIS
							defender_leader = PREV
						}
					}
					save_event_target_as = hre_war_attacker_leader
					set_variable = {
						which = hre_war_strength_comparison_gain
						value = 0
					}
					set_variable = {
						which = hre_war_strength_comparison_gain
						which = hre_war_strength
					}
					set_variable = {
						which = hre_war_strength_comparison_remove
						which = hre_war_strength
					}
					if = {
						limit = {
							NOT = {
								check_variable = {
									which = event_target:hre_war_attacker_leader
									value = 0.001
								}
							}
						}
						set_variable = {
							which = event_target:hre_war_attacker_leader
							value = 0.001
						}
					}
					divide_variable = {
						which = hre_war_strength_comparison_gain
						which = event_target:hre_war_defender_leader
					}
				}
				divide_variable = {
					which = hre_war_strength_comparison_remove
					which = event_target:hre_war_attacker_leader
				}
				set_variable = {
					which = hre_war_strength_comparison_gain
					which = event_target:hre_war_attacker_leader
				}
				event_target:hre_war_attacker_leader = {
					set_variable = {
						which = hre_war_strength_comparison_remove
						which = PREV
					}
				}
				ROOT = {
					set_variable = {
						which = hre_war_strength_comparison_gain
						which = PREV
					}
					set_variable = {
						which = hre_war_strength_comparison_remove
						which = PREV
					}
				}
			}
		}
	}
	option = {
		name = "HRE_war_mechanics.001.Ask_empire_for_help"
		custom_tooltip = "HRE_war_mechanics.001.Ask_empire_for_help.ctp"
		ai_chance = {
			factor = 100
		}
		hidden_effect = {
			every_country = {
				limit = {
					is_part_of_hre = yes
					is_emperor = no
				}
				country_event = {
					id = HRE_war_mechanics.002
					days = 14
				}
			}
			country_event = {
				id = HRE_war_mechanics.003
				days = 75
			}
		}
		if = {
			limit = {
				check_variable = {
					which = hre_war_strength_comparison_remove
					value = 1.000
				}
			}
			if = {
				limit = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.500
					}
				}
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_remove
							value = 1.700
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 1.800
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_remove
									value = 1.900
								}
							}
							add_imperial_influence = -10
						}
						else = {
							add_imperial_influence = -9
						}
					}
					else = {
						add_imperial_influence = -9
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 1.600
							}
						}
						add_imperial_influence = -8
					}
					else = {
						add_imperial_influence = -8
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_remove
							value = 1.200
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 1.300
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_remove
									value = 1.400
								}
							}
							add_imperial_influence = -7
						}
						else = {
							add_imperial_influence = -7
						}
					}
					else = {
						add_imperial_influence = -6
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 1.100
							}
						}
						add_imperial_influence = -6
					}
					else = {
						add_imperial_influence = -5
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 0.500
					}
				}
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_remove
							value = 0.700
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 0.800
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_remove
									value = 0.900
								}
							}
							add_imperial_influence = -5
						}
						else = {
							add_imperial_influence = -4
						}
					}
					else = {
						add_imperial_influence = -4
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 0.600
							}
						}
						add_imperial_influence = -3
					}
					else = {
						add_imperial_influence = -3
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_remove
							value = 0.200
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 0.300
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_remove
									value = 0.400
								}
							}
							add_imperial_influence = -2
						}
						else = {
							add_imperial_influence = -2
						}
					}
					else = {
						add_imperial_influence = -1
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_remove
								value = 0.100
							}
						}
						add_imperial_influence = -1
					}
					else = {
						add_imperial_influence = 0
					}
				}
			}
		}
	}
	option = {
		name = "HRE_war_mechanics.001.Do_it_alone"
		custom_tooltip = "HRE_war_mechanics.001.Do_it_alone.ctp"
		ai_chance = {
			factor = 5
		}
		if = {
			limit = {
				check_variable = {
					which = hre_war_strength_comparison_gain
					value = 1.000
				}
			}
			if = {
				limit = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.500
					}
				}
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_gain
							value = 1.700
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 1.800
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_gain
									value = 1.900
								}
							}
							add_imperial_influence = 10
						}
						else = {
							add_imperial_influence = 9
						}
					}
					else = {
						add_imperial_influence = 9
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 1.600
							}
						}
						add_imperial_influence = 8
					}
					else = {
						add_imperial_influence = 8
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_gain
							value = 1.200
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 1.300
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_gain
									value = 1.400
								}
							}
							add_imperial_influence = 7
						}
						else = {
							add_imperial_influence = 7
						}
					}
					else = {
						add_imperial_influence = 6
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 1.100
							}
						}
						add_imperial_influence = 6
					}
					else = {
						add_imperial_influence = 5
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 0.500
					}
				}
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_gain
							value = 0.700
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 0.800
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_gain
									value = 0.900
								}
							}
							add_imperial_influence = 5
						}
						else = {
							add_imperial_influence = 4
						}
					}
					else = {
						add_imperial_influence = 4
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 0.600
							}
						}
						add_imperial_influence = 3
					}
					else = {
						add_imperial_influence = 3
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = {
							which = hre_war_strength_comparison_gain
							value = 0.200
						}
					}
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 0.300
							}
						}
						if = {
							limit = {
								check_variable = {
									which = hre_war_strength_comparison_gain
									value = 0.400
								}
							}
							add_imperial_influence = 2
						}
						else = {
							add_imperial_influence = 2
						}
					}
					else = {
						add_imperial_influence = 1
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = hre_war_strength_comparison_gain
								value = 0.100
							}
						}
						add_imperial_influence = 1
					}
					else = {
						add_imperial_influence = 0
					}
				}
			}
		}
	}
}
country_event = {
	id = HRE_war_mechanics.002
	title = HRE_war_mechanics.002.t
	desc = HRE_war_mechanics.002.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			change_variable = {
				which = numb_of_princes_def
				value = 1
			}
			set_variable = {
				which = their_manpower_contr
				value = 0
			}
			set_variable = {
				which = ful_money_contr
				value = 0
			}
			export_to_variable = {
				which = their_manpower_contr
				value = max_manpower
				who = ROOT
			}
			export_to_variable = {
				which = ful_money_contr
				value = years_of_income
				who = ROOT
			}
			set_variable = {
				which = base_man_contr
				value = 0.15
			}
			set_variable = {
				which = calc_inf_cost
				value = 3
			}
			set_variable = {
				which = calc_calv_cost
				value = 4.5
			}
			set_variable = {
				which = calc_art_cost
				value = 6
			}
			if = {
				limit = {
					has_country_flag = mil_tech_0_war
				}
				multiply_variable = {
					which = calc_inf_cost
					value = 0.7
				}
				multiply_variable = {
					which = calc_calv_cost
					value = 0.3
				}
				change_variable = {
					which = their_money_contr
					which = calc_inf_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_calv_cost
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_10_war
				}
				multiply_variable = {
					which = calc_inf_cost
					value = 0.7
				}
				multiply_variable = {
					which = calc_calv_cost
					value = 0.2
				}
				multiply_variable = {
					which = calc_art_cost
					value = 0.1
				}
				change_variable = {
					which = their_money_contr
					which = calc_inf_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_calv_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_art_cost
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_20_war
				}
				multiply_variable = {
					which = calc_inf_cost
					value = 0.7
				}
				multiply_variable = {
					which = calc_calv_cost
					value = 0.15
				}
				multiply_variable = {
					which = calc_art_cost
					value = 0.15
				}
				change_variable = {
					which = their_money_contr
					which = calc_inf_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_calv_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_art_cost
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_30_war
				}
				multiply_variable = {
					which = calc_inf_cost
					value = 0.65
				}
				multiply_variable = {
					which = calc_calv_cost
					value = 0.15
				}
				multiply_variable = {
					which = calc_art_cost
					value = 0.20
				}
				change_variable = {
					which = their_money_contr
					which = calc_inf_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_calv_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_art_cost
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_40_war
				}
				multiply_variable = {
					which = calc_inf_cost
					value = 0.65
				}
				multiply_variable = {
					which = calc_calv_cost
					value = 0.1
				}
				multiply_variable = {
					which = calc_art_cost
					value = 0.25
				}
				change_variable = {
					which = their_money_contr
					which = calc_inf_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_calv_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_art_cost
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_50_war
				}
				multiply_variable = {
					which = calc_inf_cost
					value = 0.60
				}
				multiply_variable = {
					which = calc_calv_cost
					value = 0.15
				}
				multiply_variable = {
					which = calc_art_cost
					value = 0.25
				}
				change_variable = {
					which = their_money_contr
					which = calc_inf_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_calv_cost
				}
				change_variable = {
					which = their_money_contr
					which = calc_art_cost
				}
			}
		}
	}
	option = {
		name = "HRE_war_mechanics.002.manpower"
		trigger = {}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 4
				government = monarchy
			}
			modifier = {
				factor = 2
				government = theocracy
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.1
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.2
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.25
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.3
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.35
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.4
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.45
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.5
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.6
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.7
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.8
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.9
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 2
					}
				}
			}
		}
		custom_tooltip = "HRE_war_mechanics.002.manpower.ctp"
		hidden_effect = {
			multiply_variable = {
				which = their_manpower_contr
				value = 0.005
			}
			set_variable = {
				which = supplied_manpower
				which = base_man_contr
			}
			change_variable = {
				which = supplied_manpower
				which = their_manpower_contr
			}
			emperor = {
				change_variable = {
					which = supplied_manpower
					which = PREV
				}
			}
			multiply_variable = {
				which = their_money_contr
				which = supplied_manpower
			}
			set_variable = {
				which = supplied_money
				which = their_money_contr
			}
			emperor = {
				change_variable = {
					which = supplied_money
					which = PREV
				}
			}
			set_variable = {
				which = manpower_cost
				which = their_manpower_contr
			}
			while = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 65536
					}
				}
				add_manpower = -65536
				subtract_variable = {
					which = manpower_cost
					value = 65536
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 32768
					}
				}
				add_manpower = -32768
				subtract_variable = {
					which = manpower_cost
					value = 32768
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 16384
					}
				}
				add_manpower = -16384
				subtract_variable = {
					which = manpower_cost
					value = 16384
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 8192
					}
				}
				add_manpower = -8192
				subtract_variable = {
					which = manpower_cost
					value = 8192
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 4096
					}
				}
				add_manpower = -4096
				subtract_variable = {
					which = manpower_cost
					value = 4096
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 2048
					}
				}
				add_manpower = -2048
				subtract_variable = {
					which = manpower_cost
					value = 2048
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 1024
					}
				}
				add_manpower = -1024
				subtract_variable = {
					which = manpower_cost
					value = 1024
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 512
					}
				}
				add_manpower = -512
				subtract_variable = {
					which = manpower_cost
					value = 512
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 256
					}
				}
				add_manpower = -256
				subtract_variable = {
					which = manpower_cost
					value = 256
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 128
					}
				}
				add_manpower = -128
				subtract_variable = {
					which = manpower_cost
					value = 128
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 64
					}
				}
				add_manpower = -64
				subtract_variable = {
					which = manpower_cost
					value = 64
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 32
					}
				}
				add_manpower = -32
				subtract_variable = {
					which = manpower_cost
					value = 32
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 16
					}
				}
				add_manpower = -16
				subtract_variable = {
					which = manpower_cost
					value = 16
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 8
					}
				}
				add_manpower = -8
				subtract_variable = {
					which = manpower_cost
					value = 8
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 4
					}
				}
				add_manpower = -4
				subtract_variable = {
					which = manpower_cost
					value = 4
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 2
					}
				}
				add_manpower = -2
				subtract_variable = {
					which = manpower_cost
					value = 2
				}
			}
			if = {
				limit = {
					check_variable = {
						which = manpower_cost
						value = 1
					}
				}
				add_manpower = -1
				subtract_variable = {
					which = manpower_cost
					value = 1
				}
			}
			set_variable = {
				which = manpower_cost
				value = 0
			}
			set_variable = {
				which = their_manpower_contr
				value = 0
			}
			set_variable = {
				which = ducat_cost
				which = their_money_contr
			}
			while = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 65536
					}
				}
				add_treasury = -65536
				subtract_variable = {
					which = ducat_cost
					value = 65536
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 32768
					}
				}
				add_treasury = -32768
				subtract_variable = {
					which = ducat_cost
					value = 32768
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 16384
					}
				}
				add_treasury = -16384
				subtract_variable = {
					which = ducat_cost
					value = 16384
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 8192
					}
				}
				add_treasury = -8192
				subtract_variable = {
					which = ducat_cost
					value = 8192
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 4096
					}
				}
				add_treasury = -4096
				subtract_variable = {
					which = ducat_cost
					value = 4096
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 2048
					}
				}
				add_treasury = -2048
				subtract_variable = {
					which = ducat_cost
					value = 2048
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 1024
					}
				}
				add_treasury = -1024
				subtract_variable = {
					which = ducat_cost
					value = 1024
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 512
					}
				}
				add_treasury = -512
				subtract_variable = {
					which = ducat_cost
					value = 512
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 256
					}
				}
				add_treasury = -256
				subtract_variable = {
					which = ducat_cost
					value = 256
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 128
					}
				}
				add_treasury = -128
				subtract_variable = {
					which = ducat_cost
					value = 128
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 64
					}
				}
				add_treasury = -64
				subtract_variable = {
					which = ducat_cost
					value = 64
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 32
					}
				}
				add_treasury = -32
				subtract_variable = {
					which = ducat_cost
					value = 32
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 16
					}
				}
				add_treasury = -16
				subtract_variable = {
					which = ducat_cost
					value = 16
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 8
					}
				}
				add_treasury = -8
				subtract_variable = {
					which = ducat_cost
					value = 8
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 4
					}
				}
				add_treasury = -4
				subtract_variable = {
					which = ducat_cost
					value = 4
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 2
					}
				}
				add_treasury = -2
				subtract_variable = {
					which = ducat_cost
					value = 2
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 1
					}
				}
				add_treasury = -1
				subtract_variable = {
					which = ducat_cost
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 0.5
					}
				}
				add_treasury = -0.5
				subtract_variable = {
					which = ducat_cost
					value = 0.5
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 0.25
					}
				}
				add_treasury = -0.25
				subtract_variable = {
					which = ducat_cost
					value = 0.25
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 0.125
					}
				}
				add_treasury = -0.125
				subtract_variable = {
					which = ducat_cost
					value = 0.125
				}
			}
			set_variable = {
				which = ducat_cost
				value = 0
			}
			set_variable = {
				which = their_money_contr
				value = 0
			}
			subtract_variable = {
				which = numb_of_princes_def
				value = 1
			}
		}
		reverse_add_opinion = {
			who = emperor
			modifier = HRE_defense_help_manpower
		}
	}
	option = {
		name = "HRE_war_mechanics.002.money"
		trigger = {
			years_of_income = 0.1
		}
		ai_chance = {
			factor = 40
			modifier = {
				factor = 4
				government = republic
			}
			modifier = {
				factor = 1.5
				government = theocracy
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.1
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.2
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.25
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.3
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.35
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.4
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.45
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_gain
						value = 1.5
					}
				}
			}
		}
		custom_tooltip = "HRE_war_mechanics.002.money.ctp"
		hidden_effect = {
			multiply_variable = {
				which = ful_money_contr
				value = 0.1
			}
			set_variable = {
				which = supplied_money
				which = ful_money_contr
			}
			emperor = {
				change_variable = {
					which = supplied_money
					which = PREV
				}
			}
			set_variable = {
				which = ducat_cost
				which = ful_money_contr
			}
			while = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 65536
					}
				}
				add_treasury = -65536
				subtract_variable = {
					which = ducat_cost
					value = 65536
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 32768
					}
				}
				add_treasury = -32768
				subtract_variable = {
					which = ducat_cost
					value = 32768
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 16384
					}
				}
				add_treasury = -16384
				subtract_variable = {
					which = ducat_cost
					value = 16384
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 8192
					}
				}
				add_treasury = -8192
				subtract_variable = {
					which = ducat_cost
					value = 8192
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 4096
					}
				}
				add_treasury = -4096
				subtract_variable = {
					which = ducat_cost
					value = 4096
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 2048
					}
				}
				add_treasury = -2048
				subtract_variable = {
					which = ducat_cost
					value = 2048
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 1024
					}
				}
				add_treasury = -1024
				subtract_variable = {
					which = ducat_cost
					value = 1024
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 512
					}
				}
				add_treasury = -512
				subtract_variable = {
					which = ducat_cost
					value = 512
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 256
					}
				}
				add_treasury = -256
				subtract_variable = {
					which = ducat_cost
					value = 256
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 128
					}
				}
				add_treasury = -128
				subtract_variable = {
					which = ducat_cost
					value = 128
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 64
					}
				}
				add_treasury = -64
				subtract_variable = {
					which = ducat_cost
					value = 64
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 32
					}
				}
				add_treasury = -32
				subtract_variable = {
					which = ducat_cost
					value = 32
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 16
					}
				}
				add_treasury = -16
				subtract_variable = {
					which = ducat_cost
					value = 16
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 8
					}
				}
				add_treasury = -8
				subtract_variable = {
					which = ducat_cost
					value = 8
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 4
					}
				}
				add_treasury = -4
				subtract_variable = {
					which = ducat_cost
					value = 4
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 2
					}
				}
				add_treasury = -2
				subtract_variable = {
					which = ducat_cost
					value = 2
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 1
					}
				}
				add_treasury = -1
				subtract_variable = {
					which = ducat_cost
					value = 1
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 0.5
					}
				}
				add_treasury = -0.5
				subtract_variable = {
					which = ducat_cost
					value = 0.5
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 0.25
					}
				}
				add_treasury = -0.25
				subtract_variable = {
					which = ducat_cost
					value = 0.25
				}
			}
			if = {
				limit = {
					check_variable = {
						which = ducat_cost
						value = 0.125
					}
				}
				add_treasury = -0.125
				subtract_variable = {
					which = ducat_cost
					value = 0.125
				}
			}
			set_variable = {
				which = ducat_cost
				value = 0
			}
			set_variable = {
				which = ful_money_contr
				value = 0
			}
			subtract_variable = {
				which = numb_of_princes_def
				value = 1
			}
		}
		reverse_add_opinion = {
			who = emperor
			modifier = HRE_defense_help_money
		}
	}
	option = {
		name = "HRE_war_mechanics.002.refuse"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 1.1
				emperor = {
					NOT = {
						reverse_has_opinion = {
							who = ROOT
							value = 0
						}
					}
				}
			}
			modifier = {
				factor = 1.5
				emperor = {
					NOT = {
						reverse_has_opinion = {
							who = ROOT
							value = -25
						}
					}
				}
			}
			modifier = {
				factor = 2
				emperor = {
					NOT = {
						reverse_has_opinion = {
							who = ROOT
							value = -50
						}
					}
				}
			}
			modifier = {
				factor = 4
				emperor = {
					is_rival = ROOT
				}
			}
			modifier = {
				factor = 10
				is_at_war = yes
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1
					}
				}
			}
			modifier = {
				factor = 1.1
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.1
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.2
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.3
					}
				}
			}
			modifier = {
				factor = 1.2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.4
					}
				}
			}
			modifier = {
				factor = 1.3
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.5
					}
				}
			}
			modifier = {
				factor = 1.3
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.6
					}
				}
			}
			modifier = {
				factor = 1.3
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.7
					}
				}
			}
			modifier = {
				factor = 1.3
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.8
					}
				}
			}
			modifier = {
				factor = 1.3
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 1.9
					}
				}
			}
			modifier = {
				factor = 1.5
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 2
					}
				}
			}
			modifier = {
				factor = 2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 2.2
					}
				}
			}
			modifier = {
				factor = 2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 2.4
					}
				}
			}
			modifier = {
				factor = 2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 2.6
					}
				}
			}
			modifier = {
				factor = 2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 2.8
					}
				}
			}
			modifier = {
				factor = 2
				emperor = {
					check_variable = {
						which = hre_war_strength_comparison_remove
						value = 3
					}
				}
			}
		}
		custom_tooltip = "HRE_war_mechanics.002.refuse.ctp"
		hidden_effect = {
			subtract_variable = {
				which = numb_of_princes_def
				value = 1
			}
		}
		every_country = {
			limit = {
				is_part_of_hre = yes
				NOT = {
					is_emperor = yes
				}
			}
			add_opinion = {
				who = ROOT
				modifier = HRE_defense_help_refuse
			}
		}
		emperor = {
			add_opinion = {
				who = ROOT
				modifier = HRE_defense_help_refuse_emperor
			}
		}
	}
}
country_event = {
	id = HRE_war_mechanics.003
	title = HRE_war_mechanics.003.t
	desc = HRE_war_mechanics.003.d
	picture = HRE_eventPicture
	is_triggered_only = yes
	trigger = {
		is_emperor = yes
		NOT = {
			check_variable = {
				which = numb_of_princes_def
				value = 1
			}
		}
	}
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					mil_tech = 50
				}
				set_country_flag = mil_tech_50_war
			}
			else_if = {
				limit = {
					mil_tech = 40
				}
				set_country_flag = mil_tech_40_war
			}
			else_if = {
				limit = {
					mil_tech = 30
				}
				set_country_flag = mil_tech_30_war
			}
			else_if = {
				limit = {
					mil_tech = 20
				}
				set_country_flag = mil_tech_20_war
			}
			else_if = {
				limit = {
					mil_tech = 10
				}
				set_country_flag = mil_tech_10_war
			}
			else = {
				set_country_flag = mil_tech_0_war
			}
			set_variable = {
				which = supplied_force
				value = 0
			}
			set_variable = {
				which = supplied_force
				which = supplied_manpower
			}
			set_variable = {
				which = supplied_infantry
				value = 0
			}
			set_variable = {
				which = supplied_infantry
				which = supplied_force
			}
			set_variable = {
				which = supplied_cavarly
				value = 0
			}
			set_variable = {
				which = supplied_cavarly
				which = supplied_force
			}
			set_variable = {
				which = supplied_artillery
				value = 0
			}
			set_variable = {
				which = supplied_artillery
				which = supplied_force
			}
			if = {
				limit = {
					has_country_flag = mil_tech_0_war
				}
				multiply_variable = {
					which = supplied_infantry
					value = 0.7
				}
				multiply_variable = {
					which = supplied_cavarly
					value = 0.3
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_10_war
				}
				multiply_variable = {
					which = supplied_infantry
					value = 0.7
				}
				multiply_variable = {
					which = supplied_cavarly
					value = 0.2
				}
				multiply_variable = {
					which = supplied_artillery
					value = 0.1
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_20_war
				}
				multiply_variable = {
					which = supplied_infantry
					value = 0.7
				}
				multiply_variable = {
					which = supplied_cavarly
					value = 0.15
				}
				multiply_variable = {
					which = supplied_artillery
					value = 0.15
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_30_war
				}
				multiply_variable = {
					which = supplied_infantry
					value = 0.65
				}
				multiply_variable = {
					which = supplied_cavarly
					value = 0.15
				}
				multiply_variable = {
					which = supplied_artillery
					value = 0.20
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_40_war
				}
				multiply_variable = {
					which = supplied_infantry
					value = 0.65
				}
				multiply_variable = {
					which = supplied_cavarly
					value = 0.1
				}
				multiply_variable = {
					which = supplied_artillery
					value = 0.25
				}
			}
			else_if = {
				limit = {
					has_country_flag = mil_tech_50_war
				}
				multiply_variable = {
					which = supplied_infantry
					value = 0.60
				}
				multiply_variable = {
					which = supplied_cavarly
					value = 0.15
				}
				multiply_variable = {
					which = supplied_artillery
					value = 0.25
				}
			}
			set_country_flag = raised_special_units
			set_country_flag = imperial_estates_war_support
			add_country_modifier = {
				name = estate_war_support
				duration = 140
				hidden = yes
			}
		}
	}
	option = {
		name = "HRE_war_mechanics.003.a"
		if = {
			limit = {
				check_variable = {
					which = supplied_force
					value = 25
				}
			}
			if = {
				limit = {
					check_variable = {
						which = supplied_force
						value = 70
					}
				}
				if = {
					limit = {
						check_variable = {
							which = supplied_force
							value = 140
						}
					}
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 180
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 200
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_200
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_180
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 160
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_160
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_140
								duration = -1
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 100
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 120
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_120
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_100
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 80
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_80
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_70
								duration = -1
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = {
							which = supplied_force
							value = 35
						}
					}
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 50
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 60
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_60
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_50
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 45
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_45
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_40
								duration = -1
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 35
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 40
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_30
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_35
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 30
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_30
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_25
								duration = -1
							}
						}
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = {
						which = supplied_force
						value = 8
					}
				}
				if = {
					limit = {
						check_variable = {
							which = supplied_force
							value = 14
						}
					}
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 18
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 20
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_20
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_18
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 16
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_16
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_14
								duration = -1
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 10
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 12
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_12
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_10
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 9
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_9
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_8
								duration = -1
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = {
							which = supplied_force
							value = 4
						}
					}
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 6
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 7
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_7
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_6
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 5
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_5
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_4
								duration = -1
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = {
								which = supplied_force
								value = 2
							}
						}
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 3
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_3
								duration = -1
							}
						}
						else = {
							add_country_modifier = {
								name = HRE_defense_forcelimit_2
								duration = -1
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = {
									which = supplied_force
									value = 1
								}
							}
							add_country_modifier = {
								name = HRE_defense_forcelimit_1
								duration = -1
							}
						}
					}
				}
			}
		}
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				mil_tech_0_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_infantry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_infantry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_infantry_0
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_infantry_0
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_0
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_10_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_infantry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_infantry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_infantry_10
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_infantry_10
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_10
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_20_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_infantry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_infantry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_infantry_20
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_infantry_20
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_20
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_30_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_infantry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_infantry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_infantry_30
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_infantry_30
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_30
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_40_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_infantry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_infantry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_infantry_40
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_infantry_40
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_40
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_50_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_infantry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_infantry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_infantry_50
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_infantry_50
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_infantry_50
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
			}
		}
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				mil_tech_0_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_cavalry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_cavalry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_cavalry_0
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_cavalry_0
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_0
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_10_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_cavalry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_cavalry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_cavalry_10
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_cavalry_10
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_10
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_20_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_cavalry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_cavalry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_cavalry_20
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_cavalry_20
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_20
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_30_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_cavalry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_cavalry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_cavalry_30
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_cavalry_30
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_30
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_40_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_cavalry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_cavalry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_cavalry_40
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_cavalry_40
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_40
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_50_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_cavalry
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_cavalry
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_cavalry_50
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_cavalry_50
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_cavalry_50
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
			}
		}
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				mil_tech_10_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_artillery
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_artillery
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_artillery_10
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_artillery_10
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_10
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_20_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_artillery
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_artillery
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_artillery_20
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_artillery_20
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_20
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_30_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_artillery
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_artillery
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_artillery_30
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_artillery_30
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_30
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_40_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_artillery
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_artillery
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_artillery_40
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_artillery_40
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_40
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
				mil_tech_50_war = {
					while = {
						limit = {
							check_variable = {
								which = supplied_artillery
								value = 1
							}
						}
						subtract_variable = {
							which = supplied_artillery
							value = 1
						}
						random_owned_province = {
							limit = {
								is_city = yes
								is_core = owner
								is_part_of_hre = yes
								NOT = {
									has_province_flag = was_occupied
								}
								NOT = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 16
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 1
									}
								}
								change_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
							else = {
								set_variable = {
									which = troops_fielded_local_hre
									value = 1
								}
							}
						}
					}
					every_owned_province = {
						limit = {
							check_variable = {
								which = troops_fielded_local_hre
								value = 1
							}
						}
						if = {
							limit = {
								owner = {
									ai = yes
								}
							}
							cancel_construction = yes
						}
						if = {
							limit = {
								check_variable = {
									which = troops_fielded_local_hre
									value = 8
								}
							}
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 12
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 14
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 15
											}
										}
										if = {
											limit = {
												check_variable = {
													which = troops_fielded_local_hre
													value = 16
												}
											}
											add_unit_construction = {
												type = imperial_estates_artillery_50
												amount = 16
												speed = 0.25
												cost = 0
											}
										}
										else = {
											add_unit_construction = {
												type = imperial_estates_artillery_50
												amount = 15
												speed = 0.25
												cost = 0
											}
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 14
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 13
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 13
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 12
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 10
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 11
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 11
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 10
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 9
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 9
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 8
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = {
										which = troops_fielded_local_hre
										value = 4
									}
								}
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 6
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 7
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 7
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 6
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 5
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 5
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 4
											speed = 0.25
											cost = 0
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = {
											which = troops_fielded_local_hre
											value = 2
										}
									}
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 3
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 3
											speed = 0.25
											cost = 0
										}
									}
									else = {
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 2
											speed = 0.25
											cost = 0
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = troops_fielded_local_hre
												value = 1
											}
										}
										add_unit_construction = {
											type = imperial_estates_artillery_50
											amount = 1
											speed = 0.25
											cost = 0
										}
									}
								}
							}
						}
						set_variable = {
							which = troops_fielded_local_hre
							value = 0
						}
					}
				}
			}
		}
		set_country_flag = imperial_war
		add_country_modifier = {
			name = estate_war_support
			duration = 140
			hidden = yes
		}
	}
	after = {
		emperor = {
			set_variable = {
				which = hre_war_strength_comparison_gain
				value = 0
			}
			set_variable = {
				which = hre_war_strength_comparison_remove
				value = 0
			}
		}
		event_target:hre_war_attacker_leader = {
			set_variable = {
				which = hre_war_strength_comparison_gain
				value = 0
			}
			set_variable = {
				which = hre_war_strength_comparison_remove
				value = 0
			}
		}
		event_target:hre_war_defender_leader = {
			set_variable = {
				which = hre_war_strength_comparison_gain
				value = 0
			}
			set_variable = {
				which = hre_war_strength_comparison_remove
				value = 0
			}
		}
	}
}
country_event = {
	id = HRE_war_mechanics.004
	title = HRE_war_mechanics.004.t
	desc = HRE_war_mechanics.004.d
	picture = HRE_eventPicture
	trigger = {
		is_emperor = yes
		OR = {
			NOT = {
				any_country = {
					offensive_war_with = emperor
				}
			}
			has_country_flag = imperial_romzug
		}
		has_country_flag = imperial_war
	}
	mean_time_to_happen = {
		months = 1
	}
	option = {
		name = "HRE_war_mechanics.004.a"
		custom_tooltip = "HRE_war_mechanics.004.a.ctp"
		hidden_effect = {
			set_variable = {
				which = supplied_force
				value = 0
			}
			set_variable = {
				which = supplied_artillery
				value = 0
			}
			set_variable = {
				which = supplied_cavalry
				value = 0
			}
			set_variable = {
				which = supplied_infantry
				value = 0
			}
			set_variable = {
				which = supplied_manpower
				value = 0
			}
			set_variable = {
				which = supplied_money
				value = 0
			}
			every_country = {
				set_variable = {
					which = num_of_princes_def
					value = 0
				}
				set_variable = {
					which = their_money_contr
					value = 0
				}
				set_variable = {
					which = their_manpower_contr
					value = 0
				}
				set_variable = {
					which = hre_war_strength_comparison_gain
					value = 0
				}
				set_variable = {
					which = hre_war_strength_comparison_remove
					value = 0
				}
			}
			clr_country_flag = imperial_war
			clr_country_flag = imperial_estate_war_support
			trigger_switch = {
				on_trigger = has_country_modifier
				HRE_defense_forcelimit_1 = {
					remove_country_modifier = HRE_defense_forcelimit_1
				}
				HRE_defense_forcelimit_2 = {
					remove_country_modifier = HRE_defense_forcelimit_2
				}
				HRE_defense_forcelimit_3 = {
					remove_country_modifier = HRE_defense_forcelimit_3
				}
				HRE_defense_forcelimit_4 = {
					remove_country_modifier = HRE_defense_forcelimit_4
				}
				HRE_defense_forcelimit_5 = {
					remove_country_modifier = HRE_defense_forcelimit_5
				}
				HRE_defense_forcelimit_6 = {
					remove_country_modifier = HRE_defense_forcelimit_6
				}
				HRE_defense_forcelimit_7 = {
					remove_country_modifier = HRE_defense_forcelimit_7
				}
				HRE_defense_forcelimit_8 = {
					remove_country_modifier = HRE_defense_forcelimit_8
				}
				HRE_defense_forcelimit_9 = {
					remove_country_modifier = HRE_defense_forcelimit_9
				}
				HRE_defense_forcelimit_10 = {
					remove_country_modifier = HRE_defense_forcelimit_10
				}
				HRE_defense_forcelimit_12 = {
					remove_country_modifier = HRE_defense_forcelimit_12
				}
				HRE_defense_forcelimit_14 = {
					remove_country_modifier = HRE_defense_forcelimit_14
				}
				HRE_defense_forcelimit_16 = {
					remove_country_modifier = HRE_defense_forcelimit_16
				}
				HRE_defense_forcelimit_18 = {
					remove_country_modifier = HRE_defense_forcelimit_18
				}
				HRE_defense_forcelimit_20 = {
					remove_country_modifier = HRE_defense_forcelimit_20
				}
				HRE_defense_forcelimit_25 = {
					remove_country_modifier = HRE_defense_forcelimit_25
				}
				HRE_defense_forcelimit_30 = {
					remove_country_modifier = HRE_defense_forcelimit_30
				}
				HRE_defense_forcelimit_35 = {
					remove_country_modifier = HRE_defense_forcelimit_35
				}
				HRE_defense_forcelimit_40 = {
					remove_country_modifier = HRE_defense_forcelimit_40
				}
				HRE_defense_forcelimit_45 = {
					remove_country_modifier = HRE_defense_forcelimit_45
				}
				HRE_defense_forcelimit_50 = {
					remove_country_modifier = HRE_defense_forcelimit_50
				}
				HRE_defense_forcelimit_60 = {
					remove_country_modifier = HRE_defense_forcelimit_60
				}
				HRE_defense_forcelimit_70 = {
					remove_country_modifier = HRE_defense_forcelimit_70
				}
				HRE_defense_forcelimit_80 = {
					remove_country_modifier = HRE_defense_forcelimit_80
				}
				HRE_defense_forcelimit_90 = {
					remove_country_modifier = HRE_defense_forcelimit_90
				}
				HRE_defense_forcelimit_100 = {
					remove_country_modifier = HRE_defense_forcelimit_100
				}
				HRE_defense_forcelimit_120 = {
					remove_country_modifier = HRE_defense_forcelimit_120
				}
				HRE_defense_forcelimit_140 = {
					remove_country_modifier = HRE_defense_forcelimit_140
				}
				HRE_defense_forcelimit_160 = {
					remove_country_modifier = HRE_defense_forcelimit_160
				}
				HRE_defense_forcelimit_180 = {
					remove_country_modifier = HRE_defense_forcelimit_180
				}
				HRE_defense_forcelimit_200 = {
					remove_country_modifier = HRE_defense_forcelimit_200
				}
			}
		}
	}
}
country_event = {
	id = HRE_war_mechanics.005
	title = "HRE_war_mechanics.005.t"
	desc = "HRE_war_mechanics.005.d"
	picture = HRE_eventPicture
	hidden = yes
	is_triggered_only = yes
	trigger = {
		is_emperor = yes
	}
	immediate = {
		hidden_effect = {
			ERG = {
				set_variable = {
					which = hre_war_strength
					value = 0
				}
			}
			every_country = {
				set_variable = {
					which = hre_war_strength
					value = 0
				}
				set_variable = {
					which = hre_war_strength_comparison_gain
					value = 0
				}
				set_variable = {
					which = hre_war_strength_comparison_remove
					value = 0
				}
			}
			ERG = {
				set_variable = {
					which = estimated_manpower
					value = 0
				}
			}
			set_variable = {
				which = estimated_manpower
				value = 0
			}
			every_country = {
				limit = {
					is_part_of_hre = yes
					NOT = {
						is_emperor = yes
					}
				}
				export_to_variable = {
					which = estimated_manpower
					value = max_manpower
				}
				multiply_variable = {
					which = estimated_manpower
					value = 0.005
				}
				change_variable = {
					which = estimated_manpower
					value = 0.15
				}
				if = {
					limit = {
						OR = {
							government = monarchy
							government = theocracy
						}
						emperor = {
							NOT = {
								reverse_has_opinion = {
									who = ROOT
									value = 0
								}
							}
						}
					}
					multiply_variable = {
						which = estimated_manpower
						value = 0.75
					}
				}
				else_if = {
					limit = {
						OR = {
							government = monarchy
							government = theocracy
						}
						emperor = {
							NOT = {
								reverse_has_opinion = {
									who = ROOT
									value = -25
								}
							}
						}
					}
					multiply_variable = {
						which = estimated_manpower
						value = 0.25
					}
				}
				else_if = {
					limit = {
						OR = {
							government = monarchy
							government = theocracy
						}
						emperor = {
							NOT = {
								reverse_has_opinion = {
									who = ROOT
									value = -50
								}
							}
						}
					}
					set_variable = {
						which = estimated_manpower
						value = 0
					}
				}
				if = {
					limit = {
						NOT = {
							OR = {
								government = monarchy
								government = theocracy
							}
						}
						has_opinion = {
							who = emperor
							value = 0
						}
					}
					multiply_variable = {
						which = estimated_manpower
						value = 0.25
					}
				}
				else_if = {
					limit = {
						NOT = {
							OR = {
								government = monarchy
								government = theocracy
							}
						}
						emperor = {
							NOT = {
								reverse_has_opinion = {
									who = ROOT
									value = -25
								}
							}
						}
					}
					multiply_variable = {
						which = estimated_manpower
						value = 0.25
					}
				}
				else_if = {
					limit = {
						NOT = {
							OR = {
								government = monarchy
								government = theocracy
							}
						}
						emperor = {
							NOT = {
								reverse_has_opinion = {
									who = ROOT
									value = -50
								}
							}
						}
					}
					set_variable = {
						which = estimated_manpower
						value = 0
					}
				}
				if = {
					limit = {
						is_at_war = yes
					}
					set_variable = {
						which = estimated_manpower
						value = 0
					}
				}
				else_if = {
					limit = {
						emperor = {
							is_rival = ROOT
						}
					}
					set_variable = {
						which = estimated_manpower
						value = 0
					}
				}
				ERG = {
					change_variable = {
						which = estimated_manpower
						which = PREV
					}
				}
			}
			ERG = {
				set_variable = {
					which = hre_war_strength
					which = estimated_manpower
				}
			}
			every_country = {
				limit = {
					NOT = {
						is_part_of_hre = yes
					}
					any_neighbor_country = {
						is_part_of_hre = yes
					}
					is_subject = no
				}
				set_country_flag = already_counted
				set_variable = {
					which = hre_army_size_aggressor
					which = army_size_total
				}
				every_ally = {
					if = {
						limit = {
							NOT = {
								has_country_flag = already_counted
							}
						}
						set_country_flag = already_counted
						set_variable = {
							which = hre_army_size_aggressor
							which = army_size_total
						}
						PREV = {
							change_variable = {
								which = hre_army_size_aggressor
								which = PREV
							}
						}
						set_variable = {
							which = hre_army_size_aggressor
							value = 0
						}
					}
				}
				every_country = {
					clr_country_flag = already_counted
				}
				set_variable = {
					which = hre_war_strength
					which = hre_army_size_aggressor
				}
				set_variable = {
					which = hre_army_size_aggressor
					value = 0
				}
			}
			emperor = {
				save_global_event_target_as = hre_member_target
				set_country_flag = already_counted
				if = {
					limit = {
						NOT = {
							is_subject = yes
						}
					}
					set_variable = {
						which = army_size_defender
						which = army_size_total
					}
					every_ally = {
						set_country_flag = already_counted
						set_variable = {
							which = army_size_defender
							which = army_size_total
						}
						PREV = {
							change_variable = {
								which = army_size_defender
								which = PREV
							}
						}
						set_variable = {
							which = army_size_defender
							value = 0
						}
					}
				}
				if = {
					limit = {
						is_subject = yes
						NOT = {
							is_subject_of_type = tributary_state
						}
					}
					overlord = {
						set_country_flag = already_counted
						set_variable = {
							which = army_size_defender
							which = army_size_total
						}
						event_target:hre_member_target = {
							set_variable = {
								which = army_size_defender
								which = PREV
							}
						}
						set_variable = {
							which = army_size_defender
							value = 0
						}
						every_ally = {
							if = {
								limit = {
									NOT = {
										has_country_flag = already_counted
									}
								}
								set_country_flag = already_counted
								set_variable = {
									which = army_size_defender
									which = army_size_total
								}
								event_target:hre_member_target = {
									change_variable = {
										which = army_size_defender
										which = PREV
									}
								}
								set_variable = {
									which = army_size_defender
									value = 0
								}
							}
						}
					}
				}
				if = {
					limit = {
						has_country_flag = has_been_guaranteed
					}
					every_country = {
						limit = {
							has_guaranteed = PREV
						}
						if = {
							limit = {
								NOT = {
									has_country_flag = already_counted
								}
							}
							set_country_flag = already_counted
							set_variable = {
								which = army_size_defender
								which = army_size_total
							}
							event_target:hre_member_target = {
								change_variable = {
									which = army_size_defender
									which = PREV
								}
							}
							set_variable = {
								which = army_size_defender
								value = 0
							}
						}
					}
				}
				if = {
					limit = {
						is_emperor = no
					}
					emperor = {
						if = {
							limit = {
								NOT = {
									has_country_flag = already_counted
								}
							}
							set_country_flag = already_counted
							change_variable = {
								which = army_size_defender
								which = army_size_total
							}
							PREV = {
								change_variable = {
									which = army_size_defender
									which = PREV
								}
							}
							set_variable = {
								which = army_size_defender
								value = 0
							}
						}
						every_ally = {
							if = {
								limit = {
									NOT = {
										has_country_flag = already_counted
									}
								}
								set_country_flag = already_counted
								set_variable = {
									which = army_size_defender
									which = army_size_total
								}
								event_target:hre_member_target = {
									change_variable = {
										which = army_size_defender
										which = PREV
									}
								}
								set_variable = {
									which = army_size_defender
									value = 0
								}
							}
						}
						change_variable = {
							which = army_size_defender
							which = hre_army_size
						}
					}
				}
				every_country = {
					limit = {
						has_country_flag = already_counted
					}
					clr_country_flag = already_counted
				}
				set_variable = {
					which = hre_war_strength
					which = army_size_defender
				}
				set_variable = {
					which = army_size_defender
					value = 0
				}
				clear_global_event_target = hre_member_target
			}
			every_country = {
				limit = {
					is_part_of_hre = yes
					any_neighbor_country = {
						NOT = {
							is_part_of_hre = yes
						}
					}
				}
				save_global_event_target_as = hre_member_target
				set_country_flag = already_counted
				if = {
					limit = {
						NOT = {
							is_subject = yes
						}
					}
					set_variable = {
						which = army_size_defender
						which = army_size_total
					}
					every_ally = {
						set_country_flag = already_counted
						set_variable = {
							which = army_size_defender
							which = army_size_total
						}
						PREV = {
							change_variable = {
								which = army_size_defender
								which = PREV
							}
						}
						set_variable = {
							which = army_size_defender
							value = 0
						}
					}
				}
				if = {
					limit = {
						is_subject = yes
						NOT = {
							is_subject_of_type = tributary_state
						}
					}
					overlord = {
						set_country_flag = already_counted
						set_variable = {
							which = army_size_defender
							which = army_size_total
						}
						event_target:hre_member_target = {
							set_variable = {
								which = army_size_defender
								which = PREV
							}
						}
						set_variable = {
							which = army_size_defender
							value = 0
						}
						every_ally = {
							if = {
								limit = {
									NOT = {
										has_country_flag = already_counted
									}
								}
								set_country_flag = already_counted
								set_variable = {
									which = army_size_defender
									which = army_size_total
								}
								event_target:hre_member_target = {
									change_variable = {
										which = army_size_defender
										which = PREV
									}
								}
								set_variable = {
									which = army_size_defender
									value = 0
								}
							}
						}
					}
				}
				if = {
					limit = {
						has_country_flag = has_been_guaranteed
					}
					every_country = {
						limit = {
							has_guaranteed = PREV
						}
						if = {
							limit = {
								NOT = {
									has_country_flag = already_counted
								}
							}
							set_country_flag = already_counted
							set_variable = {
								which = army_size_defender
								which = army_size_total
							}
							event_target:hre_member_target = {
								change_variable = {
									which = army_size_defender
									which = PREV
								}
							}
							set_variable = {
								which = army_size_defender
								value = 0
							}
						}
					}
				}
				if = {
					limit = {
						is_emperor = no
					}
					emperor = {
						if = {
							limit = {
								NOT = {
									has_country_flag = already_counted
								}
							}
							set_country_flag = already_counted
							change_variable = {
								which = army_size_defender
								which = army_size_total
							}
							PREV = {
								change_variable = {
									which = army_size_defender
									which = PREV
								}
							}
							set_variable = {
								which = army_size_defender
								value = 0
							}
						}
						every_ally = {
							if = {
								limit = {
									NOT = {
										has_country_flag = already_counted
									}
								}
								set_country_flag = already_counted
								set_variable = {
									which = army_size_defender
									which = army_size_total
								}
								event_target:hre_member_target = {
									change_variable = {
										which = army_size_defender
										which = PREV
									}
								}
								set_variable = {
									which = army_size_defender
									value = 0
								}
							}
						}
						change_variable = {
							which = army_size_defender
							which = hre_army_size
						}
					}
				}
				every_country = {
					limit = {
						has_country_flag = already_counted
					}
					clr_country_flag = already_counted
				}
				set_variable = {
					which = hre_war_strength
					which = army_size_defender
				}
				set_variable = {
					which = army_size_defender
					value = 0
				}
				clear_global_event_target = hre_member_target
			}
			ERG = {
				every_country = {
					limit = {
						OR = {
							AND = {
								is_part_of_hre = yes
								any_neighbor_country = {
									NOT = {
										is_part_of_hre = yes
									}
								}
							}
							is_emperor = yes
						}
					}
					change_variable = {
						which = hre_war_strength
						which = PREV
					}
				}
			}
		}
	}
	option = {
		name = "HRE_war_mechanics.005.o"
	}
}
