country_event = {
	id = japan.1
	title = "japan.1.n"
	desc = "japan.1.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	hidden = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					OR = {
						tag = AKG
						is_subject_of = AKG
					}
				}
				every_known_country = {
					limit = {
						OR = {
							is_subject_of = AKG
							tag = AKG
						}
					}
					add_opinion = {
						who = ROOT
						modifier = opinion_joined_our_court
					}
					reverse_add_opinion = {
						who = ROOT
						modifier = opinion_joined_our_court
					}
				}
				every_known_country = {
					limit = {
						OR = {
							is_subject_of = JAP
							tag = JAP
						}
					}
					add_opinion = {
						who = ROOT
						modifier = opinion_joined_enemy_court
					}
					reverse_add_opinion = {
						who = ROOT
						modifier = opinion_joined_enemy_court
					}
				}
			}
			if = {
				limit = {
					OR = {
						tag = JAP
						is_subject_of = JAP
					}
				}
				every_known_country = {
					limit = {
						OR = {
							is_subject_of = JAP
							tag = JAP
						}
					}
					add_opinion = {
						who = ROOT
						modifier = opinion_joined_our_court
					}
					reverse_add_opinion = {
						who = ROOT
						modifier = opinion_joined_our_court
					}
				}
				every_known_country = {
					limit = {
						OR = {
							is_subject_of = AKG
							tag = AKG
						}
					}
					add_opinion = {
						who = ROOT
						modifier = opinion_joined_enemy_court
					}
					reverse_add_opinion = {
						who = ROOT
						modifier = opinion_joined_enemy_court
					}
				}
			}
			AKG = {
				save_global_event_target_as = japanese_shogun
			}
		}
	}
	option = {
		name = "japan.a"
	}
}
country_event = {
	id = japan.2
	title = "japan.2.t"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	desc = {
		trigger = {
			OR = {
				has_country_flag = supporting_southern_court
				tag = JAP
			}
			FROM = {
				has_country_flag = supporting_northern_court
			}
		}
		desc = japan.2.da
	}
	desc = {
		trigger = {
			OR = {
				has_country_flag = supporting_northern_court
				tag = event_target:japanese_shogun
			}
			FROM = {
				has_country_flag = supporting_southern_court
			}
		}
		desc = japan.2.db
	}
	desc = {
		trigger = {
			OR = {
				has_country_flag = supporting_southern_court
				tag = JAP
			}
			FROM = {
				has_country_flag = supporting_southern_court
			}
		}
		desc = japan.2.dc
	}
	desc = {
		trigger = {
			OR = {
				has_country_flag = supporting_northern_court
				tag = event_target:japanese_shogun
			}
			FROM = {
				has_country_flag = supporting_northern_court
			}
		}
		desc = japan.2.dd
	}
	option = {
		name = "japan.2a"
		trigger = {
			OR = {
				has_country_flag = supporting_southern_court
				tag = JAP
			}
			FROM = {
				has_country_flag = supporting_northern_court
			}
		}
	}
	option = {
		name = "japan.2b"
		trigger = {
			OR = {
				has_country_flag = supporting_northern_court
				tag = event_target:japanese_shogun
			}
			FROM = {
				has_country_flag = supporting_southern_court
			}
		}
	}
	option = {
		name = "japan.2c"
		trigger = {
			OR = {
				has_country_flag = supporting_southern_court
				tag = JAP
			}
			FROM = {
				has_country_flag = supporting_southern_court
			}
		}
	}
	option = {
		name = "japan.2d"
		trigger = {
			OR = {
				has_country_flag = supporting_northern_court
				tag = event_target:japanese_shogun
			}
			FROM = {
				has_country_flag = supporting_northern_court
			}
		}
	}
	option = {
		name = "japan.2e"
		trigger = {
			NOT = {
				has_country_flag = supporting_northern_court
			}
			NOT = {
				has_country_flag = supporting_southern_court
			}
			NOT = {
				tag = event_target:japanese_shogun
			}
			NOT = {
				tag = JAP
			}
		}
	}
}
country_event = {
	id = japan.3
	title = "japan.3.t"
	desc = {
		trigger = {
			has_country_flag = meitoku_treaty
		}
		desc = japan.3.da
	}
	desc = {
		trigger = {
			NOT = {
				has_country_flag = meitoku_treaty
			}
		}
		desc = japan.3.db
	}
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		tag = event_target:japanese_shogun
		culture_group = japanese
		has_global_flag = nanbokucho
		FROM = {
			tag = JAP
		}
	}
	immediate = {
		if = {
			limit = {
				3973 = {
					controlled_by = JAP
				}
			}
			set_country_flag = meitoku_treaty
		}
	}
	option = {
		name = "japan.3a"
		add_prestige = 50
		add_legitimacy = 50
		custom_tooltip = stability_points_gained_100
		hidden_effect = {
			change_variable = {
				which = stability_points
				value = 100
			}
			country_event = {
				id = POP_Stability.002
			}
		}
		inherit = JAP
		every_known_country = {
			limit = {
				NOT = {
					tag = JAP
				}
				culture_group = japanese
				exists = yes
				NOT = {
					is_subject_of = ROOT
				}
				NOT = {
					overlord = {
						is_subject_of = ROOT
					}
				}
			}
			ROOT = {
				create_subject = {
					who = PREV
					subject_type = daimyo_vassal
				}
			}
		}
		every_known_country = {
			limit = {
				OR = {
					has_country_flag = supporting_northern_court
					has_country_flag = supporting_southern_court
				}
			}
			if = {
				limit = {
					has_country_flag = supporting_southern_court
					OR = {
						has_country_flag = kyushu_tandai
						has_country_flag = chugoku_tandai
						has_country_flag = shikoku_tandai
						has_country_flag = uo_tandai
					}
				}
				clr_country_flag = kyushu_tandai
				clr_country_flag = chugoku_tandai
				clr_country_flag = shikoku_tandai
				clr_country_flag = uo_tandai
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
			clr_country_flag = supporting_northern_court
			clr_country_flag = supporting_southern_court
		}
		2283 = {
			add_permanent_province_modifier = {
				name = emperors_palace
				duration = -1
			}
			save_global_event_target_as = imperial_capital
		}
		clr_global_flag = nanbokucho
	}
}
country_event = {
	id = japan.4
	title = "japan.4.t"
	desc = "japan.4.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		tag = JAP
		has_global_flag = nanbokucho
		FROM = {
			tag = event_target:japanese_shogun
		}
	}
	option = {
		name = "japan.4a"
		add_prestige = 50
		add_legitimacy = 50
		custom_tooltip = stability_points_gained_100
		hidden_effect = {
			change_variable = {
				which = stability_points
				value = 100
			}
			country_event = {
				id = POP_Stability.002
			}
		}
		inherit = event_target:japanese_shogun
		hidden_effect = {
			capital_scope = {
				if = {
					limit = {
						has_province_modifier = misc_expenses_5242.88
					}
					remove_province_modifier = misc_expenses_5242.88
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_2621.44
					}
					remove_province_modifier = misc_expenses_2621.44
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_1310.72
					}
					remove_province_modifier = misc_expenses_1310.72
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_655.36
					}
					remove_province_modifier = misc_expenses_655.36
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_327.68
					}
					remove_province_modifier = misc_expenses_327.68
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_163.84
					}
					remove_province_modifier = misc_expenses_163.84
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_81.92
					}
					remove_province_modifier = misc_expenses_81.92
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_40.96
					}
					remove_province_modifier = misc_expenses_40.96
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_20.48
					}
					remove_province_modifier = misc_expenses_20.48
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_10.24
					}
					remove_province_modifier = misc_expenses_10.24
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_5.12
					}
					remove_province_modifier = misc_expenses_5.12
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_2.56
					}
					remove_province_modifier = misc_expenses_2.56
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_1.28
					}
					remove_province_modifier = misc_expenses_1.28
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_0.64
					}
					remove_province_modifier = misc_expenses_0.64
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_0.32
					}
					remove_province_modifier = misc_expenses_0.32
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_0.16
					}
					remove_province_modifier = misc_expenses_0.16
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_0.08
					}
					remove_province_modifier = misc_expenses_0.08
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_0.04
					}
					remove_province_modifier = misc_expenses_0.04
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_0.02
					}
					remove_province_modifier = misc_expenses_0.02
				}
				if = {
					limit = {
						has_province_modifier = misc_expenses_0.01
					}
					remove_province_modifier = misc_expenses_0.01
				}
				set_variable = {
					which = misc_expenses_cache
					value = 0
				}
			}
		}
		if = {
			limit = {
				is_part_of_hre = yes
				ROOT = {
					is_part_of_hre = no
				}
			}
			set_in_empire = no
			swap_non_generic_missions = yes
			emperor = {
				add_opinion = {
					who = ROOT
					modifier = hre_province_left
				}
			}
			add_imperial_influence = -1
		}
		set_capital = 2283
		hidden_effect = {
			country_event = {
				id = miscexpenses.002
			}
		}
		every_known_country = {
			limit = {
				NOT = {
					tag = event_target:japanese_shogun
				}
				culture_group = japanese
				exists = yes
				NOT = {
					is_subject_of = ROOT
				}
				NOT = {
					overlord = {
						is_subject_of = ROOT
					}
				}
			}
			ROOT = {
				create_subject = {
					who = PREV
					subject_type = daimyo_vassal
				}
			}
		}
		every_known_country = {
			limit = {
				OR = {
					has_country_flag = supporting_northern_court
					has_country_flag = supporting_southern_court
				}
			}
			if = {
				limit = {
					has_country_flag = supporting_southern_court
					NOT = {
						has_country_flag = kami
					}
				}
				set_country_flag = kami
			}
			if = {
				limit = {
					has_country_flag = supporting_northern_court
					OR = {
						has_country_flag = kyushu_tandai
						has_country_flag = chugoku_tandai
						has_country_flag = shikoku_tandai
						has_country_flag = uo_tandai
					}
				}
				clr_country_flag = kyushu_tandai
				clr_country_flag = chugoku_tandai
				clr_country_flag = shikoku_tandai
				clr_country_flag = uo_tandai
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
			if = {
				limit = {
					has_country_flag = kyoto_kanrei
				}
				clr_country_flag = kyoto_kanrei
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
			if = {
				limit = {
					has_country_flag = kanrei_appointement
				}
				clr_country_flag = kanrei_appointement
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
			clr_country_flag = supporting_northern_court
			clr_country_flag = supporting_southern_court
		}
		random_province = {
			limit = {
				superregion = japan_superregion
				has_province_modifier = emperors_palace
			}
			remove_province_modifier = emperors_palace
			clear_global_event_target = imperial_capital
		}
		clr_global_flag = nanbokucho
	}
}
country_event = {
	id = japan.5
	title = "japan.5.t"
	desc = "japan.5.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	option = {
		name = "japan.4a"
		ROOT = {
			save_global_event_target_as = japanese_shogun
		}
		if = {
			limit = {
				NOT = {
					has_saved_event_target = imperial_capital
				}
			}
			capital_scope = {
				save_global_event_target_as = imperial_capital
				add_permanent_province_modifier = {
					name = emperors_palace
					duration = -1
				}
			}
		}
		if = {
			limit = {
				2283 = {
					is_capital = no
				}
			}
			capital_scope = {
				if = {
					limit = {
						OR = {
							region = west_japan_region
							area = west_kansai_area
							NOT = {
								province_id = 2281
							}
						}
					}
					rename_capital = "Saikyau"
				}
				else_if = {
					limit = {
						OR = {
							region = east_japan_region
							area = chubu_area
							province_id = 3958
						}
					}
					rename_capital = "Toukyau"
				}
				else_if = {
					limit = {
						OR = {
							province_id = 2280
							province_id = 3959
							province_id = 3973
							province_id = 2281
						}
					}
					rename_capital = "Nankyau"
				}
				else_if = {
					limit = {
						OR = {
							province_id = 2796
							area = hokuriku_area
						}
					}
					rename_capital = "Hokukyau"
				}
			}
		}
		every_known_country = {
			limit = {
				culture_group = japanese
				NOT = {
					primary_culture = ryukyuan
				}
			}
			country_event = {
				id = japan.6
				days = 30
				random = 15
			}
		}
	}
}
country_event = {
	id = japan.6
	title = "japan.6.t"
	desc = "japan.6.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.6a"
		FROM = {
			create_subject = {
				who = ROOT
				subject_type = daimyo_vassal
			}
			add_opinion = {
				who = ROOT
				modifier = opinion_loyal_daimyo
			}
			hidden_effect = {
				country_event = {
					id = japan.7
					days = 30
					random = 15
				}
			}
		}
	}
	option = {
		name = "japan.6a"
		custom_tooltip = facing_shogunate.tt
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = opinion_disloyal_daimyo
			}
			hidden_effect = {
				country_event = {
					id = japan.8
					days = 30
					random = 15
				}
			}
		}
	}
}
country_event = {
	id = japan.7
	title = "japan.7.t"
	desc = "japan.7.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.7a"
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = opinion_new_shogun
			}
		}
	}
}
country_event = {
	id = japan.8
	title = "japan.8.t"
	desc = "japan.8.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.8a"
		FROM = {
			add_opinion = {
				who = ROOT
				modifier = opinion_enemy_shogun
			}
		}
		every_known_country = {
			limit = {
				culture_group = japanese
				is_subject_of = ROOT
			}
			set_variable = {
				which = max_tries
				value = 4
			}
			while = {
				limit = {
					NOT = {
						has_opinion_modifier = {
							who = FROM
							modifier = aggressive_expansion
							value = -50
						}
					}
					check_variable = {
						which = max_tries
						value = 1
					}
				}
				add_opinion = {
					who = FROM
					modifier = aggressive_expansion
				}
				subtract_variable = {
					which = max_tries
					value = 1
				}
			}
			set_variable = {
				which = max_tries
				value = 0
			}
		}
	}
}
country_event = {
	id = japan.9
	title = "japan.9.t"
	desc = "japan.9.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	option = {
		name = "japan.9a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				has_opinion = {
					who = FROM
					value = 175
				}
			}
		}
		add_opinion = {
			who = FROM
			modifier = opinion_displeased
		}
		FROM = {
			change_variable = {
				which = opposition_to_emperorship
				value = 1
			}
		}
	}
	option = {
		name = "japan.9b"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = {
					has_opinion = {
						who = FROM
						value = 100
					}
				}
			}
		}
		add_opinion = {
			who = FROM
			modifier = opinion_pleased
		}
		FROM = {
			change_variable = {
				which = agreement_to_emperorship
				value = 1
			}
		}
	}
}
country_event = {
	id = japan.10
	title = "japan.10.t"
	desc = "japan.10.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	trigger = {
		has_country_flag = tried_claiming_throne
		NOT = {
			has_country_flag = japan_lost_ambition
		}
	}
	mean_time_to_happen = {
		years = 2
	}
	immediate = {
		hidden_effect = {
			every_subject_country = {
				limit = {
					is_subject_of_type = daimyo_vassal
				}
				PREV = {
					change_variable = {
						which = "number_of_subjects"
						value = 1
					}
				}
			}
		}
	}
	option = {
		name = "japan.10a"
		trigger = {
			OR = {
				variable_arithmetic_trigger = {
					custom_tooltip = "no_need_for_tooltip"
					export_to_variable = {
						variable_name = number_of_subjects_t
						value = num_of_subjects
					}
					change_variable = {
						which = "number_of_subjects_t"
						which = "number_of_subjects"
					}
					divide_variable = {
						which = "number_of_subjects_t"
						value = 2
					}
					check_variable = {
						which = opposition_to_emperorship
						which = number_of_subjects_t
					}
				}
				ai = no
			}
		}
		set_country_flag = japan_lost_ambition
		every_subject_country = {
			remove_opinion = {
				who = ROOT
				modifier = opinion_displeased
			}
			country_event = {
				id = japan.11
				days = 30
				random = 15
			}
		}
	}
	option = {
		name = "japan.10b"
		trigger = {
			OR = {
				variable_arithmetic_trigger = {
					custom_tooltip = "no_need_for_tooltip"
					export_to_variable = {
						variable_name = number_of_subjects_t
						value = num_of_subjects
					}
					change_variable = {
						which = "number_of_subjects_t"
						which = "number_of_subjects"
					}
					divide_variable = {
						which = "number_of_subjects_t"
						value = 2
					}
					check_variable = {
						which = agreement_to_emperorship
						which = number_of_subjects_t
					}
				}
				ai = no
			}
		}
		custom_tooltip = shugo_will_rebel.tt
		every_subject_country = {
			limit = {
				has_opinion_modifier = {
					who = ROOT
					modifier = opinion_displeased
				}
			}
			country_event = {
				id = japan.12
				days = 30
				random = 15
			}
		}
		set_country_flag = daijo_tenno
		clr_country_flag = tried_claiming_throne
	}
	after = {
		set_variable = {
			which = opposition_to_emperorship
			value = 0
		}
		set_variable = {
			which = agreement_to_emperorship
			value = 0
		}
		set_variable = {
			which = number_of_subjects
			value = 0
		}
	}
}
country_event = {
	id = japan.11
	title = "japan.11.t"
	desc = "japan.11.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.11a"
	}
}
country_event = {
	id = japan.12
	title = "japan.12.t"
	desc = "japan.12.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.12a"
		overlord = {
			free_vassal = PREV
		}
		set_country_flag = denounced_overlord
	}
}
country_event = {
	id = japan.13
	title = "japan.13.t"
	desc = "japan.13.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		AND = {
			NOT = {
				calc_true_if = {
					all_country = {
						ai = no
					}
					amount = 2
				}
			}
		}
		has_country_flag = daijo_tenno
		NOT = {
			exists = JAP
		}
	}
	option = {
		name = "japan.13a"
		remove_country_modifier = title_1
		remove_country_modifier = title_2
		remove_country_modifier = title_3
		remove_country_modifier = title_4
		remove_country_modifier = title_5
		add_country_modifier = {
			name = title_6
			duration = -1
		}
		clr_country_flag = title_1
		clr_country_flag = title_2
		clr_country_flag = title_3
		clr_country_flag = title_4
		clr_country_flag = title_5
		clr_country_flag = title_6
		clr_country_flag = daijo_tenno
		add_legitimacy = 15
		add_prestige = 20
		hidden_effect = {
			free_vassal = JAP
		}
		change_tag = JAP
		if = {
			limit = {
				any_owned_province = {
					has_province_modifier = emperors_palace
				}
			}
			event_target:imperial_capital = {
				remove_province_modifier = emperors_palace
			}
			clear_global_event_target = imperial_capital
		}
		every_subject_country = {
			country_event = {
				id = japan.14
				days = 30
				random = 15
			}
		}
	}
}
country_event = {
	id = japan.14
	title = "japan.14.t"
	desc = "japan.14.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.14a"
	}
}
country_event = {
	id = japan.15
	title = "japan.15.t"
	desc = "japan.15.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		NOT = {
			has_global_flag = nanbokucho
		}
		culture_group = japanese
		AND = {
			OR = {
				AND = {
					culture_group = japanese
					has_reform = celestial_empire
				}
				has_reform = daimyo_legacy
				has_reform = shogunate_legacy
				has_reform = indep_daimyo_legacy
			}
		}
		NOT = {
			has_country_flag = centralised_japan
		}
		has_country_modifier = title_5
		any_subject_country = {
			has_country_flag = kyoto_kanrei
		}
		OR = {
			has_regency = yes
			has_consort_regency = yes
			is_female = yes
		}
	}
	option = {
		name = "japan.15a"
		random_subject_country = {
			limit = {
				has_country_flag = kyoto_kanrei
			}
			country_event = {
				id = japan.16
				days = 30
				random = 15
			}
		}
	}
}
country_event = {
	id = japan.16
	title = "japan.16.t"
	desc = "japan.16.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	option = {
		name = "japan.16a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				num_of_cities = 4
			}
			modifier = {
				factor = 2
				num_of_cities = 6
			}
			modifier = {
				factor = 2
				num_of_cities = 10
			}
		}
		FROM = {
			if = {
				limit = {
					OR = {
						has_regency = yes
						has_consort_regency = yes
					}
				}
				add_heir_claim = 100
				custom_tooltip = stability_points_gained_50
				hidden_effect = {
					change_variable = {
						which = stability_points
						value = 50
					}
					country_event = {
						id = POP_Stability.002
					}
				}
			}
			else = {
				add_legitimacy = 100
				custom_tooltip = stability_points_gained_50
				hidden_effect = {
					change_variable = {
						which = stability_points
						value = 50
					}
					country_event = {
						id = POP_Stability.002
					}
				}
			}
		}
	}
	option = {
		name = "japan.16b"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				num_of_cities = 1
			}
			modifier = {
				factor = 2
				num_of_cities = 2
			}
			modifier = {
				factor = 2
				num_of_cities = 3
			}
		}
		FROM = {
			if = {
				limit = {
					OR = {
						has_regency = yes
						has_consort_regency = yes
					}
				}
				exile_heir_as = deposed_shogun
			}
			else = {
				exile_ruler_as = deposed_shogun
			}
		}
		FROM = {
			free_vassal = ROOT
		}
		create_subject = {
			subject_type = daimyo_vassal
			subject = FROM
		}
		every_known_country = {
			limit = {
				is_subject_of_type = daimyo_vassal
				NOT = {
					tag = FROM
				}
				exists = yes
			}
			country_event = {
				id = japan.17
				days = 30
				random = 15
			}
		}
	}
}
country_event = {
	id = japan.17
	title = "japan.17.t"
	desc = "japan.17.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.17a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				has_opinion = {
					who = FROM
					value = 0
				}
			}
			modifier = {
				factor = 5
				has_opinion = {
					who = FROM
					value = 50
				}
			}
			modifier = {
				factor = 10
				has_opinion = {
					who = FROM
					value = 100
				}
			}
		}
		if = {
			limit = {
				is_vassal = FROM
			}
			free_vassal = FROM
		}
		FROM = {
			create_subject = {
				subject_type = daimyo_vassal
				subject = ROOT
			}
		}
	}
	option = {
		name = "japan.17b"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 2
				NOT = {
					has_opinion = {
						who = FROM
						value = 0
					}
				}
			}
			modifier = {
				factor = 5
				NOT = {
					has_opinion = {
						who = FROM
						value = -50
					}
				}
			}
			modifier = {
				factor = 10
				NOT = {
					has_opinion = {
						who = FROM
						value = -100
					}
				}
			}
		}
		overlord = {
			free_vassal = ROOT
		}
		set_global_flag = two_shoguns
		set_country_flag = denounced_overlord
	}
}
country_event = {
	id = japan.18
	title = "japan.18.t"
	desc = "japan.18.d"
	picture = SHOGUNATE_eventPicture
	hidden = yes
	trigger = {
		culture_group = japanese
		has_country_modifier = title_5
		had_global_flag = {
			flag = two_shoguns
			days = 1825
		}
	}
	option = {
		name = "japan.18a"
		if = {
			limit = {
				any_known_country = {
					culture_group = japanese
					NOT = {
						primary_culture = ryukyuan
					}
					is_subject = no
					NOT = {
						tag = ROOT
					}
				}
			}
			set_global_flag = sengoku_jidai
		}
	}
	after = {
		clr_global_flag = two_shoguns
	}
}
country_event = {
	id = japan.19
	title = "japan.19.t"
	desc = "japan.19.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		culture_group = japanese
		has_global_flag = two_shoguns
		FROM = {
			has_country_flag = kyoto_kanrei
		}
	}
	option = {
		name = "japan.19a"
		event_target:japanese_shogun = {
			set_ruler = deposed_shogun
		}
		create_subject = {
			subject_type = daimyo_vassal
			subject = event_target:japanese_shogun
		}
		clr_global_flag = two_shoguns
	}
}
country_event = {
	id = japan.20
	title = "japan.20.t"
	desc = "japan.20.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					num_of_cities = 15
				}
				change_variable = {
					which = emperor_moves_capital
					value = 2
				}
			}
			if = {
				limit = {
					capital_scope = {
						has_province_modifier = preeminent_continent_city
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 3
				}
			}
			else_if = {
				limit = {
					capital_scope = {
						has_province_modifier = preeminent_sub_continent_city
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 2
				}
			}
			else_if = {
				limit = {
					capital_scope = {
						has_province_modifier = preeminent_region_city
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 1
				}
			}
			else = {
				change_variable = {
					which = emperor_moves_capital
					value = -1
				}
			}
			if = {
				limit = {
					capital_scope = {
						has_province_modifier = dominant_center_of_trade
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 2
				}
			}
			else_if = {
				limit = {
					capital_scope = {
						has_province_modifier = major_center_of_trade
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 1
				}
			}
			else = {
				change_variable = {
					which = emperor_moves_capital
					value = -1
				}
			}
			if = {
				limit = {
					capital_scope = {
						has_province_modifier = important_center_of_art
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 2
				}
			}
			else_if = {
				limit = {
					capital_scope = {
						has_province_modifier = median_center_of_art
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 1
				}
			}
			else = {
				change_variable = {
					which = emperor_moves_capital
					value = -1
				}
			}
			if = {
				limit = {
					capital_scope = {
						has_province_modifier = dominant_center_of_production
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 2
				}
			}
			else_if = {
				limit = {
					capital_scope = {
						has_province_modifier = major_center_of_production
					}
				}
				change_variable = {
					which = emperor_moves_capital
					value = 1
				}
			}
			else = {
				change_variable = {
					which = emperor_moves_capital
					value = -1
				}
			}
		}
	}
	option = {
		name = "japan.20a"
		hidden_effect = {
			country_event = {
				id = japan.21
				days = 30
				random = 10
			}
		}
	}
}
country_event = {
	id = japan.21
	title = "japan.21.t"
	desc = {
		trigger = {
			check_variable = {
				which = emperor_moves_capital
				value = 5
			}
			capital_scope = {
				OR = {
					region = west_japan_region
					area = west_kansai_area
					NOT = {
						province_id = 2281
					}
				}
			}
		}
		desc = japan.21.da
	}
	desc = {
		trigger = {
			check_variable = {
				which = emperor_moves_capital
				value = 5
			}
			capital_scope = {
				OR = {
					region = east_japan_region
					area = chubu_area
					province_id = 3958
				}
			}
		}
		desc = japan.21.db
	}
	desc = {
		trigger = {
			check_variable = {
				which = emperor_moves_capital
				value = 5
			}
			capital_scope = {
				OR = {
					province_id = 2280
					province_id = 3959
					province_id = 3973
					province_id = 2281
				}
			}
		}
		desc = japan.21.dc
	}
	desc = {
		trigger = {
			check_variable = {
				which = emperor_moves_capital
				value = 5
			}
			capital_scope = {
				OR = {
					province_id = 2796
					area = hokuriku_area
				}
			}
		}
		desc = japan.21.dd
	}
	desc = {
		trigger = {
			NOT = {
				check_variable = {
					which = emperor_moves_capital
					value = 5
				}
			}
		}
		desc = japan.21.de
	}
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	option = {
		name = "japan.21a"
		trigger = {
			check_variable = {
				which = emperor_moves_capital
				value = 5
			}
		}
		add_legitimacy = 30
		add_prestige = 30
		random_province = {
			limit = {
				has_province_modifier = emperors_palace
			}
			remove_province_modifier = emperors_palace
		}
		clear_global_event_target = imperial_capital
		capital_scope = {
			add_permanent_province_modifier = {
				name = emperors_palace
				duration = -1
			}
			save_global_event_target_as = imperial_capital
			if = {
				limit = {
					owner = {
						NOT = {
							capital = 2283
						}
					}
				}
				if = {
					limit = {
						OR = {
							region = west_japan_region
							area = west_kansai_area
							NOT = {
								province_id = 2281
							}
						}
					}
					rename_capital = "Saikyau"
				}
				if = {
					limit = {
						OR = {
							region = east_japan_region
							area = chubu_area
							province_id = 3958
						}
					}
					rename_capital = "Toukyau"
				}
				if = {
					limit = {
						OR = {
							province_id = 2280
							province_id = 3959
							province_id = 3973
							province_id = 2281
						}
					}
					rename_capital = "Nankyau"
				}
				if = {
					limit = {
						OR = {
							province_id = 2796
							area = hokuriku_area
						}
					}
					rename_capital = "Hokukyau"
				}
			}
		}
	}
	option = {
		name = "japan.21b"
		trigger = {
			NOT = {
				check_variable = {
					which = emperor_moves_capital
					value = 5
				}
			}
		}
		clr_country_flag = inviting_emperor
	}
	after = {
		set_variable = {
			which = emperor_moves_capital
			value = 0
		}
	}
}
country_event = {
	id = japan.24
	title = "japan.24.t"
	desc = "japan.24.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	trigger = {
		OR = {
			AND = {
				tag = AKG
				NOT = {
					dynasty = "Ashikaga"
				}
			}
			AND = {
				tag = AKM
				NOT = {
					dynasty = "Akamatsu"
				}
			}
			AND = {
				tag = AKW
				NOT = {
					dynasty = "Arakawa"
				}
			}
			AND = {
				tag = ANG
				NOT = {
					dynasty = "Amago"
				}
			}
			AND = {
				tag = ANO
				NOT = {
					dynasty = "Andô"
				}
			}
			AND = {
				tag = ASA
				NOT = {
					dynasty = "Asakura"
				}
			}
			AND = {
				tag = CHB
				NOT = {
					dynasty = "Chiba"
				}
			}
			AND = {
				tag = CSK
				NOT = {
					dynasty = "Chôsokabe"
				}
			}
			AND = {
				tag = DTE
				NOT = {
					dynasty = "Date"
				}
			}
			AND = {
				tag = HJO
				NOT = {
					dynasty = "Hôjô"
				}
			}
			AND = {
				tag = HKW
				NOT = {
					dynasty = "Hosokawa"
				}
			}
			AND = {
				tag = HKY
				NOT = {
					dynasty = "Hatakeyama"
				}
			}
			AND = {
				tag = HNM
				NOT = {
					dynasty = "Honma"
				}
			}
			AND = {
				tag = IGW
				NOT = {
					dynasty = "Imagawa"
				}
			}
			AND = {
				tag = INO
				NOT = {
					dynasty = "Inoue"
				}
			}
			AND = {
				tag = ISK
				NOT = {
					dynasty = "Isshiki"
				}
			}
			AND = {
				tag = KKC
				NOT = {
					dynasty = "Kikuchi"
				}
			}
			AND = {
				tag = KKZ
				NOT = {
					dynasty = "Kakizaki"
				}
			}
			AND = {
				tag = KOO
				NOT = {
					dynasty = "Kôno"
				}
			}
			AND = {
				tag = KTK
				NOT = {
					dynasty = "Kitabatake"
				}
			}
			AND = {
				tag = KTO
				NOT = {
					dynasty = "Kotô"
				}
			}
			AND = {
				tag = KWG
				NOT = {
					dynasty = "Kawagoe"
				}
			}
			AND = {
				tag = KYO
				NOT = {
					dynasty = "Kyôgoku"
				}
			}
			AND = {
				tag = MIY
				NOT = {
					dynasty = "Miyoshi"
				}
			}
			AND = {
				tag = MRI
				NOT = {
					dynasty = "Môri"
				}
			}
			AND = {
				tag = NIK
				NOT = {
					dynasty = "Nikki"
				}
			}
			AND = {
				tag = NNB
				NOT = {
					dynasty = "Nanbu"
				}
			}
			AND = {
				tag = ODA
				NOT = {
					dynasty = "Oda"
				}
			}
			AND = {
				tag = OGA
				NOT = {
					dynasty = "Ogasawara"
				}
			}
			AND = {
				tag = OTM
				NOT = {
					dynasty = "Ôtomo"
				}
			}
			AND = {
				tag = OUC
				NOT = {
					dynasty = "Ôuchi"
				}
			}
			AND = {
				tag = RZJ
				NOT = {
					dynasty = "Ryuzôji"
				}
			}
			AND = {
				tag = SBA
				NOT = {
					dynasty = "Shiba"
				}
			}
			AND = {
				tag = SKW
				NOT = {
					dynasty = "Shibukawa"
				}
			}
			AND = {
				tag = SHN
				NOT = {
					dynasty = "Shôni"
				}
			}
			AND = {
				tag = SMZ
				NOT = {
					dynasty = "Shimazu"
				}
			}
			AND = {
				tag = STK
				NOT = {
					dynasty = "Satake"
				}
			}
			AND = {
				tag = SOO
				NOT = {
					dynasty = "Sô"
				}
			}
			AND = {
				tag = STO
				NOT = {
					dynasty = "Saitô"
				}
			}
			AND = {
				tag = SUW
				NOT = {
					dynasty = "Suwa"
				}
			}
			AND = {
				tag = TKD
				NOT = {
					dynasty = "Takeda"
				}
			}
			AND = {
				tag = TGS
				NOT = {
					dynasty = "Togashi"
				}
			}
			AND = {
				tag = TGW
				NOT = {
					dynasty = "Tokugawa"
				}
			}
			AND = {
				tag = TKI
				NOT = {
					dynasty = "Toki"
				}
			}
			AND = {
				tag = UKI
				NOT = {
					dynasty = "Ukita"
				}
			}
			AND = {
				tag = USG
				NOT = {
					dynasty = "Uesugi"
				}
			}
			AND = {
				tag = UTN
				NOT = {
					dynasty = "Utsunomiya"
				}
			}
			AND = {
				tag = YSM
				NOT = {
					dynasty = "Yoshimi"
				}
			}
			AND = {
				tag = YMN
				NOT = {
					dynasty = "Yamana"
				}
			}
			AND = {
				tag = YUK
				NOT = {
					dynasty = "Yûki"
				}
			}
		}
	}
	option = {
		name = "japan.24a"
		hidden_effect = {
			trigger_switch = {
				on_trigger = tag
				AKG = {
					set_dynasty = "Ashikaga"
				}
				AKM = {
					set_dynasty = "Akamatsu"
				}
				AKW = {
					set_dynasty = "Arakawa"
				}
				ANG = {
					set_dynasty = "Amago"
				}
				ANO = {
					set_dynasty = "Andô"
				}
				ASA = {
					set_dynasty = "Asakura"
				}
				CHB = {
					set_dynasty = "Chiba"
				}
				CSK = {
					set_dynasty = "Chôsokabe"
				}
				DTE = {
					set_dynasty = "Date"
				}
				HJO = {
					set_dynasty = "Hôjô"
				}
				HKW = {
					set_dynasty = "Hosokawa"
				}
				HKY = {
					set_dynasty = "Hatakeyama"
				}
				HNM = {
					set_dynasty = "Honma"
				}
				IGW = {
					set_dynasty = "Imagawa"
				}
				INO = {
					set_dynasty = "Inoue"
				}
				ISK = {
					set_dynasty = "Isshiki"
				}
				KKC = {
					set_dynasty = "Kikuchi"
				}
				KKZ = {
					set_dynasty = "Kakizaki"
				}
				KOO = {
					set_dynasty = "Kôno"
				}
				KTK = {
					set_dynasty = "Kitabatake"
				}
				KTO = {
					set_dynasty = "Kotô"
				}
				KWG = {
					set_dynasty = "Kawagoe"
				}
				KYO = {
					set_dynasty = "Kyôgoku"
				}
				MIY = {
					set_dynasty = "Miyoshi"
				}
				MRI = {
					set_dynasty = "Môri"
				}
				NIK = {
					set_dynasty = "Nikki"
				}
				NNB = {
					set_dynasty = "Nanbu"
				}
				ODA = {
					set_dynasty = "Oda"
				}
				OGA = {
					set_dynasty = "Ogasawara"
				}
				OTM = {
					set_dynasty = "Ôtomo"
				}
				OUC = {
					set_dynasty = "Ôuchi"
				}
				RZJ = {
					set_dynasty = "Ryuzôji"
				}
				SBA = {
					set_dynasty = "Shiba"
				}
				SKW = {
					set_dynasty = "Shibukawa"
				}
				SHN = {
					set_dynasty = "Shôni"
				}
				SMZ = {
					set_dynasty = "Shimazu"
				}
				STK = {
					set_dynasty = "Satake"
				}
				SOO = {
					set_dynasty = "Sô"
				}
				STO = {
					set_dynasty = "Saitô"
				}
				SUW = {
					set_dynasty = "Suwa"
				}
				TKD = {
					set_dynasty = "Takeda"
				}
				TGS = {
					set_dynasty = "Togashi"
				}
				TGW = {
					set_dynasty = "Tokugawa"
				}
				TKI = {
					set_dynasty = "Toki"
				}
				UKI = {
					set_dynasty = "Ukita"
				}
				USG = {
					set_dynasty = "Uesugi"
				}
				UTN = {
					set_dynasty = "Utsunomiya"
				}
				YSM = {
					set_dynasty = "Yoshimi"
				}
				YMN = {
					set_dynasty = "Yamana"
				}
				YUK = {
					set_dynasty = "Yûki"
				}
			}
		}
	}
}
country_event = {
	id = japan.25
	title = "japan.25.t"
	desc = "japan.25.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	trigger = {
		NOT = {
			has_global_flag = two_shoguns
		}
		has_country_flag = kyoto_kanrei
		any_known_country = {
			has_country_flag = kanrei_appointement
			NOT = {
				tag = ROOT
			}
		}
	}
	option = {
		name = "japan.30a"
		clr_country_flag = kyoto_kanrei
		if = {
			limit = {
				NOT = {
					has_country_flag = kyushu_tandai
					has_country_flag = chugoku_tandai
					has_country_flag = shikoku_tandai
					has_country_flag = uo_tandai
				}
			}
			remove_country_modifier = title_1
			remove_country_modifier = title_3
			remove_country_modifier = title_4
			remove_country_modifier = title_5
			remove_country_modifier = title_6
			add_country_modifier = {
				name = title_2
				duration = -1
			}
			clr_country_flag = title_1
			clr_country_flag = title_2
			clr_country_flag = title_3
			clr_country_flag = title_4
			clr_country_flag = title_5
			clr_country_flag = title_6
		}
		hidden_effect = {
			random_known_country = {
				limit = {
					has_country_flag = kanrei_appointement
				}
				country_event = {
					id = japan.26
					days = 30
					random = 10
				}
			}
		}
	}
}
country_event = {
	id = japan.26
	title = "japan.26.t"
	desc = "japan.26.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	option = {
		name = "japan.26a"
		set_country_flag = kyoto_kanrei
		if = {
			limit = {
				NOT = {
					has_country_modifier = title_3
				}
			}
			remove_country_modifier = title_1
			remove_country_modifier = title_2
			remove_country_modifier = title_4
			remove_country_modifier = title_5
			remove_country_modifier = title_6
			add_country_modifier = {
				name = title_3
				duration = -1
			}
			clr_country_flag = title_1
			clr_country_flag = title_2
			clr_country_flag = title_3
			clr_country_flag = title_4
			clr_country_flag = title_5
			clr_country_flag = title_6
			set_country_flag = title_3
		}
		add_legitimacy = 10
		hidden_effect = {
			overlord = {
				country_event = {
					id = japan.27
					days = 30
					random = 10
				}
				every_subject_country = {
					country_event = {
						id = japan.27
						days = 30
						random = 10
					}
				}
			}
		}
	}
}
country_event = {
	id = japan.27
	title = "japan.27.t"
	desc = {
		trigger = {
			overlord_of = FROM
		}
		desc = japan.27.da
	}
	desc = {
		trigger = {
			is_subject = yes
		}
		desc = japan.27.db
	}
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.27a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				army_strength = {
					who = FROM
					value = 2
				}
			}
		}
	}
	option = {
		name = "japan.27b"
		trigger = {
			has_country_flag = kanrei_appointement
		}
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = {
					army_strength = {
						who = FROM
						value = 2
					}
				}
			}
		}
		add_casus_belli = {
			target = FROM
			months = 24
			type = cb_japanese_civil_war
		}
	}
}
country_event = {
	id = japan.28
	title = "japan.28.t"
	desc = "japan.28.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	trigger = {
		FROM = {
			has_country_flag = kyoto_kanrei
		}
		has_country_flag = kanrei_appointement
	}
	option = {
		name = "japan.28a"
		set_country_flag = kyoto_kanrei
		if = {
			limit = {
				NOT = {
					has_country_modifier = title_3
				}
			}
			remove_country_modifier = title_1
			remove_country_modifier = title_2
			remove_country_modifier = title_4
			remove_country_modifier = title_5
			remove_country_modifier = title_6
			add_country_modifier = {
				name = title_3
				duration = -1
			}
			clr_country_flag = title_1
			clr_country_flag = title_2
			clr_country_flag = title_3
			clr_country_flag = title_4
			clr_country_flag = title_5
			clr_country_flag = title_6
			set_country_flag = title_3
		}
		FROM = {
			clr_country_flag = kyoto_kanrei
			clr_country_flag = kanrei_appointement
			if = {
				limit = {
					NOT = {
						has_country_flag = kyushu_tandai
						has_country_flag = chugoku_tandai
						has_country_flag = shikoku_tandai
						has_country_flag = uo_tandai
					}
				}
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
		}
		overlord = {
			country_event = {
				id = japan.29
				days = 30
				random = 10
			}
			every_subject_country = {
				country_event = {
					id = japan.29
					days = 30
					random = 10
				}
			}
		}
	}
}
country_event = {
	id = japan.29
	title = "japan.29.t"
	desc = {
		trigger = {
			overlord_of = FROM
		}
		desc = japan.29.da
	}
	desc = {
		trigger = {
			is_subject = yes
		}
		desc = japan.29.db
	}
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.29a"
		if = {
			limit = {
				is_subject = yes
			}
			add_liberty_desire = 100
		}
		set_global_flag = sengoku_jidai
	}
}
country_event = {
	id = japan.30
	title = "japan.30.t"
	desc = "japan.30.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	option = {
		name = "japan.30a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				army_strength = {
					who = FROM
					value = 2
				}
			}
		}
		FROM = {
			country_event = {
				id = japan.31
				days = 30
				random = 15
			}
		}
	}
	option = {
		name = "japan.30a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = {
					army_strength = {
						who = FROM
						value = 2
					}
				}
			}
		}
		overlord = {
			country_event = {
				id = japan.32
				days = 30
				random = 15
			}
			free_vassal = PREV
		}
	}
}
country_event = {
	id = japan.31
	title = "japan.31.t"
	desc = "japan.31.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.37a"
		inherit = FROM
	}
}
country_event = {
	id = japan.32
	title = "japan.32.t"
	desc = "japan.32.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.37a"
	}
}
country_event = {
	id = japan.35
	title = "japan.35.t"
	desc = "japan.35.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.35a"
		FROM = {
			every_owned_province = {
				add_claim = ROOT
			}
		}
	}
}
country_event = {
	id = japan.36
	title = "japan.36.t"
	desc = "japan.36.d"
	picture = SHOGUNATE_eventPicture
	major = yes
	is_triggered_only = yes
	option = {
		name = "japan.30a"
		ai_chance = {
			factor = 50
			modifier = {
				factor = 0
				NOT = {
					army_strength = {
						who = FROM
						value = 2
					}
				}
			}
		}
		overlord = {
			free_vassal = ROOT
			country_event = {
				id = japan.38
				days = 30
				random = 15
			}
		}
	}
}
country_event = {
	id = japan.38
	title = "japan.38.t"
	desc = "japan.38.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.38a"
	}
}
country_event = {
	id = japan.40
	title = "japan.40.t"
	desc = {
		trigger = {
			has_country_flag = meitoku_treaty
			NOT = {
				has_global_flag = nanbokucho
			}
			NOT = {
				has_global_flag = sengoku_jidai
			}
			NOT = {
				has_global_flag = two_shoguns
			}
		}
		desc = japan.40.da
	}
	desc = {
		trigger = {
			NOT = {
				has_country_flag = meitoku_treaty
			}
		}
		desc = japan.40.db
	}
	picture = SHOGUNATE_eventPicture
	trigger = {
		NOT = {
			exists = JAP
		}
		any_owned_province = {
			has_province_modifier = emperors_palace
		}
	}
	mean_time_to_happen = {
		years = 30
	}
	option = {
		name = "japan.40a"
		trigger = {
			NOT = {
				has_country_flag = meitoku_treaty
			}
		}
		every_known_country = {
			limit = {
				culture_group = japanese
				NOT = {
					tag = ROOT
				}
				ai = no
			}
			country_event = {
				id = japan.41
				days = 30
				random = 15
			}
		}
	}
	option = {
		name = "japan.40b"
		trigger = {
			has_country_flag = meitoku_treaty
			NOT = {
				has_global_flag = nanbokucho
			}
			NOT = {
				has_global_flag = sengoku_jidai
			}
			NOT = {
				has_global_flag = two_shoguns
			}
		}
		clr_country_flag = meitoku_treaty
		3973 = {
			cede_province = JAP
		}
		JAP = {
			define_ruler = {
				dynasty = "Yamato"
			}
			every_neighbor_country = {
				add_truce_with = PREV
			}
			if = {
				limit = {
					is_subject = yes
				}
				overlord = {
					free_vassal = ROOT
				}
			}
		}
		set_global_flag = nanbokucho
		every_known_country = {
			limit = {
				is_subject_of_type = daimyo_vassal
				NOT = {
					tag = ROOT
				}
				ai = no
			}
			country_event = {
				id = japan.42
				days = 30
				random = 15
			}
		}
	}
	option = {
		name = "japan.40c"
		trigger = {
			has_country_flag = meitoku_treaty
			NOT = {
				has_global_flag = nanbokucho
			}
			NOT = {
				has_global_flag = sengoku_jidai
			}
			NOT = {
				has_global_flag = two_shoguns
			}
		}
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = japan.41
	title = "japan.41.t"
	desc = "japan.41.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.41a"
	}
}
country_event = {
	id = japan.42
	title = "japan.42.t"
	desc = "japan.42.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.42a"
	}
	option = {
		name = "japan.42b"
	}
}
country_event = {
	id = japan.43
	title = "japan.43.t"
	desc = "japan.43.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.43a"
		add_liberty_desire = 20
		add_opinion = {
			who = FROM
			modifier = opinion_limiting_power
		}
	}
}
province_event = {
	id = japan.44
	title = "japan.44.t"
	desc = "japan.44.d"
	picture = SHOGUNATE_eventPicture
	trigger = {
		owner = {
			NOT = {
				has_country_flag = kami
			}
			OR = {
				is_subject_of_type = daimyo_vassal
				is_subject_of_type = centralised_daimyo_vassal
			}
			overlord = {
				has_country_flag = limiting_shugo_power
			}
		}
		NOT = {
			has_province_modifier = martial_law
		}
		local_autonomy = 100
	}
	mean_time_to_happen = {
		years = 1
	}
	option = {
		name = "japan.44a"
		set_province_flag = imperial_edict_target
		add_core = JAP
		owner = {
			every_known_country = {
				limit = {
					OR = {
						tag = JAP
						has_country_flag = kami
					}
				}
				add_casus_belli = {
					target = owner
					months = 24
					type = cb_japanese_pacify
				}
			}
		}
		ai_chance = {
			factor = 50
		}
	}
	option = {
		name = "japan.44b"
		remove_province_modifier = has_shugo_ce
		if = {
			limit = {
				OR = {
					AND = {
						continent = east_asia
						OR = {
							region = west_japan_region
							region = east_japan_region
							region = central_japan_region
						}
					}
					is_core = owner
				}
			}
			add_core = JAP
		}
		remove_core = owner
		cede_province = JAP
		ai_chance = {
			factor = 50
		}
	}
}
country_event = {
	id = japan.60
	title = "japan.60.t"
	desc = "japan.60.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	immediate = {
		2299 = {
			add_core = KKZ
			cede_province = KKZ
		}
		KKZ = {
			set_dynasty = "Kakizaki"
		}
		if = {
			limit = {
				overlord = {
					has_country_flag = centralised_japan
				}
			}
			overlord = {
				create_subject = {
					subject_type = centralised_daimyo_vassal
					subject = KKZ
				}
			}
		}
		else = {
			overlord = {
				create_subject = {
					subject_type = daimyo_vassal
					subject = KKZ
				}
			}
		}
	}
	option = {
		name = "japan.60a"
	}
	option = {
		name = "japan.60a"
		trigger = {
			ai = no
		}
		switch_tag = KKZ
	}
}
country_event = {
	id = japan.61
	title = "japan.61.t"
	desc = "japan.61.d"
	picture = SHOGUNATE_eventPicture
	fire_only_once = yes
	trigger = {
		owns = 2297
		2299 = {
			is_empty = yes
		}
		exists = KKZ
	}
	mean_time_to_happen = {
		years = 5
	}
	immediate = {
		2299 = {
			save_event_target_as = daimyo_province
		}
		hidden_effect = {
			set_variable = {
				which = daimyo_ticker
				value = 50
			}
		}
		while = {
			limit = {
				check_variable = {
					which = daimyo_ticker
					value = 1
				}
			}
			subtract_variable = {
				which = daimyo_ticker
				value = 1
			}
			random_list = {
				1 = {
					if = {
						limit = {
							AKG = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = AKG
						}
						AKG = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = AKG
							create_subject = {
								who = AKG
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							AKM = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = AKM
						}
						AKM = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = AKM
							create_subject = {
								who = AKM
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							AKW = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = AKW
						}
						AKW = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = AKW
							create_subject = {
								who = AKW
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							ANG = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = ANG
						}
						ANG = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = ANG
							create_subject = {
								who = ANG
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							ANO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = ANO
						}
						ANO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = ANO
							create_subject = {
								who = ANO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							ASA = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = ASA
						}
						ASA = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = ASA
							create_subject = {
								who = ASA
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							CHB = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = CHB
						}
						CHB = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = CHB
							create_subject = {
								who = CHB
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							CSK = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = CSK
						}
						CSK = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = CSK
							create_subject = {
								who = CSK
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							DTE = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = DTE
						}
						DTE = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = DTE
							create_subject = {
								who = DTE
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							HJO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = HJO
						}
						HJO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = HJO
							create_subject = {
								who = HJO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							HKW = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = HKW
						}
						HKW = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = HKW
							create_subject = {
								who = HKW
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							HKY = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = HKY
						}
						HKY = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = HKY
							create_subject = {
								who = HKY
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							HNM = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = HNM
						}
						HNM = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = HNM
							create_subject = {
								who = HNM
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							IGW = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = IGW
						}
						IGW = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = IGW
							create_subject = {
								who = IGW
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							INO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = INO
						}
						INO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = INO
							create_subject = {
								who = INO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							ISK = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = ISK
						}
						ISK = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = ISK
							create_subject = {
								who = ISK
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							KKC = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = KKC
						}
						KKC = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = KKC
							create_subject = {
								who = KKC
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							KKZ = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = KKZ
						}
						KKZ = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = KKZ
							create_subject = {
								who = KKZ
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							KOO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = KOO
						}
						KOO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = KOO
							create_subject = {
								who = KOO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							KTK = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = KTK
						}
						KTK = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = KTK
							create_subject = {
								who = KTK
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							KTO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = KTO
						}
						KTO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = KTO
							create_subject = {
								who = KTO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							KWG = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = KWG
						}
						KWG = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = KWG
							create_subject = {
								who = KWG
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							KYO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = KYO
						}
						KYO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = KYO
							create_subject = {
								who = KYO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							MIY = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = MIY
						}
						MIY = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = MIY
							create_subject = {
								who = MIY
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							MRI = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = MRI
						}
						MRI = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = MRI
							create_subject = {
								who = MRI
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							NIK = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = NIK
						}
						NIK = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = NIK
							create_subject = {
								who = NIK
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							NNB = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = NNB
						}
						NNB = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = NNB
							create_subject = {
								who = NNB
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							ODA = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = ODA
						}
						ODA = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = ODA
							create_subject = {
								who = ODA
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							OGA = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = OGA
						}
						OGA = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = OGA
							create_subject = {
								who = OGA
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							OTM = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = OTM
						}
						OTM = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = OTM
							create_subject = {
								who = OTM
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							OUC = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = OUC
						}
						OUC = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = OUC
							create_subject = {
								who = OUC
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							RZJ = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = RZJ
						}
						RZJ = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = RZJ
							create_subject = {
								who = RZJ
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							SBA = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = SBA
						}
						SBA = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = SBA
							create_subject = {
								who = SBA
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							SKW = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = SKW
						}
						SKW = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = SKW
							create_subject = {
								who = SKW
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							SHN = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = SHN
						}
						SHN = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = SHN
							create_subject = {
								who = SHN
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							SMZ = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = SMZ
						}
						SMZ = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = SMZ
							create_subject = {
								who = SMZ
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							STK = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = STK
						}
						STK = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = STK
							create_subject = {
								who = STK
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							SOO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = SOO
						}
						SOO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = SOO
							create_subject = {
								who = SOO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							STO = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = STO
						}
						STO = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = STO
							create_subject = {
								who = STO
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							SUW = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = SUW
						}
						SUW = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = SUW
							create_subject = {
								who = SUW
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							TKD = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = TKD
						}
						TKD = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = TKD
							create_subject = {
								who = TKD
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							TGS = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = TGS
						}
						TGS = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = TGS
							create_subject = {
								who = TGS
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							TGW = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = TGW
						}
						TGW = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = TGW
							create_subject = {
								who = TGW
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							TKI = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = TKI
						}
						TKI = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = TKI
							create_subject = {
								who = TKI
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							UKI = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = UKI
						}
						UKI = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = UKI
							create_subject = {
								who = UKI
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							USG = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = USG
						}
						USG = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = USG
							create_subject = {
								who = USG
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							UTN = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = UTN
						}
						UTN = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = UTN
							create_subject = {
								who = UTN
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							YSM = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = YSM
						}
						YSM = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = YSM
							create_subject = {
								who = YSM
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							YMN = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = YMN
						}
						YMN = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = YMN
							create_subject = {
								who = YMN
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
				1 = {
					if = {
						limit = {
							YUK = {
								exists = no
							}
						}
						japan_superregion = {
							remove_core = YUK
						}
						YUK = {
							add_core = event_target:daimyo_province
						}
						ROOT = {
							release = YUK
							create_subject = {
								who = YUK
								subject_type = daimyo_vassal
							}
						}
						set_variable = {
							which = daimyo_ticker
							value = 0
						}
					}
				}
			}
		}
	}
	option = {
		name = "japan.60a"
	}
}
country_event = {
	id = japan.70
	title = "japan.70.t"
	desc = "japan.70.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.70a"
		trigger = {
			1012 = {
				is_empty = yes
			}
		}
		1012 = {
			save_event_target_as = ryukyu_target
		}
		custom_tooltip = ryukyu_selecting_target1.tt
		hidden_effect = {
			country_event = {
				id = japan.71
			}
		}
	}
	option = {
		name = "japan.70b"
		trigger = {
			1014 = {
				is_empty = yes
			}
		}
		1014 = {
			save_event_target_as = ryukyu_target
		}
		custom_tooltip = ryukyu_selecting_target2.tt
		hidden_effect = {
			country_event = {
				id = japan.71
			}
		}
	}
	option = {
		name = "japan.70c"
		clr_global_flag = subjugating_ryukyu
		add_adm_power = 200
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = japan.71
	title = "japan.71.t"
	desc = "japan.71.d"
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					1014 = {
						is_empty = yes
					}
				}
				1014 = {
					save_event_target_as = ryukyu_target
				}
			}
			else = {
				1012 = {
					save_event_target_as = ryukyu_target
				}
			}
			set_variable = {
				which = nobles_loyalty_removed_a
				value = 5
			}
			set_variable = {
				which = burghers_loyalty_added_a
				value = 5
			}
		}
	}
	option = {
		name = "japan.71a"
		trigger = {
			mil_power = 200
		}
		custom_tooltip = ryukyu_military.tt
		add_yearly_manpower = -2.0
		add_mil_power = -200
		set_country_flag = ryukyu_military
		hidden_effect = {
			random_list = {
				10 = {
					country_event = {
						id = japan.72
						days = 30
						random = 10
					}
					set_country_flag = very_succesful_subjugation
				}
				20 = {
					country_event = {
						id = japan.72
						days = 60
						random = 20
					}
					set_country_flag = succesful_subjugation
				}
				20 = {
					country_event = {
						id = japan.72
						days = 90
						random = 30
					}
					set_country_flag = pyrrhic_subjugation
				}
				25 = {
					country_event = {
						id = japan.72
						days = 60
						random = 20
					}
					set_country_flag = failed_subjugation
				}
				25 = {
					country_event = {
						id = japan.72
						days = 30
						random = 10
					}
					set_country_flag = horribly_failed_subjugation
				}
			}
		}
	}
	option = {
		name = "japan.71b"
		trigger = {
			dip_power = 200
		}
		custom_tooltip = ryukyu_diplomatic.tt
		if = {
			limit = {
				check_variable = {
					which = estate_greater_nobles_weight_share
					value = 0.03
				}
			}
			custom_tooltip = t_estate_greater_nobles_loyalty_removed_a
			hidden_effect = {
				set_variable = {
					which = greater_nobles_loyalty_removed
					value = 0
				}
				set_variable = {
					which = greater_nobles_loyalty_removed
					which = nobles_loyalty_removed_a
				}
				if = {
					limit = {
						check_variable = {
							which = greater_nobles_loyalty_removed
							value = 64
						}
					}
					add_estate_loyalty = {
						estate = estate_greater_nobles
						loyalty = -64
					}
					change_variable = {
						which = estate_greater_nobles_loyalty
						value = -0.64
					}
					subtract_variable = {
						which = greater_nobles_loyalty_removed
						value = 64
					}
				}
				if = {
					limit = {
						check_variable = {
							which = greater_nobles_loyalty_removed
							value = 32
						}
					}
					add_estate_loyalty = {
						estate = estate_greater_nobles
						loyalty = -32
					}
					change_variable = {
						which = estate_greater_nobles_loyalty
						value = -0.32
					}
					subtract_variable = {
						which = greater_nobles_loyalty_removed
						value = 32
					}
				}
				if = {
					limit = {
						check_variable = {
							which = greater_nobles_loyalty_removed
							value = 16
						}
					}
					add_estate_loyalty = {
						estate = estate_greater_nobles
						loyalty = -16
					}
					change_variable = {
						which = estate_greater_nobles_loyalty
						value = -0.16
					}
					subtract_variable = {
						which = greater_nobles_loyalty_removed
						value = 16
					}
				}
				if = {
					limit = {
						check_variable = {
							which = greater_nobles_loyalty_removed
							value = 8
						}
					}
					add_estate_loyalty = {
						estate = estate_greater_nobles
						loyalty = -8
					}
					change_variable = {
						which = estate_greater_nobles_loyalty
						value = -0.08
					}
					subtract_variable = {
						which = greater_nobles_loyalty_removed
						value = 8
					}
				}
				if = {
					limit = {
						check_variable = {
							which = greater_nobles_loyalty_removed
							value = 4
						}
					}
					add_estate_loyalty = {
						estate = estate_greater_nobles
						loyalty = -4
					}
					change_variable = {
						which = estate_greater_nobles_loyalty
						value = -0.04
					}
					subtract_variable = {
						which = greater_nobles_loyalty_removed
						value = 4
					}
				}
				if = {
					limit = {
						check_variable = {
							which = greater_nobles_loyalty_removed
							value = 2
						}
					}
					add_estate_loyalty = {
						estate = estate_greater_nobles
						loyalty = -2
					}
					change_variable = {
						which = estate_greater_nobles_loyalty
						value = -0.02
					}
					subtract_variable = {
						which = greater_nobles_loyalty_removed
						value = 2
					}
				}
				if = {
					limit = {
						check_variable = {
							which = greater_nobles_loyalty_removed
							value = 1
						}
					}
					add_estate_loyalty = {
						estate = estate_greater_nobles
						loyalty = -1
					}
					change_variable = {
						which = estate_greater_nobles_loyalty
						value = -0.01
					}
					subtract_variable = {
						which = greater_nobles_loyalty_removed
						value = 1
					}
				}
				if = {
					limit = {
						NOT = {
							check_variable = {
								which = estate_greater_nobles_loyalty
								value = 0.01
							}
						}
					}
					set_variable = {
						which = estate_greater_nobles_loyalty
						value = 0.01
					}
				}
				every_owned_province = {
					limit = {
						has_province_flag = greater_nobles_control_province
					}
					hidden_effect = {
						set_variable = {
							which = estate_greater_nobles_loyalty
							which = owner
						}
						set_variable = {
							which = EstateProv_UnrestSave
							which = EstateProv_Unrest
						}
						set_variable = {
							which = EstateProv_Unrest
							which = estate_greater_nobles_loyalty
						}
						set_variable = {
							which = estate_greater_nobles_loyalty
							value = 0
						}
						if = {
							limit = {
								check_variable = {
									which = EstateProv_Unrest
									value = 0.6
								}
							}
							set_province_flag = loss
							subtract_variable = {
								which = EstateProv_Unrest
								value = 0.6
							}
						}
						else_if = {
							limit = {
								NOT = {
									check_variable = {
										which = EstateProv_Unrest
										value = 0.401
									}
								}
							}
							set_province_flag = gain
							subtract_variable = {
								which = EstateProv_Unrest
								value = 0.4
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = -1
							}
						}
						else = {
							set_variable = {
								which = EstateProv_Unrest
								value = 0
							}
						}
						multiply_variable = {
							which = EstateProv_Unrest
							value = 16.62
						}
						set_variable = {
							which = inp_m_exp
							which = EstateProv_Unrest
						}
						if = {
							limit = {
								NOT = {
									check_variable = {
										which = inp_m_exp
										value = 0
									}
								}
							}
							set_variable = {
								which = exp_val
								value = 0
							}
							change_variable = {
								which = err.math.exp.undef
								value = 1
							}
						}
						else_if = {
							limit = {
								is_variable_equal = {
									which = inp_m_exp
									value = 0
								}
							}
							set_variable = {
								which = exp_val
								value = 0
							}
						}
						else = {
							set_variable = {
								which = exp_m_exp
								value = 1.7
							}
							set_variable = {
								which = int_m_exp
								which = exp_m_exp
							}
							multiply_variable = {
								which = int_m_exp
								value = 0.001
							}
							multiply_variable = {
								which = int_m_exp
								value = 1000
							}
							set_variable = {
								which = dec_m_exp
								which = exp_m_exp
							}
							subtract_variable = {
								which = dec_m_exp
								which = int_m_exp
							}
							set_variable = {
								which = inp
								which = inp_m_exp
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = inp
											value = 0.001
										}
									}
								}
								set_variable = {
									which = ln_val
									value = 0
								}
								change_variable = {
									which = err.math.ln.undef
									value = 1
								}
							}
							else = {
								set_variable = {
									which = ln_val
									value = 0
								}
								set_variable = {
									which = scale
									value = 10000
								}
								set_variable = {
									which = k
									value = 0
								}
								set_variable = {
									which = k_div
									which = scale
								}
								while = {
									limit = {
										check_variable = {
											which = inp
											value = 2.001
										}
									}
									multiply_variable = {
										which = inp
										value = 0.5
									}
									change_variable = {
										which = ln_val
										value = 6931.472
									}
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = inp
												value = 1
											}
										}
									}
									multiply_variable = {
										which = inp
										value = 2
									}
									subtract_variable = {
										which = ln_val
										value = 6931.472
									}
								}
								multiply_variable = {
									which = inp
									which = scale
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = k
												value = 10
											}
										}
									}
									change_variable = {
										which = k
										value = 1
									}
									multiply_variable = {
										which = k_div
										value = 0.5
									}
									set_variable = {
										which = t_m_ln
										which = scale
									}
									change_variable = {
										which = t_m_ln
										which = k_div
									}
									if = {
										limit = {
											check_variable = {
												which = inp
												which = t_m_ln
											}
										}
										divide_variable = {
											which = inp
											which = t_m_ln
										}
										multiply_variable = {
											which = inp
											which = scale
										}
										set_variable = {
											which = lt_ind
											which = k
										}
										if = {
											limit = {
												check_variable = {
													which = lt_ind
													value = 6
												}
											}
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 8
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 9
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 10
															}
														}
														set_variable = {
															which = lt_val
															value = 9.761
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 7
														}
													}
													set_variable = {
														which = lt_val
														value = 77.821
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 3
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 4
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 5
															}
														}
														set_variable = {
															which = lt_val
															value = 307.717
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 2
														}
													}
													set_variable = {
														which = lt_val
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 4054.651
													}
												}
											}
										}
										set_variable = {
											which = lt_ind
											value = 0
										}
										change_variable = {
											which = ln_val
											which = lt_val
										}
									}
									set_variable = {
										which = t_m_ln
										value = 0
									}
								}
								divide_variable = {
									which = ln_val
									value = 10000
								}
								set_variable = {
									which = scale
									value = 0
								}
								set_variable = {
									which = k
									value = 0
								}
								set_variable = {
									which = k_div
									value = 0
								}
								set_variable = {
									which = lt_val
									value = 0
								}
							}
							set_variable = {
								which = inp
								value = 0
							}
							multiply_variable = {
								which = dec_m_exp
								which = ln_val
							}
							set_variable = {
								which = math.e.expnt
								which = dec_m_exp
							}
							set_variable = {
								which = math.e.return
								value = 1
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = math.e.expnt
											value = -6.999
										}
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
							}
							else = {
								while = {
									limit = {
										check_variable = {
											which = math.e.expnt
											value = 1
										}
									}
									subtract_variable = {
										which = math.e.expnt
										value = 1
									}
									multiply_variable = {
										which = math.e.return
										value = 2.718
									}
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = math.e.expnt
												value = 0
											}
										}
									}
									change_variable = {
										which = math.e.expnt
										value = 1
									}
									divide_variable = {
										which = math.e.return
										value = 2.718
									}
								}
								set_variable = {
									which = math.e.sm
									value = 1
								}
								if = {
									limit = {
										NOT = {
											is_variable_equal = {
												which = math.e.expnt
												value = 0
											}
										}
									}
									set_variable = {
										which = math.e.sq
										which = math.e.expnt
									}
									multiply_variable = {
										which = math.e.sq
										which = math.e.expnt
									}
									set_variable = {
										which = math.e.fct
										value = 2
									}
									set_variable = {
										which = math.e.fctl
										value = 2
									}
									set_variable = {
										which = math.e.a1
										which = math.e.sq
									}
									set_variable = {
										which = math.e.a2
										which = math.e.expnt
									}
									set_variable = {
										which = math.e.a3
										value = 2
									}
									set_variable = {
										which = math.e.tmp
										which = math.e.a2
									}
									multiply_variable = {
										which = math.e.tmp
										which = math.e.a3
									}
									change_variable = {
										which = math.e.tmp
										which = math.e.a1
									}
									divide_variable = {
										which = math.e.tmp
										which = math.e.fct
									}
									change_variable = {
										which = math.e.sm
										which = math.e.tmp
									}
									set_variable = {
										which = math.e.prec
										value = 3
									}
									subtract_variable = {
										which = math.e.prec
										value = 1
									}
									while = {
										limit = {
											check_variable = {
												which = math.e.prec
												value = 1
											}
										}
										subtract_variable = {
											which = math.e.prec
											value = 1
										}
										change_variable = {
											which = math.e.fctl
											value = 1
										}
										multiply_variable = {
											which = math.e.fct
											which = math.e.fctl
										}
										change_variable = {
											which = math.e.fctl
											value = 1
										}
										multiply_variable = {
											which = math.e.fct
											which = math.e.fctl
										}
										multiply_variable = {
											which = math.e.a1
											which = math.e.sq
										}
										multiply_variable = {
											which = math.e.a2
											which = math.e.sq
										}
										change_variable = {
											which = math.e.a3
											value = 2
										}
										set_variable = {
											which = math.e.tmp
											which = math.e.a2
										}
										multiply_variable = {
											which = math.e.tmp
											which = math.e.a3
										}
										change_variable = {
											which = math.e.tmp
											which = math.e.a1
										}
										divide_variable = {
											which = math.e.tmp
											which = math.e.fct
										}
										change_variable = {
											which = math.e.sm
											which = math.e.tmp
										}
									}
								}
								multiply_variable = {
									which = math.e.return
									which = math.e.sm
								}
								set_variable = {
									which = exp_val
									which = math.e.return
								}
								set_variable = {
									which = math.e.sm
									value = 0
								}
								set_variable = {
									which = math.e.tmp
									value = 0
								}
								set_variable = {
									which = math.e.a1
									value = 0
								}
								set_variable = {
									which = math.e.a2
									value = 0
								}
								set_variable = {
									which = math.e.a3
									value = 0
								}
								set_variable = {
									which = math.e.fctl
									value = 0
								}
								set_variable = {
									which = math.e.fct
									value = 0
								}
								set_variable = {
									which = math.e.prec
									value = 0
								}
								set_variable = {
									which = math.e.sq
									value = 0
								}
							}
							set_variable = {
								which = math.e.expnt
								value = 0
							}
							set_variable = {
								which = math.e.return
								value = 0
							}
							while = {
								limit = {
									check_variable = {
										which = int_m_exp
										value = 1
									}
								}
								subtract_variable = {
									which = int_m_exp
									value = 1
								}
								multiply_variable = {
									which = exp_val
									which = inp_m_exp
								}
							}
							set_variable = {
								which = exp_m_exp
								value = 0
							}
							set_variable = {
								which = int_m_exp
								value = 0
							}
							set_variable = {
								which = dec_m_exp
								value = 0
							}
							set_variable = {
								which = ln_val
								value = 0
							}
						}
						set_variable = {
							which = inp_m_exp
							value = 0
						}
						set_variable = {
							which = EstateProv_Unrest
							which = exp_val
						}
						set_variable = {
							which = exp_val
							value = 0
						}
						export_to_variable = {
							which = EstateProv_LA
							value = local_autonomy
						}
						multiply_variable = {
							which = EstateProv_LA
							value = 0.008
						}
						change_variable = {
							which = EstateProv_LA
							value = 0.2
						}
						multiply_variable = {
							which = EstateProv_Unrest
							which = EstateProv_LA
						}
						set_variable = {
							which = EstateProv_Unrest_Inp
							which = EstateProv_Unrest
						}
						if = {
							limit = {
								has_province_flag = loss
							}
							clr_province_flag = loss
							multiply_variable = {
								which = EstateProv_Unrest
								value = -1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 0.1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 10
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 25.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_25.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_25.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_25.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_25.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 12.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_12.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_12.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_12.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_12.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 6.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_6.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_6.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_6.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_6.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 3.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_3.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_3.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_3.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_3.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 1.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_1.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_1.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_1.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_1.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.1
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.1
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.1
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.1
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.1
							}
						}
						else_if = {
							limit = {
								has_province_flag = gain
							}
							clr_province_flag = gain
							multiply_variable = {
								which = EstateProv_Unrest
								value = 1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 0.1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 10
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 25.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_25.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_25.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_25.6
								}
								remove_province_modifier = EstateProv_UnrestGain_25.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 12.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_12.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_12.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_12.8
								}
								remove_province_modifier = EstateProv_UnrestGain_12.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 6.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_6.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_6.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_6.4
								}
								remove_province_modifier = EstateProv_UnrestGain_6.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 3.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_3.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_3.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_3.2
								}
								remove_province_modifier = EstateProv_UnrestGain_3.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 1.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_1.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_1.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_1.6
								}
								remove_province_modifier = EstateProv_UnrestGain_1.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.8
								}
								remove_province_modifier = EstateProv_UnrestGain_0.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.4
								}
								remove_province_modifier = EstateProv_UnrestGain_0.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.2
								}
								remove_province_modifier = EstateProv_UnrestGain_0.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.1
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.1
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.1
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.1
								}
								remove_province_modifier = EstateProv_UnrestGain_0.1
							}
						}
						if = {
							limit = {
								check_variable = {
									which = EstateProv_UnrestSave
									value = 0.001
								}
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_Unrest
											value = 0.001
										}
									}
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_25.6
									}
									remove_province_modifier = EstateProv_UnrestGain_25.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_12.8
									}
									remove_province_modifier = EstateProv_UnrestGain_12.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_6.4
									}
									remove_province_modifier = EstateProv_UnrestGain_6.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_3.2
									}
									remove_province_modifier = EstateProv_UnrestGain_3.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_1.6
									}
									remove_province_modifier = EstateProv_UnrestGain_1.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.8
									}
									remove_province_modifier = EstateProv_UnrestGain_0.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.4
									}
									remove_province_modifier = EstateProv_UnrestGain_0.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.2
									}
									remove_province_modifier = EstateProv_UnrestGain_0.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.1
									}
									remove_province_modifier = EstateProv_UnrestGain_0.1
								}
							}
						}
						else_if = {
							limit = {
								NOT = {
									check_variable = {
										which = EstateProv_UnrestSave
										value = 0
									}
								}
								check_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_25.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_25.6
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_12.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_12.8
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_6.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_6.4
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_3.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_3.2
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_1.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_1.6
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.8
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.4
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.2
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.1
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.1
							}
						}
						if = {
							limit = {
								is_variable_equal = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							set_variable = {
								which = EstateProv_Unrest
								value = 0
							}
						}
						set_variable = {
							which = EstateProv_UnrestSave
							value = 0
						}
						set_variable = {
							which = EstateProv_LA
							value = 0
						}
						set_variable = {
							which = EstateProv_Unrest_Inp
							value = 0
						}
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					which = estate_lesser_nobles_weight_share
					value = 0.03
				}
			}
			custom_tooltip = t_estate_lesser_nobles_loyalty_removed_a
			hidden_effect = {
				set_variable = {
					which = lesser_nobles_loyalty_removed
					value = 0
				}
				set_variable = {
					which = lesser_nobles_loyalty_removed
					which = nobles_loyalty_removed_a
				}
				if = {
					limit = {
						check_variable = {
							which = lesser_nobles_loyalty_removed
							value = 64
						}
					}
					add_estate_loyalty = {
						estate = estate_lesser_nobles
						loyalty = -64
					}
					change_variable = {
						which = estate_lesser_nobles_loyalty
						value = -0.64
					}
					subtract_variable = {
						which = lesser_nobles_loyalty_removed
						value = 64
					}
				}
				if = {
					limit = {
						check_variable = {
							which = lesser_nobles_loyalty_removed
							value = 32
						}
					}
					add_estate_loyalty = {
						estate = estate_lesser_nobles
						loyalty = -32
					}
					change_variable = {
						which = estate_lesser_nobles_loyalty
						value = -0.32
					}
					subtract_variable = {
						which = lesser_nobles_loyalty_removed
						value = 32
					}
				}
				if = {
					limit = {
						check_variable = {
							which = lesser_nobles_loyalty_removed
							value = 16
						}
					}
					add_estate_loyalty = {
						estate = estate_lesser_nobles
						loyalty = -16
					}
					change_variable = {
						which = estate_lesser_nobles_loyalty
						value = -0.16
					}
					subtract_variable = {
						which = lesser_nobles_loyalty_removed
						value = 16
					}
				}
				if = {
					limit = {
						check_variable = {
							which = lesser_nobles_loyalty_removed
							value = 8
						}
					}
					add_estate_loyalty = {
						estate = estate_lesser_nobles
						loyalty = -8
					}
					change_variable = {
						which = estate_lesser_nobles_loyalty
						value = -0.08
					}
					subtract_variable = {
						which = lesser_nobles_loyalty_removed
						value = 8
					}
				}
				if = {
					limit = {
						check_variable = {
							which = lesser_nobles_loyalty_removed
							value = 4
						}
					}
					add_estate_loyalty = {
						estate = estate_lesser_nobles
						loyalty = -4
					}
					change_variable = {
						which = estate_lesser_nobles_loyalty
						value = -0.04
					}
					subtract_variable = {
						which = lesser_nobles_loyalty_removed
						value = 4
					}
				}
				if = {
					limit = {
						check_variable = {
							which = lesser_nobles_loyalty_removed
							value = 2
						}
					}
					add_estate_loyalty = {
						estate = estate_lesser_nobles
						loyalty = -2
					}
					change_variable = {
						which = estate_lesser_nobles_loyalty
						value = -0.02
					}
					subtract_variable = {
						which = lesser_nobles_loyalty_removed
						value = 2
					}
				}
				if = {
					limit = {
						check_variable = {
							which = lesser_nobles_loyalty_removed
							value = 1
						}
					}
					add_estate_loyalty = {
						estate = estate_lesser_nobles
						loyalty = -1
					}
					change_variable = {
						which = estate_lesser_nobles_loyalty
						value = -0.01
					}
					subtract_variable = {
						which = lesser_nobles_loyalty_removed
						value = 1
					}
				}
				if = {
					limit = {
						NOT = {
							check_variable = {
								which = estate_lesser_nobles_loyalty
								value = 0.01
							}
						}
					}
					set_variable = {
						which = estate_lesser_nobles_loyalty
						value = 0.01
					}
				}
				every_owned_province = {
					limit = {
						has_province_flag = lesser_nobles_control_province
					}
					hidden_effect = {
						set_variable = {
							which = estate_lesser_nobles_loyalty
							which = owner
						}
						set_variable = {
							which = EstateProv_UnrestSave
							which = EstateProv_Unrest
						}
						set_variable = {
							which = EstateProv_Unrest
							which = estate_lesser_nobles_loyalty
						}
						set_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0
						}
						if = {
							limit = {
								check_variable = {
									which = EstateProv_Unrest
									value = 0.6
								}
							}
							set_province_flag = loss
							subtract_variable = {
								which = EstateProv_Unrest
								value = 0.6
							}
						}
						else_if = {
							limit = {
								NOT = {
									check_variable = {
										which = EstateProv_Unrest
										value = 0.401
									}
								}
							}
							set_province_flag = gain
							subtract_variable = {
								which = EstateProv_Unrest
								value = 0.4
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = -1
							}
						}
						else = {
							set_variable = {
								which = EstateProv_Unrest
								value = 0
							}
						}
						multiply_variable = {
							which = EstateProv_Unrest
							value = 16.62
						}
						set_variable = {
							which = inp_m_exp
							which = EstateProv_Unrest
						}
						if = {
							limit = {
								NOT = {
									check_variable = {
										which = inp_m_exp
										value = 0
									}
								}
							}
							set_variable = {
								which = exp_val
								value = 0
							}
							change_variable = {
								which = err.math.exp.undef
								value = 1
							}
						}
						else_if = {
							limit = {
								is_variable_equal = {
									which = inp_m_exp
									value = 0
								}
							}
							set_variable = {
								which = exp_val
								value = 0
							}
						}
						else = {
							set_variable = {
								which = exp_m_exp
								value = 1.7
							}
							set_variable = {
								which = int_m_exp
								which = exp_m_exp
							}
							multiply_variable = {
								which = int_m_exp
								value = 0.001
							}
							multiply_variable = {
								which = int_m_exp
								value = 1000
							}
							set_variable = {
								which = dec_m_exp
								which = exp_m_exp
							}
							subtract_variable = {
								which = dec_m_exp
								which = int_m_exp
							}
							set_variable = {
								which = inp
								which = inp_m_exp
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = inp
											value = 0.001
										}
									}
								}
								set_variable = {
									which = ln_val
									value = 0
								}
								change_variable = {
									which = err.math.ln.undef
									value = 1
								}
							}
							else = {
								set_variable = {
									which = ln_val
									value = 0
								}
								set_variable = {
									which = scale
									value = 10000
								}
								set_variable = {
									which = k
									value = 0
								}
								set_variable = {
									which = k_div
									which = scale
								}
								while = {
									limit = {
										check_variable = {
											which = inp
											value = 2.001
										}
									}
									multiply_variable = {
										which = inp
										value = 0.5
									}
									change_variable = {
										which = ln_val
										value = 6931.472
									}
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = inp
												value = 1
											}
										}
									}
									multiply_variable = {
										which = inp
										value = 2
									}
									subtract_variable = {
										which = ln_val
										value = 6931.472
									}
								}
								multiply_variable = {
									which = inp
									which = scale
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = k
												value = 10
											}
										}
									}
									change_variable = {
										which = k
										value = 1
									}
									multiply_variable = {
										which = k_div
										value = 0.5
									}
									set_variable = {
										which = t_m_ln
										which = scale
									}
									change_variable = {
										which = t_m_ln
										which = k_div
									}
									if = {
										limit = {
											check_variable = {
												which = inp
												which = t_m_ln
											}
										}
										divide_variable = {
											which = inp
											which = t_m_ln
										}
										multiply_variable = {
											which = inp
											which = scale
										}
										set_variable = {
											which = lt_ind
											which = k
										}
										if = {
											limit = {
												check_variable = {
													which = lt_ind
													value = 6
												}
											}
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 8
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 9
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 10
															}
														}
														set_variable = {
															which = lt_val
															value = 9.761
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 7
														}
													}
													set_variable = {
														which = lt_val
														value = 77.821
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 3
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 4
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 5
															}
														}
														set_variable = {
															which = lt_val
															value = 307.717
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 2
														}
													}
													set_variable = {
														which = lt_val
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 4054.651
													}
												}
											}
										}
										set_variable = {
											which = lt_ind
											value = 0
										}
										change_variable = {
											which = ln_val
											which = lt_val
										}
									}
									set_variable = {
										which = t_m_ln
										value = 0
									}
								}
								divide_variable = {
									which = ln_val
									value = 10000
								}
								set_variable = {
									which = scale
									value = 0
								}
								set_variable = {
									which = k
									value = 0
								}
								set_variable = {
									which = k_div
									value = 0
								}
								set_variable = {
									which = lt_val
									value = 0
								}
							}
							set_variable = {
								which = inp
								value = 0
							}
							multiply_variable = {
								which = dec_m_exp
								which = ln_val
							}
							set_variable = {
								which = math.e.expnt
								which = dec_m_exp
							}
							set_variable = {
								which = math.e.return
								value = 1
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = math.e.expnt
											value = -6.999
										}
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
							}
							else = {
								while = {
									limit = {
										check_variable = {
											which = math.e.expnt
											value = 1
										}
									}
									subtract_variable = {
										which = math.e.expnt
										value = 1
									}
									multiply_variable = {
										which = math.e.return
										value = 2.718
									}
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = math.e.expnt
												value = 0
											}
										}
									}
									change_variable = {
										which = math.e.expnt
										value = 1
									}
									divide_variable = {
										which = math.e.return
										value = 2.718
									}
								}
								set_variable = {
									which = math.e.sm
									value = 1
								}
								if = {
									limit = {
										NOT = {
											is_variable_equal = {
												which = math.e.expnt
												value = 0
											}
										}
									}
									set_variable = {
										which = math.e.sq
										which = math.e.expnt
									}
									multiply_variable = {
										which = math.e.sq
										which = math.e.expnt
									}
									set_variable = {
										which = math.e.fct
										value = 2
									}
									set_variable = {
										which = math.e.fctl
										value = 2
									}
									set_variable = {
										which = math.e.a1
										which = math.e.sq
									}
									set_variable = {
										which = math.e.a2
										which = math.e.expnt
									}
									set_variable = {
										which = math.e.a3
										value = 2
									}
									set_variable = {
										which = math.e.tmp
										which = math.e.a2
									}
									multiply_variable = {
										which = math.e.tmp
										which = math.e.a3
									}
									change_variable = {
										which = math.e.tmp
										which = math.e.a1
									}
									divide_variable = {
										which = math.e.tmp
										which = math.e.fct
									}
									change_variable = {
										which = math.e.sm
										which = math.e.tmp
									}
									set_variable = {
										which = math.e.prec
										value = 3
									}
									subtract_variable = {
										which = math.e.prec
										value = 1
									}
									while = {
										limit = {
											check_variable = {
												which = math.e.prec
												value = 1
											}
										}
										subtract_variable = {
											which = math.e.prec
											value = 1
										}
										change_variable = {
											which = math.e.fctl
											value = 1
										}
										multiply_variable = {
											which = math.e.fct
											which = math.e.fctl
										}
										change_variable = {
											which = math.e.fctl
											value = 1
										}
										multiply_variable = {
											which = math.e.fct
											which = math.e.fctl
										}
										multiply_variable = {
											which = math.e.a1
											which = math.e.sq
										}
										multiply_variable = {
											which = math.e.a2
											which = math.e.sq
										}
										change_variable = {
											which = math.e.a3
											value = 2
										}
										set_variable = {
											which = math.e.tmp
											which = math.e.a2
										}
										multiply_variable = {
											which = math.e.tmp
											which = math.e.a3
										}
										change_variable = {
											which = math.e.tmp
											which = math.e.a1
										}
										divide_variable = {
											which = math.e.tmp
											which = math.e.fct
										}
										change_variable = {
											which = math.e.sm
											which = math.e.tmp
										}
									}
								}
								multiply_variable = {
									which = math.e.return
									which = math.e.sm
								}
								set_variable = {
									which = exp_val
									which = math.e.return
								}
								set_variable = {
									which = math.e.sm
									value = 0
								}
								set_variable = {
									which = math.e.tmp
									value = 0
								}
								set_variable = {
									which = math.e.a1
									value = 0
								}
								set_variable = {
									which = math.e.a2
									value = 0
								}
								set_variable = {
									which = math.e.a3
									value = 0
								}
								set_variable = {
									which = math.e.fctl
									value = 0
								}
								set_variable = {
									which = math.e.fct
									value = 0
								}
								set_variable = {
									which = math.e.prec
									value = 0
								}
								set_variable = {
									which = math.e.sq
									value = 0
								}
							}
							set_variable = {
								which = math.e.expnt
								value = 0
							}
							set_variable = {
								which = math.e.return
								value = 0
							}
							while = {
								limit = {
									check_variable = {
										which = int_m_exp
										value = 1
									}
								}
								subtract_variable = {
									which = int_m_exp
									value = 1
								}
								multiply_variable = {
									which = exp_val
									which = inp_m_exp
								}
							}
							set_variable = {
								which = exp_m_exp
								value = 0
							}
							set_variable = {
								which = int_m_exp
								value = 0
							}
							set_variable = {
								which = dec_m_exp
								value = 0
							}
							set_variable = {
								which = ln_val
								value = 0
							}
						}
						set_variable = {
							which = inp_m_exp
							value = 0
						}
						set_variable = {
							which = EstateProv_Unrest
							which = exp_val
						}
						set_variable = {
							which = exp_val
							value = 0
						}
						export_to_variable = {
							which = EstateProv_LA
							value = local_autonomy
						}
						multiply_variable = {
							which = EstateProv_LA
							value = 0.008
						}
						change_variable = {
							which = EstateProv_LA
							value = 0.2
						}
						multiply_variable = {
							which = EstateProv_Unrest
							which = EstateProv_LA
						}
						set_variable = {
							which = EstateProv_Unrest_Inp
							which = EstateProv_Unrest
						}
						if = {
							limit = {
								has_province_flag = loss
							}
							clr_province_flag = loss
							multiply_variable = {
								which = EstateProv_Unrest
								value = -1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 0.1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 10
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 25.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_25.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_25.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_25.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_25.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 12.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_12.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_12.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_12.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_12.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 6.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_6.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_6.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_6.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_6.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 3.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_3.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_3.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_3.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_3.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 1.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_1.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_1.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_1.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_1.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.1
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.1
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.1
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.1
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.1
							}
						}
						else_if = {
							limit = {
								has_province_flag = gain
							}
							clr_province_flag = gain
							multiply_variable = {
								which = EstateProv_Unrest
								value = 1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 0.1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 10
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 25.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_25.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_25.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_25.6
								}
								remove_province_modifier = EstateProv_UnrestGain_25.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 12.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_12.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_12.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_12.8
								}
								remove_province_modifier = EstateProv_UnrestGain_12.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 6.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_6.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_6.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_6.4
								}
								remove_province_modifier = EstateProv_UnrestGain_6.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 3.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_3.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_3.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_3.2
								}
								remove_province_modifier = EstateProv_UnrestGain_3.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 1.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_1.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_1.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_1.6
								}
								remove_province_modifier = EstateProv_UnrestGain_1.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.8
								}
								remove_province_modifier = EstateProv_UnrestGain_0.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.4
								}
								remove_province_modifier = EstateProv_UnrestGain_0.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.2
								}
								remove_province_modifier = EstateProv_UnrestGain_0.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.1
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.1
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.1
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.1
								}
								remove_province_modifier = EstateProv_UnrestGain_0.1
							}
						}
						if = {
							limit = {
								check_variable = {
									which = EstateProv_UnrestSave
									value = 0.001
								}
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_Unrest
											value = 0.001
										}
									}
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_25.6
									}
									remove_province_modifier = EstateProv_UnrestGain_25.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_12.8
									}
									remove_province_modifier = EstateProv_UnrestGain_12.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_6.4
									}
									remove_province_modifier = EstateProv_UnrestGain_6.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_3.2
									}
									remove_province_modifier = EstateProv_UnrestGain_3.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_1.6
									}
									remove_province_modifier = EstateProv_UnrestGain_1.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.8
									}
									remove_province_modifier = EstateProv_UnrestGain_0.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.4
									}
									remove_province_modifier = EstateProv_UnrestGain_0.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.2
									}
									remove_province_modifier = EstateProv_UnrestGain_0.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.1
									}
									remove_province_modifier = EstateProv_UnrestGain_0.1
								}
							}
						}
						else_if = {
							limit = {
								NOT = {
									check_variable = {
										which = EstateProv_UnrestSave
										value = 0
									}
								}
								check_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_25.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_25.6
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_12.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_12.8
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_6.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_6.4
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_3.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_3.2
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_1.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_1.6
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.8
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.4
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.2
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.1
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.1
							}
						}
						if = {
							limit = {
								is_variable_equal = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							set_variable = {
								which = EstateProv_Unrest
								value = 0
							}
						}
						set_variable = {
							which = EstateProv_UnrestSave
							value = 0
						}
						set_variable = {
							which = EstateProv_LA
							value = 0
						}
						set_variable = {
							which = EstateProv_Unrest_Inp
							value = 0
						}
					}
				}
			}
		}
		if = {
			limit = {
				check_variable = {
					which = estate_burghers_weight_share
					value = 0.01
				}
			}
			custom_tooltip = estate_burghers_loyalty_added_a
			hidden_effect = {
				set_variable = {
					which = burghers_loyalty_added
					value = 0
				}
				set_variable = {
					which = burghers_loyalty_added
					which = burghers_loyalty_added_a
				}
				if = {
					limit = {
						check_variable = {
							which = burghers_loyalty_added
							value = 64
						}
					}
					add_estate_loyalty = {
						estate = estate_city_burghers
						loyalty = 64
					}
					change_variable = {
						which = estate_burghers_loyalty
						value = 0.64
					}
					subtract_variable = {
						which = burghers_loyalty_added
						value = 64
					}
				}
				if = {
					limit = {
						check_variable = {
							which = burghers_loyalty_added
							value = 32
						}
					}
					add_estate_loyalty = {
						estate = estate_city_burghers
						loyalty = 32
					}
					change_variable = {
						which = estate_burghers_loyalty
						value = 0.32
					}
					subtract_variable = {
						which = burghers_loyalty_added
						value = 32
					}
				}
				if = {
					limit = {
						check_variable = {
							which = burghers_loyalty_added
							value = 16
						}
					}
					add_estate_loyalty = {
						estate = estate_city_burghers
						loyalty = 16
					}
					change_variable = {
						which = estate_burghers_loyalty
						value = 0.16
					}
					subtract_variable = {
						which = burghers_loyalty_added
						value = 16
					}
				}
				if = {
					limit = {
						check_variable = {
							which = burghers_loyalty_added
							value = 8
						}
					}
					add_estate_loyalty = {
						estate = estate_city_burghers
						loyalty = 8
					}
					change_variable = {
						which = estate_burghers_loyalty
						value = 0.08
					}
					subtract_variable = {
						which = burghers_loyalty_added
						value = 8
					}
				}
				if = {
					limit = {
						check_variable = {
							which = burghers_loyalty_added
							value = 4
						}
					}
					add_estate_loyalty = {
						estate = estate_city_burghers
						loyalty = 4
					}
					change_variable = {
						which = estate_burghers_loyalty
						value = 0.04
					}
					subtract_variable = {
						which = burghers_loyalty_added
						value = 4
					}
				}
				if = {
					limit = {
						check_variable = {
							which = burghers_loyalty_added
							value = 2
						}
					}
					add_estate_loyalty = {
						estate = estate_city_burghers
						loyalty = 2
					}
					change_variable = {
						which = estate_burghers_loyalty
						value = 0.02
					}
					subtract_variable = {
						which = burghers_loyalty_added
						value = 2
					}
				}
				if = {
					limit = {
						check_variable = {
							which = burghers_loyalty_added
							value = 1
						}
					}
					add_estate_loyalty = {
						estate = estate_city_burghers
						loyalty = 1
					}
					change_variable = {
						which = estate_burghers_loyalty
						value = 0.01
					}
					subtract_variable = {
						which = burghers_loyalty_added
						value = 1
					}
				}
				if = {
					limit = {
						check_variable = {
							which = estate_burghers_loyalty
							value = 1
						}
					}
					set_variable = {
						which = estate_burghers_loyalty
						value = 1
					}
				}
				every_owned_province = {
					limit = {
						has_province_flag = burghers_control_province
					}
					hidden_effect = {
						set_variable = {
							which = estate_burghers_loyalty
							which = owner
						}
						set_variable = {
							which = EstateProv_UnrestSave
							which = EstateProv_Unrest
						}
						set_variable = {
							which = EstateProv_Unrest
							which = estate_burghers_loyalty
						}
						set_variable = {
							which = estate_burghers_loyalty
							value = 0
						}
						if = {
							limit = {
								check_variable = {
									which = EstateProv_Unrest
									value = 0.6
								}
							}
							set_province_flag = loss
							subtract_variable = {
								which = EstateProv_Unrest
								value = 0.6
							}
						}
						else_if = {
							limit = {
								NOT = {
									check_variable = {
										which = EstateProv_Unrest
										value = 0.401
									}
								}
							}
							set_province_flag = gain
							subtract_variable = {
								which = EstateProv_Unrest
								value = 0.4
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = -1
							}
						}
						else = {
							set_variable = {
								which = EstateProv_Unrest
								value = 0
							}
						}
						multiply_variable = {
							which = EstateProv_Unrest
							value = 16.62
						}
						set_variable = {
							which = inp_m_exp
							which = EstateProv_Unrest
						}
						if = {
							limit = {
								NOT = {
									check_variable = {
										which = inp_m_exp
										value = 0
									}
								}
							}
							set_variable = {
								which = exp_val
								value = 0
							}
							change_variable = {
								which = err.math.exp.undef
								value = 1
							}
						}
						else_if = {
							limit = {
								is_variable_equal = {
									which = inp_m_exp
									value = 0
								}
							}
							set_variable = {
								which = exp_val
								value = 0
							}
						}
						else = {
							set_variable = {
								which = exp_m_exp
								value = 1.7
							}
							set_variable = {
								which = int_m_exp
								which = exp_m_exp
							}
							multiply_variable = {
								which = int_m_exp
								value = 0.001
							}
							multiply_variable = {
								which = int_m_exp
								value = 1000
							}
							set_variable = {
								which = dec_m_exp
								which = exp_m_exp
							}
							subtract_variable = {
								which = dec_m_exp
								which = int_m_exp
							}
							set_variable = {
								which = inp
								which = inp_m_exp
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = inp
											value = 0.001
										}
									}
								}
								set_variable = {
									which = ln_val
									value = 0
								}
								change_variable = {
									which = err.math.ln.undef
									value = 1
								}
							}
							else = {
								set_variable = {
									which = ln_val
									value = 0
								}
								set_variable = {
									which = scale
									value = 10000
								}
								set_variable = {
									which = k
									value = 0
								}
								set_variable = {
									which = k_div
									which = scale
								}
								while = {
									limit = {
										check_variable = {
											which = inp
											value = 2.001
										}
									}
									multiply_variable = {
										which = inp
										value = 0.5
									}
									change_variable = {
										which = ln_val
										value = 6931.472
									}
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = inp
												value = 1
											}
										}
									}
									multiply_variable = {
										which = inp
										value = 2
									}
									subtract_variable = {
										which = ln_val
										value = 6931.472
									}
								}
								multiply_variable = {
									which = inp
									which = scale
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = k
												value = 10
											}
										}
									}
									change_variable = {
										which = k
										value = 1
									}
									multiply_variable = {
										which = k_div
										value = 0.5
									}
									set_variable = {
										which = t_m_ln
										which = scale
									}
									change_variable = {
										which = t_m_ln
										which = k_div
									}
									if = {
										limit = {
											check_variable = {
												which = inp
												which = t_m_ln
											}
										}
										divide_variable = {
											which = inp
											which = t_m_ln
										}
										multiply_variable = {
											which = inp
											which = scale
										}
										set_variable = {
											which = lt_ind
											which = k
										}
										if = {
											limit = {
												check_variable = {
													which = lt_ind
													value = 6
												}
											}
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 8
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 9
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 10
															}
														}
														set_variable = {
															which = lt_val
															value = 9.761
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 19.512
														}
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 38.986
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 7
														}
													}
													set_variable = {
														which = lt_val
														value = 77.821
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 155.042
													}
												}
											}
										}
										else = {
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 3
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 4
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 5
															}
														}
														set_variable = {
															which = lt_val
															value = 307.717
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 606.246
														}
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 1177.83
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 2
														}
													}
													set_variable = {
														which = lt_val
														value = 2231.436
													}
												}
												else = {
													set_variable = {
														which = lt_val
														value = 4054.651
													}
												}
											}
										}
										set_variable = {
											which = lt_ind
											value = 0
										}
										change_variable = {
											which = ln_val
											which = lt_val
										}
									}
									set_variable = {
										which = t_m_ln
										value = 0
									}
								}
								divide_variable = {
									which = ln_val
									value = 10000
								}
								set_variable = {
									which = scale
									value = 0
								}
								set_variable = {
									which = k
									value = 0
								}
								set_variable = {
									which = k_div
									value = 0
								}
								set_variable = {
									which = lt_val
									value = 0
								}
							}
							set_variable = {
								which = inp
								value = 0
							}
							multiply_variable = {
								which = dec_m_exp
								which = ln_val
							}
							set_variable = {
								which = math.e.expnt
								which = dec_m_exp
							}
							set_variable = {
								which = math.e.return
								value = 1
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = math.e.expnt
											value = -6.999
										}
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
							}
							else = {
								while = {
									limit = {
										check_variable = {
											which = math.e.expnt
											value = 1
										}
									}
									subtract_variable = {
										which = math.e.expnt
										value = 1
									}
									multiply_variable = {
										which = math.e.return
										value = 2.718
									}
								}
								while = {
									limit = {
										NOT = {
											check_variable = {
												which = math.e.expnt
												value = 0
											}
										}
									}
									change_variable = {
										which = math.e.expnt
										value = 1
									}
									divide_variable = {
										which = math.e.return
										value = 2.718
									}
								}
								set_variable = {
									which = math.e.sm
									value = 1
								}
								if = {
									limit = {
										NOT = {
											is_variable_equal = {
												which = math.e.expnt
												value = 0
											}
										}
									}
									set_variable = {
										which = math.e.sq
										which = math.e.expnt
									}
									multiply_variable = {
										which = math.e.sq
										which = math.e.expnt
									}
									set_variable = {
										which = math.e.fct
										value = 2
									}
									set_variable = {
										which = math.e.fctl
										value = 2
									}
									set_variable = {
										which = math.e.a1
										which = math.e.sq
									}
									set_variable = {
										which = math.e.a2
										which = math.e.expnt
									}
									set_variable = {
										which = math.e.a3
										value = 2
									}
									set_variable = {
										which = math.e.tmp
										which = math.e.a2
									}
									multiply_variable = {
										which = math.e.tmp
										which = math.e.a3
									}
									change_variable = {
										which = math.e.tmp
										which = math.e.a1
									}
									divide_variable = {
										which = math.e.tmp
										which = math.e.fct
									}
									change_variable = {
										which = math.e.sm
										which = math.e.tmp
									}
									set_variable = {
										which = math.e.prec
										value = 3
									}
									subtract_variable = {
										which = math.e.prec
										value = 1
									}
									while = {
										limit = {
											check_variable = {
												which = math.e.prec
												value = 1
											}
										}
										subtract_variable = {
											which = math.e.prec
											value = 1
										}
										change_variable = {
											which = math.e.fctl
											value = 1
										}
										multiply_variable = {
											which = math.e.fct
											which = math.e.fctl
										}
										change_variable = {
											which = math.e.fctl
											value = 1
										}
										multiply_variable = {
											which = math.e.fct
											which = math.e.fctl
										}
										multiply_variable = {
											which = math.e.a1
											which = math.e.sq
										}
										multiply_variable = {
											which = math.e.a2
											which = math.e.sq
										}
										change_variable = {
											which = math.e.a3
											value = 2
										}
										set_variable = {
											which = math.e.tmp
											which = math.e.a2
										}
										multiply_variable = {
											which = math.e.tmp
											which = math.e.a3
										}
										change_variable = {
											which = math.e.tmp
											which = math.e.a1
										}
										divide_variable = {
											which = math.e.tmp
											which = math.e.fct
										}
										change_variable = {
											which = math.e.sm
											which = math.e.tmp
										}
									}
								}
								multiply_variable = {
									which = math.e.return
									which = math.e.sm
								}
								set_variable = {
									which = exp_val
									which = math.e.return
								}
								set_variable = {
									which = math.e.sm
									value = 0
								}
								set_variable = {
									which = math.e.tmp
									value = 0
								}
								set_variable = {
									which = math.e.a1
									value = 0
								}
								set_variable = {
									which = math.e.a2
									value = 0
								}
								set_variable = {
									which = math.e.a3
									value = 0
								}
								set_variable = {
									which = math.e.fctl
									value = 0
								}
								set_variable = {
									which = math.e.fct
									value = 0
								}
								set_variable = {
									which = math.e.prec
									value = 0
								}
								set_variable = {
									which = math.e.sq
									value = 0
								}
							}
							set_variable = {
								which = math.e.expnt
								value = 0
							}
							set_variable = {
								which = math.e.return
								value = 0
							}
							while = {
								limit = {
									check_variable = {
										which = int_m_exp
										value = 1
									}
								}
								subtract_variable = {
									which = int_m_exp
									value = 1
								}
								multiply_variable = {
									which = exp_val
									which = inp_m_exp
								}
							}
							set_variable = {
								which = exp_m_exp
								value = 0
							}
							set_variable = {
								which = int_m_exp
								value = 0
							}
							set_variable = {
								which = dec_m_exp
								value = 0
							}
							set_variable = {
								which = ln_val
								value = 0
							}
						}
						set_variable = {
							which = inp_m_exp
							value = 0
						}
						set_variable = {
							which = EstateProv_Unrest
							which = exp_val
						}
						set_variable = {
							which = exp_val
							value = 0
						}
						export_to_variable = {
							which = EstateProv_LA
							value = local_autonomy
						}
						multiply_variable = {
							which = EstateProv_LA
							value = 0.008
						}
						change_variable = {
							which = EstateProv_LA
							value = 0.2
						}
						multiply_variable = {
							which = EstateProv_Unrest
							which = EstateProv_LA
						}
						set_variable = {
							which = EstateProv_Unrest_Inp
							which = EstateProv_Unrest
						}
						if = {
							limit = {
								has_province_flag = loss
							}
							clr_province_flag = loss
							multiply_variable = {
								which = EstateProv_Unrest
								value = -1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 0.1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 10
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 25.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_25.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_25.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_25.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_25.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 12.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_12.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_12.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_12.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_12.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 6.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_6.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_6.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_6.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_6.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 3.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_3.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_3.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_3.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_3.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 1.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_1.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_1.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_1.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_1.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.1
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestLoss_0.1
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestLoss_0.1
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.1
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.1
							}
						}
						else_if = {
							limit = {
								has_province_flag = gain
							}
							clr_province_flag = gain
							multiply_variable = {
								which = EstateProv_Unrest
								value = 1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 0.1
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 10
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 25.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_25.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_25.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_25.6
								}
								remove_province_modifier = EstateProv_UnrestGain_25.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 12.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_12.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_12.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_12.8
								}
								remove_province_modifier = EstateProv_UnrestGain_12.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 6.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_6.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_6.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_6.4
								}
								remove_province_modifier = EstateProv_UnrestGain_6.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 3.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_3.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_3.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_3.2
								}
								remove_province_modifier = EstateProv_UnrestGain_3.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 1.6
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_1.6
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_1.6
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_1.6
								}
								remove_province_modifier = EstateProv_UnrestGain_1.6
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.8
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.8
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.8
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.8
								}
								remove_province_modifier = EstateProv_UnrestGain_0.8
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.4
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.4
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.4
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.4
								}
								remove_province_modifier = EstateProv_UnrestGain_0.4
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.2
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.2
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.2
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.2
								}
								remove_province_modifier = EstateProv_UnrestGain_0.2
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
								}
								subtract_variable = {
									which = EstateProv_Unrest_Inp
									value = 0.1
								}
								if = {
									limit = {
										NOT = {
											has_province_modifier = EstateProv_UnrestGain_0.1
										}
									}
									add_province_modifier = {
										name = EstateProv_UnrestGain_0.1
										duration = -1
										hidden = yes
									}
								}
							}
							else_if = {
								limit = {
									has_province_modifier = EstateProv_UnrestGain_0.1
								}
								remove_province_modifier = EstateProv_UnrestGain_0.1
							}
						}
						if = {
							limit = {
								check_variable = {
									which = EstateProv_UnrestSave
									value = 0.001
								}
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_Unrest
											value = 0.001
										}
									}
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_25.6
									}
									remove_province_modifier = EstateProv_UnrestGain_25.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_12.8
									}
									remove_province_modifier = EstateProv_UnrestGain_12.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_6.4
									}
									remove_province_modifier = EstateProv_UnrestGain_6.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_3.2
									}
									remove_province_modifier = EstateProv_UnrestGain_3.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_1.6
									}
									remove_province_modifier = EstateProv_UnrestGain_1.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.8
									}
									remove_province_modifier = EstateProv_UnrestGain_0.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.4
									}
									remove_province_modifier = EstateProv_UnrestGain_0.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.2
									}
									remove_province_modifier = EstateProv_UnrestGain_0.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.1
									}
									remove_province_modifier = EstateProv_UnrestGain_0.1
								}
							}
						}
						else_if = {
							limit = {
								NOT = {
									check_variable = {
										which = EstateProv_UnrestSave
										value = 0
									}
								}
								check_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_25.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_25.6
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_12.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_12.8
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_6.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_6.4
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_3.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_3.2
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_1.6
								}
								remove_province_modifier = EstateProv_UnrestLoss_1.6
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.8
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.8
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.4
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.4
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.2
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.2
							}
							if = {
								limit = {
									has_province_modifier = EstateProv_UnrestLoss_0.1
								}
								remove_province_modifier = EstateProv_UnrestLoss_0.1
							}
						}
						if = {
							limit = {
								is_variable_equal = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							set_variable = {
								which = EstateProv_Unrest
								value = 0
							}
						}
						set_variable = {
							which = EstateProv_UnrestSave
							value = 0
						}
						set_variable = {
							which = EstateProv_LA
							value = 0
						}
						set_variable = {
							which = EstateProv_Unrest_Inp
							value = 0
						}
					}
				}
			}
		}
		add_dip_power = -200
		set_country_flag = ryukyu_diplomatic
		hidden_effect = {
			random_list = {
				30 = {
					country_event = {
						id = japan.72
						days = 30
						random = 10
					}
					set_country_flag = very_succesful_subjugation
				}
				30 = {
					country_event = {
						id = japan.72
						days = 60
						random = 20
					}
					set_country_flag = succesful_subjugation
				}
				40 = {
					country_event = {
						id = japan.72
						days = 60
						random = 20
					}
					set_country_flag = failed_subjugation
				}
			}
		}
	}
	option = {
		name = "japan.70c"
		clr_global_flag = subjugating_ryukyu
		add_adm_power = 200
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = japan.72
	title = "japan.72.t"
	desc = {
		trigger = {
			has_country_flag = ryukyu_military
			has_country_flag = very_succesful_subjugation
		}
		desc = japan.72.da
	}
	desc = {
		trigger = {
			has_country_flag = ryukyu_military
			has_country_flag = succesful_subjugation
		}
		desc = japan.72.db
	}
	desc = {
		trigger = {
			has_country_flag = ryukyu_military
			has_country_flag = pyrrhic_subjugation
		}
		desc = japan.72.dc
	}
	desc = {
		trigger = {
			has_country_flag = ryukyu_military
			has_country_flag = failed_subjugation
		}
		desc = japan.72.dd
	}
	desc = {
		trigger = {
			has_country_flag = ryukyu_military
			has_country_flag = horribly_failed_subjugation
		}
		desc = japan.72.de
	}
	desc = {
		trigger = {
			has_country_flag = ryukyu_diplomatic
			has_country_flag = very_succesful_subjugation
		}
		desc = japan.72.df
	}
	desc = {
		trigger = {
			has_country_flag = ryukyu_diplomatic
			has_country_flag = succesful_subjugation
		}
		desc = japan.72.dg
	}
	desc = {
		trigger = {
			has_country_flag = ryukyu_diplomatic
			has_country_flag = failed_subjugation
		}
		desc = japan.72.dh
	}
	picture = SHOGUNATE_eventPicture
	is_triggered_only = yes
	option = {
		name = "japan.72a"
		trigger = {
			OR = {
				has_country_flag = very_succesful_subjugation
				has_country_flag = succesful_subjugation
				has_country_flag = pyrrhic_subjugation
			}
		}
		if = {
			limit = {
				has_country_flag = ryukyu_military
			}
			if = {
				limit = {
					has_country_flag = pyrrhic_subjugation
				}
				add_yearly_manpower = 0.1
				capital_scope = {
					add_unrest = 5
				}
				add_war_exhaustion = 6
			}
			else_if = {
				limit = {
					has_country_flag = succesful_subjugation
				}
				add_yearly_manpower = 0.3
				capital_scope = {
					add_unrest = 2
				}
				add_war_exhaustion = 3
			}
			else = {
				add_yearly_manpower = 0.4
			}
		}
		else = {
			if = {
				limit = {
					has_country_flag = succesful_subjugation
				}
				add_prestige = 10
			}
			else = {
				add_prestige = 20
			}
		}
		event_target:ryukyu_target = {
			cede_province = FROM
		}
		if = {
			limit = {
				has_country_flag = ryukyu_diplomatic
			}
			if = {
				limit = {
					has_country_flag = succesful_subjugation
				}
				event_target:ryukyu_target = {
					add_province_modifier = {
						name = autonomous_aji
						duration = 1825
					}
				}
			}
			else = {
				event_target:ryukyu_target = {
					add_province_modifier = {
						name = autonomous_aji
						duration = 3650
					}
				}
			}
		}
	}
	option = {
		name = "japan.72b"
		trigger = {
			OR = {
				has_country_flag = failed_subjugation
				has_country_flag = horribly_failed_subjugation
			}
		}
		if = {
			limit = {
				has_country_flag = ryukyu_military
			}
			if = {
				limit = {
					has_country_flag = horribly_failed_subjugation
				}
				add_yearly_manpower = 0.1
				capital_scope = {
					add_unrest = 8
				}
				add_war_exhaustion = 6
			}
			else = {
				add_yearly_manpower = 0.3
				capital_scope = {
					add_unrest = 4
				}
				add_war_exhaustion = 3
			}
		}
		else = {
			add_prestige = -10
		}
	}
	after = {
		clr_country_flag = ryukyu_diplomatic
		clr_country_flag = ryukyu_military
		clr_country_flag = very_succesful_subjugation
		clr_country_flag = succesful_subjugation
		clr_country_flag = pyrrhic_subjugation
		clr_country_flag = failed_subjugation
		clr_country_flag = horribly_failed_subjugation
		clr_global_flag = subjugating_ryukyu
	}
}
country_event = {
	id = japan.99
	title = japan.99.t
	desc = japan.99.d
	picture = SHOGUNATE_eventPicture
	trigger = {
		is_subject = yes
		OR = {
			has_country_flag = supporting_northern_court
			has_country_flag = supporting_southern_court
		}
		OR = {
			overlord = {
				is_subject = no
				NOT = {
					culture_group = japanese
				}
			}
			overlord = {
				overlord = {
					NOT = {
						culture_group = japanese
					}
				}
			}
		}
	}
	mean_time_to_happen = {
		days = 1
	}
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_country_flag = kyushu_tandai
						has_country_flag = chugoku_tandai
						has_country_flag = shikoku_tandai
						has_country_flag = uo_tandai
					}
				}
				clr_country_flag = kyushu_tandai
				clr_country_flag = chugoku_tandai
				clr_country_flag = shikoku_tandai
				clr_country_flag = uo_tandai
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
			if = {
				limit = {
					has_country_flag = kyoto_kanrei
				}
				clr_country_flag = kyoto_kanrei
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
			if = {
				limit = {
					has_country_flag = kanrei_appointement
				}
				clr_country_flag = kanrei_appointement
				remove_country_modifier = title_1
				remove_country_modifier = title_3
				remove_country_modifier = title_4
				remove_country_modifier = title_5
				remove_country_modifier = title_6
				add_country_modifier = {
					name = title_2
					duration = -1
				}
				clr_country_flag = title_1
				clr_country_flag = title_2
				clr_country_flag = title_3
				clr_country_flag = title_4
				clr_country_flag = title_5
				clr_country_flag = title_6
			}
			clr_country_flag = supporting_northern_court
			clr_country_flag = supporting_southern_court
		}
	}
	option = {
		name = japan.99.o
	}
}
