namespace = red_turban
country_event = {
	id = red_turban.1
	title = "red_turban.1.t"
	desc = "red_turban.1.d"
	picture = DIPLOMACY_eventPicture
	trigger = {
		culture_group = chinese_group
		AND = {
			OR = {
				is_subject = no
				is_subject_of_type = tributary_state
				is_subject_of_type = close_tributary_state
			}
		}
		AND = {
			NOT = {
				num_of_cities = 20
			}
			any_neighbor_country = {
				culture_group = chinese_group
				ai = yes
				num_of_cities = 100
				legitimacy = 70
			}
		}
		ai = yes
	}
	mean_time_to_happen = {
		months = 10
	}
	option = {
		name = "OPT.ISTHATSO"
		if = {
			limit = {
				NOT = {
					num_of_cities = 20
				}
				any_neighbor_country = {
					culture_group = chinese_group
					num_of_cities = 100
					legitimacy = 70
				}
			}
			random_neighbor_country = {
				limit = {
					culture_group = chinese_group
					num_of_cities = 100
					legitimacy = 70
				}
				country_event = {
					id = red_turban.2
					days = 0
				}
			}
		}
	}
}
country_event = {
	id = red_turban.2
	title = "red_turban.2.t"
	desc = "red_turban.2.d"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	option = {
		name = "OPT.EXCELLENT"
		inherit = FROM
	}
}
country_event = {
	id = red_turban.3
	title = "red_turban.3.t"
	desc = "red_turban.3.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	trigger = {
		tag = YUA
		NOT = {
			has_country_flag = yuan_loses_south
		}
		NOT = {
			num_of_owned_provinces_with = {
				value = 30
				AND = {
					continent = east_asia
					OR = {
						superregion = north_china_superregion
						superregion = east_china_superregion
						superregion = southwest_china_superregion
					}
				}
			}
		}
	}
	mean_time_to_happen = {
		months = 6
	}
	option = {
		name = "red_turban.3a"
		southwest_china_superregion = {
			limit = {
				is_city = yes
				is_core = YUA
			}
			remove_core = YUA
		}
		add_prestige = -15
		add_legitimacy = -5
		set_country_flag = yuan_loses_south
	}
}
country_event = {
	id = red_turban.4
	title = "red_turban.4.t"
	desc = "red_turban.4.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	trigger = {
		tag = YUA
		is_year = 1359
		NOT = {
			has_country_flag = yuan_loses_wuhan
		}
		NOT = {
			num_of_owned_provinces_with = {
				value = 20
				AND = {
					continent = east_asia
					OR = {
						superregion = north_china_superregion
						superregion = east_china_superregion
						superregion = southwest_china_superregion
					}
				}
			}
		}
	}
	mean_time_to_happen = {
		months = 1
	}
	option = {
		name = "red_turban.3a"
		east_china_superregion = {
			limit = {
				is_city = yes
				is_core = YUA
			}
			remove_core = YUA
		}
		add_prestige = -15
		add_legitimacy = -5
		set_country_flag = yuan_loses_wuhan
	}
}
country_event = {
	id = red_turban.5
	title = "red_turban.5.t"
	desc = "red_turban.5.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	trigger = {
		tag = YUA
		NOT = {
			has_country_flag = yuan_loses_hanyu
		}
		NOT = {
			num_of_owned_provinces_with = {
				value = 5
				AND = {
					continent = east_asia
					OR = {
						superregion = north_china_superregion
						superregion = east_china_superregion
						superregion = southwest_china_superregion
					}
				}
			}
		}
	}
	mean_time_to_happen = {
		months = 1
	}
	option = {
		name = "red_turban.3a"
		north_china_superregion = {
			limit = {
				is_city = yes
				is_core = YUA
				NOT = {
					culture_group = altaic
				}
			}
			remove_core = YUA
		}
		add_prestige = -15
		add_legitimacy = -5
		set_country_flag = yuan_loses_hanyu
	}
}
country_event = {
	id = red_turban.6
	title = "red_turban.6.t"
	picture = SIEGE_eventPicture
	desc = {
		trigger = {
			tag = YUA
			NOT = {
				is_year = 1400
			}
		}
		desc = red_turban.6.da
	}
	desc = {
		trigger = {
			always = yes
		}
		desc = red_turban.6.db
	}
	fire_only_once = yes
	is_triggered_only = yes
	trigger = {
		OR = {
			culture_group = altaic
			culture_group = tungusic
		}
		OR = {
			has_country_flag = mandate_of_heaven_claimed
			has_country_flag = former_dynasty_china
		}
		any_owned_province = {
			superregion = eastern_steppe_superregion
		}
		OR = {
			NOT = {
				check_variable = {
					which = "Demesne_in_the_Mandate_of_Heaven"
					value = 50
				}
			}
			capital_scope = {
				NOT = {
					controlled_by = ROOT
				}
			}
		}
		is_at_war = no
	}
	option = {
		name = "red_turban.3a"
		change_government = tribal
		add_government_reform = steppe_horde
		set_legacy_government = steppe_horde_legacy
		change_religion = tengri_pagan_reformed
		if = {
			limit = {
				culture_group = altaic
				capital_scope = {
					AND = {
						continent = east_asia
						OR = {
							superregion = north_china_superregion
							superregion = east_china_superregion
							superregion = southwest_china_superregion
						}
					}
				}
				owns = 3273
			}
			hidden_effect = {
				capital_scope = {
					if = {
						limit = {
							has_province_modifier = misc_expenses_5242.88
						}
						remove_province_modifier = misc_expenses_5242.88
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_2621.44
						}
						remove_province_modifier = misc_expenses_2621.44
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_1310.72
						}
						remove_province_modifier = misc_expenses_1310.72
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_655.36
						}
						remove_province_modifier = misc_expenses_655.36
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_327.68
						}
						remove_province_modifier = misc_expenses_327.68
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_163.84
						}
						remove_province_modifier = misc_expenses_163.84
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_81.92
						}
						remove_province_modifier = misc_expenses_81.92
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_40.96
						}
						remove_province_modifier = misc_expenses_40.96
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_20.48
						}
						remove_province_modifier = misc_expenses_20.48
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_10.24
						}
						remove_province_modifier = misc_expenses_10.24
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_5.12
						}
						remove_province_modifier = misc_expenses_5.12
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_2.56
						}
						remove_province_modifier = misc_expenses_2.56
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_1.28
						}
						remove_province_modifier = misc_expenses_1.28
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.64
						}
						remove_province_modifier = misc_expenses_0.64
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.32
						}
						remove_province_modifier = misc_expenses_0.32
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.16
						}
						remove_province_modifier = misc_expenses_0.16
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.08
						}
						remove_province_modifier = misc_expenses_0.08
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.04
						}
						remove_province_modifier = misc_expenses_0.04
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.02
						}
						remove_province_modifier = misc_expenses_0.02
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.01
						}
						remove_province_modifier = misc_expenses_0.01
					}
					set_variable = {
						which = misc_expenses_cache
						value = 0
					}
				}
			}
			if = {
				limit = {
					is_part_of_hre = yes
					ROOT = {
						is_part_of_hre = no
					}
				}
				set_in_empire = no
				swap_non_generic_missions = yes
				emperor = {
					add_opinion = {
						who = ROOT
						modifier = hre_province_left
					}
				}
				add_imperial_influence = -1
			}
			set_capital = 3273
			hidden_effect = {
				country_event = {
					id = miscexpenses.002
				}
			}
		}
		else_if = {
			limit = {
				capital_scope = {
					AND = {
						continent = east_asia
						OR = {
							superregion = north_china_superregion
							superregion = east_china_superregion
							superregion = southwest_china_superregion
						}
					}
				}
			}
			random_owned_province = {
				limit = {
					NOT = {
						AND = {
							continent = east_asia
							OR = {
								superregion = north_china_superregion
								superregion = east_china_superregion
								superregion = southwest_china_superregion
							}
						}
					}
					has_owner_culture = yes
				}
				ROOT = {
					hidden_effect = {
						capital_scope = {
							if = {
								limit = {
									has_province_modifier = misc_expenses_5242.88
								}
								remove_province_modifier = misc_expenses_5242.88
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_2621.44
								}
								remove_province_modifier = misc_expenses_2621.44
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_1310.72
								}
								remove_province_modifier = misc_expenses_1310.72
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_655.36
								}
								remove_province_modifier = misc_expenses_655.36
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_327.68
								}
								remove_province_modifier = misc_expenses_327.68
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_163.84
								}
								remove_province_modifier = misc_expenses_163.84
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_81.92
								}
								remove_province_modifier = misc_expenses_81.92
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_40.96
								}
								remove_province_modifier = misc_expenses_40.96
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_20.48
								}
								remove_province_modifier = misc_expenses_20.48
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_10.24
								}
								remove_province_modifier = misc_expenses_10.24
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_5.12
								}
								remove_province_modifier = misc_expenses_5.12
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_2.56
								}
								remove_province_modifier = misc_expenses_2.56
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_1.28
								}
								remove_province_modifier = misc_expenses_1.28
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_0.64
								}
								remove_province_modifier = misc_expenses_0.64
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_0.32
								}
								remove_province_modifier = misc_expenses_0.32
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_0.16
								}
								remove_province_modifier = misc_expenses_0.16
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_0.08
								}
								remove_province_modifier = misc_expenses_0.08
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_0.04
								}
								remove_province_modifier = misc_expenses_0.04
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_0.02
								}
								remove_province_modifier = misc_expenses_0.02
							}
							if = {
								limit = {
									has_province_modifier = misc_expenses_0.01
								}
								remove_province_modifier = misc_expenses_0.01
							}
							set_variable = {
								which = misc_expenses_cache
								value = 0
							}
						}
					}
					if = {
						limit = {
							is_part_of_hre = yes
							ROOT = {
								is_part_of_hre = no
							}
						}
						set_in_empire = no
						swap_non_generic_missions = yes
						emperor = {
							add_opinion = {
								who = ROOT
								modifier = hre_province_left
							}
						}
						add_imperial_influence = -1
					}
					set_capital = PREV
					hidden_effect = {
						country_event = {
							id = miscexpenses.002
						}
					}
				}
			}
		}
		remove_faction = temples
		remove_faction = enuchs
		remove_faction = bureaucrats
		change_technology_group = steppestech
		change_unit_type = steppestech
		swap_free_idea_group = yes
		remove_country_modifier = mongol_xingsheng
		clr_country_flag = mandate_of_heaven_claimed
		clr_country_flag = barbarian_claimant_china
		add_prestige = -15
		add_legitimacy = -5
		every_subject_country = {
			limit = {
				is_subject_of_type = warlord
			}
			ROOT = {
				free_vassal = PREV
			}
		}
		if = {
			limit = {
				tag = YUA
				NOT = {
					is_year = 1400
				}
				NOT = {
					exists = MXI
				}
			}
			every_owned_province = {
				limit = {
					OR = {
						region = korea_region
						region = east_manchuria_region
						region = west_manchuria_region
					}
					NOT = {
						area = khorchin_area
					}
					NOT = {
						is_core = MXI
					}
				}
				add_core = MXI
			}
			create_subject = {
				who = MXI
				subject_type = warlord
			}
			hidden_effect = {
				every_owned_province = {
					limit = {
						is_core = MXI
					}
					cede_province = MXI
				}
			}
			MXI = {
				define_ruler = {
					name = "Naghacu"
					dynasty = "Jalayirid"
					mil = 4
					adm = 2
					dip = 3
					age = 55
				}
				infantry = capital
				infantry = capital
				infantry = capital
				infantry = capital
				infantry = capital
				cavalry = capital
				cavalry = capital
				cavalry = capital
				cavalry = capital
			}
			if = {
				limit = {
					CSE = {
						is_subject_of = YUA
					}
				}
				CSE = {
					country_event = {
						id = red_turban.15
					}
				}
			}
		}
	}
}
country_event = {
	id = red_turban.7
	title = "red_turban.7.t"
	desc = "red_turban.7.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	trigger = {
		tag = YUA
		NOT = {
			num_of_cities = 50
		}
		OR = {
			MXI = {
				exists = yes
				NOT = {
					is_subject_of = YUA
				}
			}
			NOT = {
				owns = 3273
			}
			is_subject = yes
		}
	}
	immediate = {
		hidden_effect = {
			every_province = {
				limit = {
					is_city = yes
					is_core = YUA
				}
				remove_core = YUA
			}
			every_owned_province = {
				limit = {
					province_group = khalka_group
					culture = mongol
				}
				change_culture = khalkas
				add_core = KHA
			}
			every_owned_province = {
				limit = {
					province_group = tumed_group
					culture = mongol
				}
				change_culture = tumed
				add_core = TMD
			}
			every_owned_province = {
				limit = {
					province_group = chakhar_group
					culture = mongol
				}
				change_culture = chahar
				add_core = CHH
			}
			every_owned_province = {
				limit = {
					OR = {
						culture = buryat
						culture = khamnigan
					}
				}
				add_core = BRT
			}
			MYR = {
				every_owned_province = {
					limit = {
						culture = mongol
					}
					change_culture = daur
					add_core = MYR
				}
			}
			every_province = {
				limit = {
					culture = mongol
					OR = {
						area = khorchin_area
						owned_by = MXI
					}
				}
				change_culture = uriankhai
				add_core = MXI
			}
			4196 = {
				if = {
					limit = {
						owned_by = ROOT
					}
					set_local_autonomy = 0
					AAA = {
						if = {
							limit = {
								PREV = {
									has_province_flag = sub_continent_food_center
								}
							}
							set_country_flag = sub_continent_food_center
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = regional_food_center
								}
							}
							set_country_flag = regional_food_center
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = has_estuary
								}
							}
							set_country_flag = has_estuary
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = has_natural_harbour
								}
							}
							set_country_flag = has_natural_harbour
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = has_small_natural_harbour
								}
							}
							set_country_flag = has_small_natural_harbour
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = has_great_natural_harbour
								}
							}
							set_country_flag = has_great_natural_harbour
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = good_natural_place
								}
							}
							set_country_flag = good_natural_place
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = great_natural_place
								}
							}
							set_country_flag = great_natural_place
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = awesome_natural_place
								}
							}
							set_country_flag = awesome_natural_place
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = has_confluence
								}
							}
							set_country_flag = has_confluence
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = favorable_terrain
								}
							}
							set_country_flag = favorable_terrain
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = rugged_terrain
								}
							}
							set_country_flag = rugged_terrain
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = challenging_terrain
								}
							}
							set_country_flag = challenging_terrain
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = ashkenazi_jews
								}
							}
							set_country_flag = ashkenazi_jews
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = tribals_control_province
								}
							}
							set_country_flag = tribals_control_province
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = no_plagues
								}
							}
							set_country_flag = no_plagues
						}
						if = {
							limit = {
								PREV = {
									has_province_flag = no_horses_present
								}
							}
							set_country_flag = no_horses_present
						}
						if = {
							limit = {
								PREV = {
									has_province_modifier = oasis_route
								}
							}
							set_country_flag = oasis_route
						}
						set_variable = {
							which = base_food
							which = PREV
						}
						set_variable = {
							which = cont_id
							which = PREV
						}
						set_variable = {
							which = continent_food
							which = PREV
						}
						set_variable = {
							which = continent_food_factor
							which = PREV
						}
						set_variable = {
							which = continent_food_percent_uneaten
							which = PREV
						}
						set_variable = {
							which = devPointRuralCur
							which = PREV
						}
						set_variable = {
							which = devPointTotal
							which = PREV
						}
						set_variable = {
							which = devPointUpperCur
							which = PREV
						}
						set_variable = {
							which = devPointUrbanCur
							which = PREV
						}
						set_variable = {
							which = eats_continent_food
							which = PREV
						}
						set_variable = {
							which = farm_efficiency
							which = PREV
						}
						set_variable = {
							which = farm_efficiency_terrain
							which = PREV
						}
						set_variable = {
							which = farm_efficiency_ducats_invested
							which = PREV
						}
						set_variable = {
							which = food_per_capita_quality
							which = PREV
						}
						set_variable = {
							which = ideal_rural_pop
							which = PREV
						}
						set_variable = {
							which = innate_rural_pop
							which = PREV
						}
						set_variable = {
							which = innate_rural_pop_base
							which = PREV
						}
						set_variable = {
							which = innate_rural_pop_region_share
							which = PREV
						}
						set_variable = {
							which = local_weather_factor
							which = PREV
						}
						set_variable = {
							which = mine_deposit_current
							which = PREV
						}
						set_variable = {
							which = mine_deposit_starting
							which = PREV
						}
						set_variable = {
							which = mine_power
							which = PREV
						}
						set_variable = {
							which = mine_starting_multiplier
							which = PREV
						}
						set_variable = {
							which = mine_new_reserves_threshold
							which = PREV
						}
						set_variable = {
							which = price_of_metal
							which = PREV
						}
						set_variable = {
							which = price_of_rural_good
							which = PREV
						}
						set_variable = {
							which = price_of_rural_good_mod
							which = PREV
						}
						set_variable = {
							which = prov_factor
							which = PREV
						}
						set_variable = {
							which = prov_id
							which = PREV
						}
						set_variable = {
							which = prov_radius
							which = PREV
						}
						set_variable = {
							which = prov_size
							which = PREV
						}
						set_variable = {
							which = province_plague_immunity
							which = PREV
						}
						set_variable = {
							which = regional_food_factor
							which = PREV
						}
						set_variable = {
							which = region_id
							which = PREV
						}
						set_variable = {
							which = rural_density
							which = PREV
						}
						set_variable = {
							which = rural_pop
							which = PREV
						}
						set_variable = {
							which = rural_production_power
							which = PREV
						}
						set_variable = {
							which = rural_production_power_save
							which = PREV
						}
						set_variable = {
							which = settlement_score_gravity
							which = PREV
						}
						set_variable = {
							which = settlement_score_progress
							which = PREV
						}
						set_variable = {
							which = sr_id
							which = PREV
						}
						set_variable = {
							which = surplus_food
							which = PREV
						}
						set_variable = {
							which = surplus_food_save
							which = PREV
						}
						set_variable = {
							which = tech_admin_level
							which = PREV
						}
						set_variable = {
							which = timber_province_production
							which = PREV
						}
						set_variable = {
							which = total_pop
							which = PREV
						}
						set_variable = {
							which = total_pop_r
							which = PREV
						}
						set_variable = {
							which = total_surplus_output
							which = PREV
						}
						set_variable = {
							which = travel_time_terrain_base
							which = PREV
						}
						set_variable = {
							which = tribal_culture
							which = PREV
						}
						set_variable = {
							which = tribal_settlement_score
							which = PREV
						}
						set_variable = {
							which = tribals_ratio
							which = PREV
						}
						set_variable = {
							which = urban_density
							which = PREV
						}
						set_variable = {
							which = urban_gravity_total
							which = PREV
						}
						set_variable = {
							which = upper_pop
							which = PREV
						}
						set_variable = {
							which = upper_pop_r
							which = PREV
						}
						set_variable = {
							which = urban_pop
							which = PREV
						}
						set_variable = {
							which = urban_production_power
							which = PREV
						}
						set_variable = {
							which = urban_ratio
							which = PREV
						}
						set_variable = {
							which = wealth_rural_fluid
							which = PREV
						}
						set_variable = {
							which = wealth_urban_fluid
							which = PREV
						}
						set_variable = {
							which = x_coord
							which = PREV
						}
						set_variable = {
							which = y_coord
							which = PREV
						}
						set_variable = {
							which = year_ticker
							which = PREV
						}
						set_variable = {
							which = catholic
							which = PREV
						}
						set_variable = {
							which = orthodox
							which = PREV
						}
						set_variable = {
							which = protestant
							which = PREV
						}
						set_variable = {
							which = reformed
							which = PREV
						}
						set_variable = {
							which = hussite
							which = PREV
						}
						set_variable = {
							which = gnostic
							which = PREV
						}
						set_variable = {
							which = chaldean
							which = PREV
						}
						set_variable = {
							which = coptic
							which = PREV
						}
						set_variable = {
							which = jewish
							which = PREV
						}
						set_variable = {
							which = sunni
							which = PREV
						}
						set_variable = {
							which = shiite
							which = PREV
						}
						set_variable = {
							which = ibadi
							which = PREV
						}
						set_variable = {
							which = wahhabi
							which = PREV
						}
						set_variable = {
							which = druze
							which = PREV
						}
						set_variable = {
							which = hinduism
							which = PREV
						}
						set_variable = {
							which = sikhism
							which = PREV
						}
						set_variable = {
							which = jain
							which = PREV
						}
						set_variable = {
							which = zoroastrian
							which = PREV
						}
						set_variable = {
							which = confucianism
							which = PREV
						}
						set_variable = {
							which = buddhism
							which = PREV
						}
						set_variable = {
							which = mahayana
							which = PREV
						}
						set_variable = {
							which = vajrayana
							which = PREV
						}
						set_variable = {
							which = inti
							which = PREV
						}
						set_variable = {
							which = nahuatl
							which = PREV
						}
						set_variable = {
							which = mesoamerican_religion
							which = PREV
						}
						set_variable = {
							which = totemism
							which = PREV
						}
						set_variable = {
							which = pantheism
							which = PREV
						}
						set_variable = {
							which = tengri_pagan_reformed
							which = PREV
						}
						set_variable = {
							which = shamanism
							which = PREV
						}
						set_variable = {
							which = animism
							which = PREV
						}
						set_variable = {
							which = west_african_pagan_reformed
							which = PREV
						}
						set_variable = {
							which = polynesian_religion
							which = PREV
						}
						set_variable = {
							which = shinto
							which = PREV
						}
						set_variable = {
							which = adi_dharam
							which = PREV
						}
						set_variable = {
							which = hellenic_pagan
							which = PREV
						}
						set_variable = {
							which = norse_pagan_reformed
							which = PREV
						}
						set_variable = {
							which = finnish_pagan_reformed
							which = PREV
						}
						set_variable = {
							which = slavic_pagan_reformed
							which = PREV
						}
						set_variable = {
							which = baltic_pagan_reformed
							which = PREV
						}
						PREV = {
							trigger_switch = {
								on_trigger = has_province_flag
								tin = {
									AAA = {
										set_country_flag = tin
									}
								}
								coal = {
									AAA = {
										set_country_flag = coal
									}
								}
								iron = {
									AAA = {
										set_country_flag = iron
									}
								}
								salt = {
									AAA = {
										set_country_flag = salt
									}
								}
								copper = {
									AAA = {
										set_country_flag = copper
									}
								}
								sulphur = {
									AAA = {
										set_country_flag = sulphur
									}
								}
								marble = {
									AAA = {
										set_country_flag = marble
									}
								}
								gems = {
									AAA = {
										set_country_flag = gems
									}
								}
								silver = {
									AAA = {
										set_country_flag = silver
									}
								}
								gold = {
									AAA = {
										set_country_flag = gold
									}
								}
								lead = {
									AAA = {
										set_country_flag = lead
									}
								}
								alum = {
									AAA = {
										set_country_flag = alum
									}
								}
								obsidian = {
									AAA = {
										set_country_flag = obsidian
									}
								}
							}
							trigger_switch = {
								on_trigger = has_province_modifier
								fur_low = {
									AAA = {
										set_country_flag = fur_low
									}
								}
								fur_medium = {
									AAA = {
										set_country_flag = fur_medium
									}
								}
								fur_large = {
									AAA = {
										set_country_flag = fur_large
									}
								}
							}
							trigger_switch = {
								on_trigger = has_province_modifier
								cod_province_small = {
									AAA = {
										set_country_flag = cod_province_small
									}
								}
								cod_province_medium = {
									AAA = {
										set_country_flag = cod_province_medium
									}
								}
								cod_province_big = {
									AAA = {
										set_country_flag = cod_province_big
									}
								}
							}
							trigger_switch = {
								on_trigger = has_province_modifier
								ivory_low = {
									AAA = {
										set_country_flag = ivory_low
									}
								}
								ivory_medium = {
									AAA = {
										set_country_flag = ivory_medium
									}
								}
								ivory_large = {
									AAA = {
										set_country_flag = ivory_large
									}
								}
							}
						}
					}
					remove_core = owner
					cede_province = ---
					remove_core = owner
					set_local_autonomy = 0
					remove_province_modifier = martial_law
					add_base_tax = 1
					AAA = {
						PREV = {
							set_variable = {
								which = base_food
								which = PREV
							}
							set_variable = {
								which = cont_id
								which = PREV
							}
							set_variable = {
								which = continent_food
								which = PREV
							}
							set_variable = {
								which = continent_food_factor
								which = PREV
							}
							set_variable = {
								which = continent_food_percent_uneaten
								which = PREV
							}
							set_variable = {
								which = devPointRuralCur
								which = PREV
							}
							set_variable = {
								which = devPointTotal
								which = PREV
							}
							set_variable = {
								which = devPointUpperCur
								which = PREV
							}
							set_variable = {
								which = devPointUrbanCur
								which = PREV
							}
							set_variable = {
								which = eats_continent_food
								which = PREV
							}
							set_variable = {
								which = farm_efficiency
								which = PREV
							}
							set_variable = {
								which = farm_efficiency_terrain
								which = PREV
							}
							set_variable = {
								which = farm_efficiency_ducats_invested
								which = PREV
							}
							set_variable = {
								which = food_per_capita_quality
								which = PREV
							}
							set_variable = {
								which = ideal_rural_pop
								which = PREV
							}
							set_variable = {
								which = innate_rural_pop
								which = PREV
							}
							set_variable = {
								which = innate_rural_pop_base
								which = PREV
							}
							set_variable = {
								which = innate_rural_pop_region_share
								which = PREV
							}
							set_variable = {
								which = local_weather_factor
								which = PREV
							}
							set_variable = {
								which = mine_deposit_current
								which = PREV
							}
							set_variable = {
								which = mine_deposit_starting
								which = PREV
							}
							set_variable = {
								which = mine_power
								which = PREV
							}
							set_variable = {
								which = mine_starting_multiplier
								which = PREV
							}
							set_variable = {
								which = mine_new_reserves_threshold
								which = PREV
							}
							set_variable = {
								which = price_of_metal
								which = PREV
							}
							set_variable = {
								which = price_of_rural_good
								which = PREV
							}
							set_variable = {
								which = price_of_rural_good_mod
								which = PREV
							}
							set_variable = {
								which = prov_factor
								which = PREV
							}
							set_variable = {
								which = prov_id
								which = PREV
							}
							set_variable = {
								which = prov_radius
								which = PREV
							}
							set_variable = {
								which = prov_size
								which = PREV
							}
							set_variable = {
								which = province_plague_immunity
								which = PREV
							}
							set_variable = {
								which = regional_food_factor
								which = PREV
							}
							set_variable = {
								which = region_id
								which = PREV
							}
							set_variable = {
								which = rural_density
								which = PREV
							}
							set_variable = {
								which = rural_pop
								which = PREV
							}
							set_variable = {
								which = rural_production_power
								which = PREV
							}
							set_variable = {
								which = rural_production_power_save
								which = PREV
							}
							set_variable = {
								which = settlement_score_gravity
								which = PREV
							}
							set_variable = {
								which = settlement_score_progress
								which = PREV
							}
							set_variable = {
								which = sr_id
								which = PREV
							}
							set_variable = {
								which = surplus_food
								which = PREV
							}
							set_variable = {
								which = surplus_food_save
								which = PREV
							}
							set_variable = {
								which = tech_admin_level
								which = PREV
							}
							set_variable = {
								which = timber_province_production
								which = PREV
							}
							set_variable = {
								which = total_pop
								which = PREV
							}
							set_variable = {
								which = total_pop_r
								which = PREV
							}
							set_variable = {
								which = total_surplus_output
								which = PREV
							}
							set_variable = {
								which = travel_time_terrain_base
								which = PREV
							}
							set_variable = {
								which = tribal_culture
								which = PREV
							}
							set_variable = {
								which = tribal_settlement_score
								which = PREV
							}
							set_variable = {
								which = tribals_ratio
								which = PREV
							}
							set_variable = {
								which = urban_density
								which = PREV
							}
							set_variable = {
								which = urban_gravity_total
								which = PREV
							}
							set_variable = {
								which = upper_pop
								which = PREV
							}
							set_variable = {
								which = upper_pop_r
								which = PREV
							}
							set_variable = {
								which = urban_pop
								which = PREV
							}
							set_variable = {
								which = urban_production_power
								which = PREV
							}
							set_variable = {
								which = urban_ratio
								which = PREV
							}
							set_variable = {
								which = wealth_rural_fluid
								which = PREV
							}
							set_variable = {
								which = wealth_urban_fluid
								which = PREV
							}
							set_variable = {
								which = x_coord
								which = PREV
							}
							set_variable = {
								which = y_coord
								which = PREV
							}
							set_variable = {
								which = year_ticker
								which = PREV
							}
							set_variable = {
								which = catholic
								which = PREV
							}
							set_variable = {
								which = orthodox
								which = PREV
							}
							set_variable = {
								which = protestant
								which = PREV
							}
							set_variable = {
								which = reformed
								which = PREV
							}
							set_variable = {
								which = hussite
								which = PREV
							}
							set_variable = {
								which = gnostic
								which = PREV
							}
							set_variable = {
								which = chaldean
								which = PREV
							}
							set_variable = {
								which = coptic
								which = PREV
							}
							set_variable = {
								which = jewish
								which = PREV
							}
							set_variable = {
								which = sunni
								which = PREV
							}
							set_variable = {
								which = shiite
								which = PREV
							}
							set_variable = {
								which = ibadi
								which = PREV
							}
							set_variable = {
								which = wahhabi
								which = PREV
							}
							set_variable = {
								which = druze
								which = PREV
							}
							set_variable = {
								which = hinduism
								which = PREV
							}
							set_variable = {
								which = sikhism
								which = PREV
							}
							set_variable = {
								which = jain
								which = PREV
							}
							set_variable = {
								which = zoroastrian
								which = PREV
							}
							set_variable = {
								which = confucianism
								which = PREV
							}
							set_variable = {
								which = buddhism
								which = PREV
							}
							set_variable = {
								which = mahayana
								which = PREV
							}
							set_variable = {
								which = vajrayana
								which = PREV
							}
							set_variable = {
								which = inti
								which = PREV
							}
							set_variable = {
								which = nahuatl
								which = PREV
							}
							set_variable = {
								which = mesoamerican_religion
								which = PREV
							}
							set_variable = {
								which = totemism
								which = PREV
							}
							set_variable = {
								which = pantheism
								which = PREV
							}
							set_variable = {
								which = tengri_pagan_reformed
								which = PREV
							}
							set_variable = {
								which = shamanism
								which = PREV
							}
							set_variable = {
								which = animism
								which = PREV
							}
							set_variable = {
								which = west_african_pagan_reformed
								which = PREV
							}
							set_variable = {
								which = polynesian_religion
								which = PREV
							}
							set_variable = {
								which = shinto
								which = PREV
							}
							set_variable = {
								which = adi_dharam
								which = PREV
							}
							set_variable = {
								which = hellenic_pagan
								which = PREV
							}
							set_variable = {
								which = norse_pagan_reformed
								which = PREV
							}
							set_variable = {
								which = finnish_pagan_reformed
								which = PREV
							}
							set_variable = {
								which = slavic_pagan_reformed
								which = PREV
							}
							set_variable = {
								which = baltic_pagan_reformed
								which = PREV
							}
						}
						trigger_switch = {
							on_trigger = has_country_flag
							tin = {
								PREV = {
									set_province_flag = tin
								}
								clr_country_flag = tin
							}
							coal = {
								PREV = {
									set_province_flag = coal
								}
								clr_country_flag = coal
							}
							iron = {
								PREV = {
									set_province_flag = iron
								}
								clr_country_flag = iron
							}
							salt = {
								PREV = {
									set_province_flag = salt
								}
								clr_country_flag = salt
							}
							copper = {
								PREV = {
									set_province_flag = copper
								}
								clr_country_flag = copper
							}
							sulphur = {
								PREV = {
									set_province_flag = sulphur
								}
								clr_country_flag = sulphur
							}
							marble = {
								PREV = {
									set_province_flag = marble
								}
								clr_country_flag = marble
							}
							gems = {
								PREV = {
									set_province_flag = gems
								}
								clr_country_flag = gems
							}
							silver = {
								PREV = {
									set_province_flag = silver
								}
								clr_country_flag = silver
							}
							gold = {
								PREV = {
									set_province_flag = gold
								}
								clr_country_flag = gold
							}
							lead = {
								PREV = {
									set_province_flag = lead
								}
								clr_country_flag = lead
							}
							alum = {
								PREV = {
									set_province_flag = alum
								}
								clr_country_flag = alum
							}
							obsidian = {
								PREV = {
									set_province_flag = obsidian
								}
								clr_country_flag = obsidian
							}
						}
						trigger_switch = {
							on_trigger = has_country_flag
							fur_low = {
								PREV = {
									add_permanent_province_modifier = {
										name = fur_low
										duration = -1
									}
								}
								clr_country_flag = fur_low
							}
							fur_medium = {
								PREV = {
									add_permanent_province_modifier = {
										name = fur_medium
										duration = -1
									}
								}
								clr_country_flag = fur_medium
							}
							fur_large = {
								PREV = {
									add_permanent_province_modifier = {
										name = fur_large
										duration = -1
									}
								}
								clr_country_flag = fur_large
							}
						}
						trigger_switch = {
							on_trigger = has_country_flag
							cod_province_small = {
								PREV = {
									add_permanent_province_modifier = {
										name = cod_province_small
										duration = -1
									}
								}
								clr_country_flag = cod_province_small
							}
							cod_province_medium = {
								PREV = {
									add_permanent_province_modifier = {
										name = cod_province_medium
										duration = -1
									}
								}
								clr_country_flag = cod_province_medium
							}
							cod_province_big = {
								PREV = {
									add_permanent_province_modifier = {
										name = cod_province_big
										duration = -1
									}
								}
								clr_country_flag = cod_province_big
							}
						}
						trigger_switch = {
							on_trigger = has_country_flag
							ivory_low = {
								PREV = {
									add_permanent_province_modifier = {
										name = ivory_low
										duration = -1
									}
								}
								clr_country_flag = ivory_low
							}
							ivory_medium = {
								PREV = {
									add_permanent_province_modifier = {
										name = ivory_medium
										duration = -1
									}
								}
								clr_country_flag = ivory_medium
							}
							ivory_large = {
								PREV = {
									add_permanent_province_modifier = {
										name = ivory_large
										duration = -1
									}
								}
								clr_country_flag = ivory_large
							}
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = sub_continent_food_center
							}
						}
						set_province_flag = sub_continent_food_center
						AAA = {
							clr_country_flag = sub_continent_food_center
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = regional_food_center
							}
						}
						set_province_flag = regional_food_center
						AAA = {
							clr_country_flag = regional_food_center
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = has_estuary
							}
						}
						set_province_flag = has_estuary
						AAA = {
							clr_country_flag = has_estuary
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = has_natural_harbour
							}
						}
						set_province_flag = has_natural_harbour
						AAA = {
							clr_country_flag = has_natural_harbour
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = has_small_natural_harbour
							}
						}
						set_province_flag = has_small_natural_harbour
						AAA = {
							clr_country_flag = has_small_natural_harbour
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = has_great_natural_harbour
							}
						}
						set_province_flag = has_great_natural_harbour
						AAA = {
							clr_country_flag = has_great_natural_harbour
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = good_natural_place
							}
						}
						set_province_flag = good_natural_place
						AAA = {
							clr_country_flag = good_natural_place
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = great_natural_place
							}
						}
						set_province_flag = great_natural_place
						AAA = {
							clr_country_flag = great_natural_place
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = awesome_natural_place
							}
						}
						set_province_flag = awesome_natural_place
						AAA = {
							clr_country_flag = awesome_natural_place
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = has_confluence
							}
						}
						set_province_flag = has_confluence
						AAA = {
							clr_country_flag = has_confluence
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = favorable_terrain
							}
						}
						set_province_flag = favorable_terrain
						AAA = {
							clr_country_flag = favorable_terrain
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = rugged_terrain
							}
						}
						set_province_flag = rugged_terrain
						AAA = {
							clr_country_flag = rugged_terrain
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = challenging_terrain
							}
						}
						set_province_flag = challenging_terrain
						AAA = {
							clr_country_flag = challenging_terrain
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = ashkenazi_jews
							}
						}
						set_province_flag = ashkenazi_jews
						AAA = {
							clr_country_flag = ashkenazi_jews
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = tribals_control_province
							}
						}
						set_province_flag = tribals_control_province
						AAA = {
							clr_country_flag = tribals_control_province
						}
						add_permanent_province_modifier = {
							name = estate_tribal_territory
							duration = -1
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = no_plagues
							}
						}
						set_province_flag = no_plagues
						AAA = {
							clr_country_flag = no_plagues
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = no_horses_present
							}
						}
						set_province_flag = no_horses_present
						AAA = {
							clr_country_flag = no_horses_present
						}
					}
					set_variable = {
						which = tempRural
						which = rural_pop_display
					}
					set_variable = {
						which = tempUrban
						which = urban_pop_display
					}
					set_variable = {
						which = rural_pop_display
						value = 0
					}
					set_variable = {
						which = urban_pop_display
						value = 0
					}
					set_variable = {
						which = upper_pop_display
						value = 0
					}
					set_variable = {
						which = total_pop_display
						value = 0
					}
					set_variable = {
						which = t_P_ITV
						value = 100
					}
					subtract_variable = {
						which = t_P_ITV
						which = urban_ratio
					}
					set_variable = {
						which = t1_P_RTV
						which = total_pop_r
					}
					multiply_variable = {
						which = t1_P_RTV
						which = t_P_ITV
					}
					set_variable = {
						which = t2_P_RTV
						which = t1_P_RTV
					}
					multiply_variable = {
						which = t1_P_RTV
						value = 0.01
					}
					set_variable = {
						which = t3_P_RTV
						which = t1_P_RTV
					}
					multiply_variable = {
						which = t3_P_RTV
						value = -100
					}
					change_variable = {
						which = t3_P_RTV
						which = t2_P_RTV
					}
					if = {
						limit = {
							check_variable = {
								which = t3_P_RTV
								value = 0.05
							}
						}
						change_variable = {
							which = t1_P_RTV
							value = 0.001
						}
					}
					set_variable = {
						which = rural_pop_display
						which = t1_P_RTV
					}
					set_variable = {
						which = t1_P_RTV
						value = 0
					}
					set_variable = {
						which = t2_P_RTV
						value = 0
					}
					set_variable = {
						which = t3_P_RTV
						value = 0
					}
					set_variable = {
						which = t_P_ITV
						value = 0
					}
					set_variable = {
						which = t1_P_RTV
						which = total_pop_r
					}
					multiply_variable = {
						which = t1_P_RTV
						which = urban_ratio
					}
					set_variable = {
						which = t2_P_RTV
						which = t1_P_RTV
					}
					multiply_variable = {
						which = t1_P_RTV
						value = 0.01
					}
					set_variable = {
						which = t3_P_RTV
						which = t1_P_RTV
					}
					multiply_variable = {
						which = t3_P_RTV
						value = -100
					}
					change_variable = {
						which = t3_P_RTV
						which = t2_P_RTV
					}
					if = {
						limit = {
							check_variable = {
								which = t3_P_RTV
								value = 0.05
							}
						}
						change_variable = {
							which = t1_P_RTV
							value = 0.001
						}
					}
					set_variable = {
						which = urban_pop_display
						which = t1_P_RTV
					}
					set_variable = {
						which = t1_P_RTV
						value = 0
					}
					set_variable = {
						which = t2_P_RTV
						value = 0
					}
					set_variable = {
						which = t3_P_RTV
						value = 0
					}
					change_variable = {
						which = upper_pop_display
						which = upper_pop_r
					}
					change_variable = {
						which = total_pop_display
						which = total_pop_r
					}
					subtract_variable = {
						which = tempRural
						which = rural_pop_display
					}
					subtract_variable = {
						which = tempUrban
						which = urban_pop_display
					}
					subtract_variable = {
						which = rural_change_display
						which = tempRural
					}
					subtract_variable = {
						which = urban_change_display
						which = tempUrban
					}
					set_variable = {
						which = tempRural
						value = 0
					}
					set_variable = {
						which = tempUrban
						value = 0
					}
					set_variable = {
						which = total_change_display
						which = rural_change_display
					}
					change_variable = {
						which = total_change_display
						which = urban_change_display
					}
					add_permanent_province_modifier = {
						name = pop_display
						duration = -1
					}
					if = {
						limit = {
							NOT = {
								is_wasteland = yes
							}
							NOT = {
								is_city = yes
							}
						}
						set_variable = {
							which = devPointRuralCur
							value = 0
						}
						set_variable = {
							which = devPointUrbanCur
							value = 0
						}
						set_variable = {
							which = devPointUpperCur
							value = 0
						}
						trigger_switch = {
							on_trigger = has_province_modifier
							fur_low = {
								change_variable = {
									which = devPointRuralCur
									value = 0.75
								}
							}
							fur_medium = {
								change_variable = {
									which = devPointRuralCur
									value = 1.125
								}
							}
							fur_large = {
								change_variable = {
									which = devPointRuralCur
									value = 1.875
								}
							}
						}
						trigger_switch = {
							on_trigger = has_province_modifier
							pearls_low = {
								change_variable = {
									which = devPointRuralCur
									value = 1.75
								}
							}
							pearls_medium = {
								change_variable = {
									which = devPointRuralCur
									value = 4
								}
							}
							pearls_large = {
								change_variable = {
									which = devPointRuralCur
									value = 7.625
								}
							}
						}
						trigger_switch = {
							on_trigger = has_province_modifier
							herring_province_small = {
								change_variable = {
									which = devPointRuralCur
									value = 0.375
								}
							}
							herring_province_medium = {
								change_variable = {
									which = devPointRuralCur
									value = 0.75
								}
							}
							herring_province_big = {
								change_variable = {
									which = devPointRuralCur
									value = 1.5
								}
							}
						}
						trigger_switch = {
							on_trigger = has_province_modifier
							cod_province_small = {
								change_variable = {
									which = devPointRuralCur
									value = 0.375
								}
							}
							cod_province_medium = {
								change_variable = {
									which = devPointRuralCur
									value = 0.75
								}
							}
							cod_province_big = {
								change_variable = {
									which = devPointRuralCur
									value = 1.5
								}
							}
						}
						trigger_switch = {
							on_trigger = has_province_modifier
							ivory_low = {
								change_variable = {
									which = devPointRuralCur
									value = 0.75
								}
							}
							ivory_medium = {
								change_variable = {
									which = devPointRuralCur
									value = 1.125
								}
							}
							ivory_large = {
								change_variable = {
									which = devPointRuralCur
									value = 1.5
								}
							}
						}
						multiply_variable = {
							which = devPointRuralCur
							value = 0.5
						}
						set_variable = {
							which = devPointRuralPOP
							which = rural_pop
						}
						multiply_variable = {
							which = devPointRuralPOP
							value = 0.2
						}
						change_variable = {
							which = devPointRuralCur
							which = devPointRuralPOP
						}
						set_variable = {
							which = devPointRuralPOP
							value = 0
						}
						if = {
							limit = {
								OR = {
									has_province_flag = good_natural_place
									has_province_flag = great_natural_place
									has_province_flag = awesome_natural_place
								}
							}
							change_variable = {
								which = devPointRuralCur
								value = 0.5
							}
						}
						change_variable = {
							which = devPointRuralCur
							value = 1
						}
						set_variable = {
							which = devPointTotal
							which = devPointRuralCur
						}
						change_variable = {
							which = devPointTotal
							which = devPointUrbanCur
						}
						if = {
							limit = {
								check_variable = {
									which = devPointUpperCur
									which = devPointTotal
								}
							}
							set_variable = {
								which = devPointUpperCur
								which = devPointTotal
							}
							subtract_variable = {
								which = devPointUpperCur
								value = 1
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = devPointUpperCur
											value = 0
										}
									}
								}
								set_variable = {
									which = devPointUpperCur
									value = 0
								}
							}
						}
						change_variable = {
							which = devPointTotal
							which = devPointUpperCur
						}
						set_variable = {
							which = devDiffRural
							which = devPointRuralCur
						}
						multiply_variable = {
							which = devDiffRural
							value = 0.001
						}
						multiply_variable = {
							which = devDiffRural
							value = 1000
						}
						export_to_variable = {
							which = devCurRural
							value = base_tax
						}
						subtract_variable = {
							which = devDiffRural
							which = devCurRural
						}
						while = {
							limit = {
								OR = {
									check_variable = {
										which = devDiffRural
										value = 1
									}
									NOT = {
										check_variable = {
											which = devDiffRural
											value = -0.999
										}
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = devDiffRural
										value = 1
									}
								}
								set_province_flag = update_capital
								if = {
									limit = {
										check_variable = {
											which = devDiffRural
											value = 5
										}
									}
									if = {
										limit = {
											check_variable = {
												which = devDiffRural
												value = 7
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = 8
												}
											}
											add_base_tax = 8
											change_variable = {
												which = devDiffRural
												value = -8
											}
										}
										else = {
											add_base_tax = 7
											change_variable = {
												which = devDiffRural
												value = -7
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = 6
												}
											}
											add_base_tax = 6
											change_variable = {
												which = devDiffRural
												value = -6
											}
										}
										else = {
											add_base_tax = 5
											change_variable = {
												which = devDiffRural
												value = -5
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = devDiffRural
												value = 3
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = 4
												}
											}
											add_base_tax = 4
											change_variable = {
												which = devDiffRural
												value = -4
											}
										}
										else = {
											add_base_tax = 3
											change_variable = {
												which = devDiffRural
												value = -3
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = 2
												}
											}
											add_base_tax = 2
											change_variable = {
												which = devDiffRural
												value = -2
											}
										}
										else = {
											add_base_tax = 1
											change_variable = {
												which = devDiffRural
												value = -1
											}
										}
									}
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = devDiffRural
											value = -0.999
										}
									}
								}
								set_province_flag = update_capital
								if = {
									limit = {
										check_variable = {
											which = devDiffRural
											value = -4
										}
									}
									if = {
										limit = {
											check_variable = {
												which = devDiffRural
												value = -2
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = -1
												}
											}
											add_base_tax = -1
											change_variable = {
												which = devDiffRural
												value = 1
											}
										}
										else = {
											add_base_tax = -2
											change_variable = {
												which = devDiffRural
												value = 2
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = -3
												}
											}
											add_base_tax = -3
											change_variable = {
												which = devDiffRural
												value = 3
											}
										}
										else = {
											add_base_tax = -4
											change_variable = {
												which = devDiffRural
												value = 4
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = devDiffRural
												value = -6
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = -5
												}
											}
											add_base_tax = -5
											change_variable = {
												which = devDiffRural
												value = 5
											}
										}
										else = {
											add_base_tax = -6
											change_variable = {
												which = devDiffRural
												value = 6
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffRural
													value = -7
												}
											}
											add_base_tax = -7
											change_variable = {
												which = devDiffRural
												value = 7
											}
										}
										else = {
											add_base_tax = -8
											change_variable = {
												which = devDiffRural
												value = 8
											}
										}
									}
								}
							}
						}
						set_variable = {
							which = devCurRural
							value = 0
						}
						set_variable = {
							which = devDiffRural
							value = 0
						}
						set_variable = {
							which = devDiffUrban
							which = devPointUrbanCur
						}
						multiply_variable = {
							which = devDiffUrban
							value = 0.001
						}
						multiply_variable = {
							which = devDiffUrban
							value = 1000
						}
						export_to_variable = {
							which = devCurUrban
							value = base_production
						}
						subtract_variable = {
							which = devDiffUrban
							which = devCurUrban
						}
						while = {
							limit = {
								OR = {
									check_variable = {
										which = devDiffUrban
										value = 1
									}
									NOT = {
										check_variable = {
											which = devDiffUrban
											value = -0.999
										}
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = devDiffUrban
										value = 1
									}
								}
								set_province_flag = update_capital
								if = {
									limit = {
										check_variable = {
											which = devDiffUrban
											value = 5
										}
									}
									if = {
										limit = {
											check_variable = {
												which = devDiffUrban
												value = 7
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = 8
												}
											}
											add_base_production = 8
											change_variable = {
												which = devDiffUrban
												value = -8
											}
										}
										else = {
											add_base_production = 7
											change_variable = {
												which = devDiffUrban
												value = -7
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = 6
												}
											}
											add_base_production = 6
											change_variable = {
												which = devDiffUrban
												value = -6
											}
										}
										else = {
											add_base_production = 5
											change_variable = {
												which = devDiffUrban
												value = -5
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = devDiffUrban
												value = 3
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = 4
												}
											}
											add_base_production = 4
											change_variable = {
												which = devDiffUrban
												value = -4
											}
										}
										else = {
											add_base_production = 3
											change_variable = {
												which = devDiffUrban
												value = -3
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = 2
												}
											}
											add_base_production = 2
											change_variable = {
												which = devDiffUrban
												value = -2
											}
										}
										else = {
											add_base_production = 1
											change_variable = {
												which = devDiffUrban
												value = -1
											}
										}
									}
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = devDiffUrban
											value = -0.999
										}
									}
								}
								set_province_flag = update_capital
								if = {
									limit = {
										check_variable = {
											which = devDiffUrban
											value = -4
										}
									}
									if = {
										limit = {
											check_variable = {
												which = devDiffUrban
												value = -2
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = -1
												}
											}
											add_base_production = -1
											change_variable = {
												which = devDiffUrban
												value = 1
											}
										}
										else = {
											add_base_production = -2
											change_variable = {
												which = devDiffUrban
												value = 2
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = -3
												}
											}
											add_base_production = -3
											change_variable = {
												which = devDiffUrban
												value = 3
											}
										}
										else = {
											add_base_production = -4
											change_variable = {
												which = devDiffUrban
												value = 4
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = devDiffUrban
												value = -6
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = -5
												}
											}
											add_base_production = -5
											change_variable = {
												which = devDiffUrban
												value = 5
											}
										}
										else = {
											add_base_production = -6
											change_variable = {
												which = devDiffUrban
												value = 6
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUrban
													value = -7
												}
											}
											add_base_production = -7
											change_variable = {
												which = devDiffUrban
												value = 7
											}
										}
										else = {
											add_base_production = -8
											change_variable = {
												which = devDiffUrban
												value = 8
											}
										}
									}
								}
							}
						}
						set_variable = {
							which = devCurUrban
							value = 0
						}
						set_variable = {
							which = devDiffUrban
							value = 0
						}
						set_variable = {
							which = devDiffUpper
							which = devPointUpperCur
						}
						multiply_variable = {
							which = devDiffUpper
							value = 0.001
						}
						multiply_variable = {
							which = devDiffUpper
							value = 1000
						}
						export_to_variable = {
							which = devCurUpper
							value = base_manpower
						}
						subtract_variable = {
							which = devDiffUpper
							which = devCurUpper
						}
						while = {
							limit = {
								OR = {
									check_variable = {
										which = devDiffUpper
										value = 1
									}
									NOT = {
										check_variable = {
											which = devDiffUpper
											value = -0.999
										}
									}
								}
							}
							if = {
								limit = {
									check_variable = {
										which = devDiffUpper
										value = 1
									}
								}
								set_province_flag = update_capital
								if = {
									limit = {
										check_variable = {
											which = devDiffUpper
											value = 5
										}
									}
									if = {
										limit = {
											check_variable = {
												which = devDiffUpper
												value = 7
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = 8
												}
											}
											add_base_manpower = 8
											change_variable = {
												which = devDiffUpper
												value = -8
											}
										}
										else = {
											add_base_manpower = 7
											change_variable = {
												which = devDiffUpper
												value = -7
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = 6
												}
											}
											add_base_manpower = 6
											change_variable = {
												which = devDiffUpper
												value = -6
											}
										}
										else = {
											add_base_manpower = 5
											change_variable = {
												which = devDiffUpper
												value = -5
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = devDiffUpper
												value = 3
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = 4
												}
											}
											add_base_manpower = 4
											change_variable = {
												which = devDiffUpper
												value = -4
											}
										}
										else = {
											add_base_manpower = 3
											change_variable = {
												which = devDiffUpper
												value = -3
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = 2
												}
											}
											add_base_manpower = 2
											change_variable = {
												which = devDiffUpper
												value = -2
											}
										}
										else = {
											add_base_manpower = 1
											change_variable = {
												which = devDiffUpper
												value = -1
											}
										}
									}
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = devDiffUpper
											value = -0.999
										}
									}
								}
								set_province_flag = update_capital
								if = {
									limit = {
										check_variable = {
											which = devDiffUpper
											value = -4
										}
									}
									if = {
										limit = {
											check_variable = {
												which = devDiffUpper
												value = -2
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = -1
												}
											}
											add_base_manpower = -1
											change_variable = {
												which = devDiffUpper
												value = 1
											}
										}
										else = {
											add_base_manpower = -2
											change_variable = {
												which = devDiffUpper
												value = 2
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = -3
												}
											}
											add_base_manpower = -3
											change_variable = {
												which = devDiffUpper
												value = 3
											}
										}
										else = {
											add_base_manpower = -4
											change_variable = {
												which = devDiffUpper
												value = 4
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = {
												which = devDiffUpper
												value = -6
											}
										}
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = -5
												}
											}
											add_base_manpower = -5
											change_variable = {
												which = devDiffUpper
												value = 5
											}
										}
										else = {
											add_base_manpower = -6
											change_variable = {
												which = devDiffUpper
												value = 6
											}
										}
									}
									else = {
										if = {
											limit = {
												check_variable = {
													which = devDiffUpper
													value = -7
												}
											}
											add_base_manpower = -7
											change_variable = {
												which = devDiffUpper
												value = 7
											}
										}
										else = {
											add_base_manpower = -8
											change_variable = {
												which = devDiffUpper
												value = 8
											}
										}
									}
								}
							}
						}
						set_variable = {
							which = devCurUpper
							value = 0
						}
						set_variable = {
							which = devDiffUpper
							value = 0
						}
					}
					if = {
						limit = {
							province_id = 3645
						}
						add_permanent_province_modifier = {
							name = "toronto_natural_harbour"
							duration = -1
						}
					}
					if = {
						limit = {
							province_id = 944
						}
						add_permanent_province_modifier = {
							name = "chicago_natural_harbour"
							duration = -1
						}
					}
					if = {
						limit = {
							AAA = {
								has_country_flag = oasis_route
							}
						}
						add_permanent_province_modifier = {
							name = "oasis_route"
							duration = -1
						}
						AAA = {
							clr_country_flag = oasis_route
						}
					}
					AAA = {
						set_variable = {
							which = base_food
							value = 0
						}
						set_variable = {
							which = cont_id
							value = 0
						}
						set_variable = {
							which = continent_food
							value = 0
						}
						set_variable = {
							which = continent_food_factor
							value = 0
						}
						set_variable = {
							which = continent_food_percent_uneaten
							value = 0
						}
						set_variable = {
							which = devPointRuralCur
							value = 0
						}
						set_variable = {
							which = devPointTotal
							value = 0
						}
						set_variable = {
							which = devPointUpperCur
							value = 0
						}
						set_variable = {
							which = devPointUrbanCur
							value = 0
						}
						set_variable = {
							which = eats_continent_food
							value = 0
						}
						set_variable = {
							which = farm_efficiency
							value = 0
						}
						set_variable = {
							which = farm_efficiency_terrain
							value = 0
						}
						set_variable = {
							which = farm_efficiency_ducats_invested
							value = 0
						}
						set_variable = {
							which = food_per_capita_quality
							value = 0
						}
						set_variable = {
							which = ideal_rural_pop
							value = 0
						}
						set_variable = {
							which = innate_rural_pop
							value = 0
						}
						set_variable = {
							which = innate_rural_pop_base
							value = 0
						}
						set_variable = {
							which = innate_rural_pop_region_share
							value = 0
						}
						set_variable = {
							which = local_weather_factor
							value = 0
						}
						set_variable = {
							which = mine_deposit_current
							value = 0
						}
						set_variable = {
							which = mine_deposit_starting
							value = 0
						}
						set_variable = {
							which = mine_power
							value = 0
						}
						set_variable = {
							which = mine_starting_multiplier
							value = 0
						}
						set_variable = {
							which = mine_new_reserves_threshold
							value = 0
						}
						set_variable = {
							which = price_of_metal
							value = 0
						}
						set_variable = {
							which = price_of_rural_good
							value = 0
						}
						set_variable = {
							which = price_of_rural_good_mod
							value = 0
						}
						set_variable = {
							which = prov_factor
							value = 0
						}
						set_variable = {
							which = prov_id
							value = 0
						}
						set_variable = {
							which = prov_radius
							value = 0
						}
						set_variable = {
							which = prov_size
							value = 0
						}
						set_variable = {
							which = province_plague_immunity
							value = 0
						}
						set_variable = {
							which = regional_food_factor
							value = 0
						}
						set_variable = {
							which = region_id
							value = 0
						}
						set_variable = {
							which = rural_density
							value = 0
						}
						set_variable = {
							which = rural_pop
							value = 0
						}
						set_variable = {
							which = rural_production_power
							value = 0
						}
						set_variable = {
							which = rural_production_power_save
							value = 0
						}
						set_variable = {
							which = settlement_score_gravity
							value = 0
						}
						set_variable = {
							which = settlement_score_progress
							value = 0
						}
						set_variable = {
							which = sr_id
							value = 0
						}
						set_variable = {
							which = surplus_food
							value = 0
						}
						set_variable = {
							which = surplus_food_save
							value = 0
						}
						set_variable = {
							which = tech_admin_level
							value = 0
						}
						set_variable = {
							which = timber_province_production
							value = 0
						}
						set_variable = {
							which = total_pop
							value = 0
						}
						set_variable = {
							which = total_pop_r
							value = 0
						}
						set_variable = {
							which = total_surplus_output
							value = 0
						}
						set_variable = {
							which = travel_time_terrain_base
							value = 0
						}
						set_variable = {
							which = tribal_culture
							value = 0
						}
						set_variable = {
							which = tribal_settlement_score
							value = 0
						}
						set_variable = {
							which = tribals_ratio
							value = 0
						}
						set_variable = {
							which = urban_density
							value = 0
						}
						set_variable = {
							which = urban_gravity_total
							value = 0
						}
						set_variable = {
							which = upper_pop
							value = 0
						}
						set_variable = {
							which = upper_pop_r
							value = 0
						}
						set_variable = {
							which = urban_pop
							value = 0
						}
						set_variable = {
							which = urban_production_power
							value = 0
						}
						set_variable = {
							which = urban_ratio
							value = 0
						}
						set_variable = {
							which = wealth_rural_fluid
							value = 0
						}
						set_variable = {
							which = wealth_urban_fluid
							value = 0
						}
						set_variable = {
							which = x_coord
							value = 0
						}
						set_variable = {
							which = y_coord
							value = 0
						}
						set_variable = {
							which = year_ticker
							value = 0
						}
						set_variable = {
							which = catholic
							value = 0
						}
						set_variable = {
							which = orthodox
							value = 0
						}
						set_variable = {
							which = protestant
							value = 0
						}
						set_variable = {
							which = reformed
							value = 0
						}
						set_variable = {
							which = hussite
							value = 0
						}
						set_variable = {
							which = gnostic
							value = 0
						}
						set_variable = {
							which = chaldean
							value = 0
						}
						set_variable = {
							which = coptic
							value = 0
						}
						set_variable = {
							which = jewish
							value = 0
						}
						set_variable = {
							which = sunni
							value = 0
						}
						set_variable = {
							which = shiite
							value = 0
						}
						set_variable = {
							which = ibadi
							value = 0
						}
						set_variable = {
							which = wahhabi
							value = 0
						}
						set_variable = {
							which = druze
							value = 0
						}
						set_variable = {
							which = hinduism
							value = 0
						}
						set_variable = {
							which = sikhism
							value = 0
						}
						set_variable = {
							which = jain
							value = 0
						}
						set_variable = {
							which = zoroastrian
							value = 0
						}
						set_variable = {
							which = confucianism
							value = 0
						}
						set_variable = {
							which = buddhism
							value = 0
						}
						set_variable = {
							which = mahayana
							value = 0
						}
						set_variable = {
							which = vajrayana
							value = 0
						}
						set_variable = {
							which = inti
							value = 0
						}
						set_variable = {
							which = nahuatl
							value = 0
						}
						set_variable = {
							which = mesoamerican_religion
							value = 0
						}
						set_variable = {
							which = totemism
							value = 0
						}
						set_variable = {
							which = pantheism
							value = 0
						}
						set_variable = {
							which = tengri_pagan_reformed
							value = 0
						}
						set_variable = {
							which = shamanism
							value = 0
						}
						set_variable = {
							which = animism
							value = 0
						}
						set_variable = {
							which = west_african_pagan_reformed
							value = 0
						}
						set_variable = {
							which = polynesian_religion
							value = 0
						}
						set_variable = {
							which = shinto
							value = 0
						}
						set_variable = {
							which = adi_dharam
							value = 0
						}
						set_variable = {
							which = hellenic_pagan
							value = 0
						}
						set_variable = {
							which = norse_pagan_reformed
							value = 0
						}
						set_variable = {
							which = finnish_pagan_reformed
							value = 0
						}
						set_variable = {
							which = slavic_pagan_reformed
							value = 0
						}
						set_variable = {
							which = baltic_pagan_reformed
							value = 0
						}
					}
				}
			}
			random_list = {
				34 = {
					715 = {
						add_core = KHA
						change_culture = khalkas
					}
					3272 = {
						add_core = KHA
						change_culture = khalkas
					}
				}
				33 = {
					715 = {
						add_core = OIR
						change_culture = oirats
					}
					3272 = {
						add_core = OIR
						change_culture = oirats
					}
				}
				33 = {
					715 = {
						add_core = TMD
						change_culture = tumed
					}
					3272 = {
						add_core = TMD
						change_culture = tumed
					}
				}
			}
			if = {
				limit = {
					2743 = {
						owned_by = ROOT
					}
				}
				2743 = {
					add_core = HMI
				}
			}
			if = {
				limit = {
					2119 = {
						owned_by = ROOT
					}
				}
				2119 = {
					add_core = HMI
				}
			}
			every_owned_province = {
				limit = {
					culture_group = chinese_group
				}
				random_country = {
					limit = {
						any_owned_province = {
							region = hebei_region
						}
						culture_group = chinese_group
					}
					PREV = {
						cede_province = PREV
					}
				}
			}
		}
	}
	option = {
		name = "red_turban.7a"
		release = TMD
		release = CHH
		if = {
			limit = {
				NOT = {
					exists = BRT
				}
			}
			release = BRT
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = BRT
				}
				cede_province = BRT
			}
		}
		if = {
			limit = {
				NOT = {
					exists = OIR
				}
			}
			release = OIR
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = OIR
				}
				cede_province = OIR
			}
		}
		if = {
			limit = {
				NOT = {
					exists = MXI
				}
			}
			release = MXI
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = MXI
				}
				cede_province = MXI
			}
		}
		if = {
			limit = {
				NOT = {
					exists = HMI
				}
			}
			release = HMI
		}
		change_tag = KHA
		change_primary_culture = khalkas
		release_all_subjects = yes
		every_owned_province = {
			limit = {
				culture = mongol
			}
			change_culture = khalkas
		}
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.7b"
		release = TMD
		release = KHA
		if = {
			limit = {
				NOT = {
					exists = BRT
				}
			}
			release = BRT
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = BRT
				}
				cede_province = BRT
			}
		}
		if = {
			limit = {
				NOT = {
					exists = OIR
				}
			}
			release = OIR
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = OIR
				}
				cede_province = OIR
			}
		}
		if = {
			limit = {
				NOT = {
					exists = MXI
				}
			}
			release = MXI
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = MXI
				}
				cede_province = MXI
			}
		}
		if = {
			limit = {
				NOT = {
					exists = HMI
				}
			}
			release = HMI
		}
		change_tag = CHH
		change_primary_culture = chahar
		release_all_subjects = yes
		every_owned_province = {
			limit = {
				culture = mongol
			}
			change_culture = chahar
		}
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.7c"
		release = KHA
		release = CHH
		if = {
			limit = {
				NOT = {
					exists = BRT
				}
			}
			release = BRT
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = BRT
				}
				cede_province = BRT
			}
		}
		if = {
			limit = {
				NOT = {
					exists = OIR
				}
			}
			release = OIR
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = OIR
				}
				cede_province = OIR
			}
		}
		if = {
			limit = {
				NOT = {
					exists = MXI
				}
			}
			release = MXI
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = MXI
				}
				cede_province = MXI
			}
		}
		if = {
			limit = {
				NOT = {
					exists = HMI
				}
			}
			release = HMI
		}
		change_tag = TMD
		change_primary_culture = tumed
		release_all_subjects = yes
		every_owned_province = {
			limit = {
				culture = mongol
			}
			change_culture = tumed
		}
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.7d"
		trigger = {
			NOT = {
				exists = OIR
			}
		}
		release = KHA
		release = CHH
		release = TMD
		if = {
			limit = {
				NOT = {
					exists = BRT
				}
			}
			release = BRT
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = BRT
				}
				cede_province = BRT
			}
		}
		if = {
			limit = {
				NOT = {
					exists = MXI
				}
			}
			release = MXI
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = MXI
				}
				cede_province = MXI
			}
		}
		change_tag = OIR
		change_primary_culture = oirats
		release_all_subjects = yes
		every_owned_province = {
			limit = {
				culture = mongol
			}
			change_culture = oirats
		}
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.7e"
		trigger = {
			NOT = {
				exists = BRT
			}
		}
		release = KHA
		release = CHH
		release = TMD
		if = {
			limit = {
				NOT = {
					exists = OIR
				}
			}
			release = OIR
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = OIR
				}
				cede_province = OIR
			}
		}
		if = {
			limit = {
				NOT = {
					exists = MXI
				}
			}
			release = MXI
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = MXI
				}
				cede_province = MXI
			}
		}
		if = {
			limit = {
				NOT = {
					exists = HMI
				}
			}
			release = HMI
		}
		change_tag = BRT
		change_primary_culture = buryat
		release_all_subjects = yes
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.7f"
		trigger = {
			NOT = {
				exists = MXI
			}
		}
		release = KHA
		release = CHH
		release = TMD
		if = {
			limit = {
				NOT = {
					exists = OIR
				}
			}
			release = OIR
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = OIR
				}
				cede_province = OIR
			}
		}
		if = {
			limit = {
				NOT = {
					exists = BRT
				}
			}
			release = BRT
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = BRT
				}
				cede_province = BRT
			}
		}
		if = {
			limit = {
				NOT = {
					exists = HMI
				}
			}
			release = HMI
		}
		change_tag = MXI
		change_primary_culture = uriankhai
		release_all_subjects = yes
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.7g"
		trigger = {
			NOT = {
				exists = HMI
			}
		}
		release = KHA
		release = CHH
		release = TMD
		if = {
			limit = {
				NOT = {
					exists = OIR
				}
			}
			release = OIR
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = OIR
				}
				cede_province = OIR
			}
		}
		if = {
			limit = {
				NOT = {
					exists = BRT
				}
			}
			release = BRT
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = BRT
				}
				cede_province = BRT
			}
		}
		if = {
			limit = {
				NOT = {
					exists = MXI
				}
			}
			release = MXI
		}
		else = {
			every_owned_province = {
				limit = {
					is_core = MXI
				}
				cede_province = MXI
			}
		}
		change_tag = HMI
		change_primary_culture = chaghatai
		release_all_subjects = yes
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = red_turban.8
	title = "red_turban.8.t"
	desc = "red_turban.8.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		has_country_modifier = mongol_xingsheng
		tag = YUA
		check_variable = {
			which = "Demesne_in_the_Mandate_of_Heaven"
			value = 160
		}
	}
	option = {
		name = "red_turban.3a"
		remove_country_modifier = mongol_xingsheng
		every_subject_country = {
			limit = {
				OR = {
					culture_group = chinese_group
					culture_group = zuqun
					primary_culture = uriankhai
					NOT = {
						AND = {
							OR = {
								dynasty = "Qublaid"
								dynasty = "Ariq-Bkid"
								dynasty = "Chagatayid"
								dynasty = "Dayanid"
								dynasty = "gedeid"
								dynasty = "Toluid"
								dynasty = "Jochid"
								dynasty = "Shaybanid"
								dynasty = "Geray"
								dynasty = "Edigid"
								dynasty = "Janid"
								dynasty = "Qasarid"
							}
						}
					}
				}
			}
			country_event = {
				id = red_turban.20
			}
		}
		add_absolutism = 10
		north_china_superregion = {
			limit = {
				owned_by = ROOT
			}
			add_core = ROOT
		}
		north_china_superregion = {
			limit = {
				NOT = {
					owned_by = ROOT
				}
				NOT = {
					province_id = 5266
				}
			}
			add_permanent_claim = ROOT
		}
		east_china_superregion = {
			limit = {
				owned_by = ROOT
			}
			add_core = ROOT
		}
		east_china_superregion = {
			limit = {
				NOT = {
					owned_by = ROOT
				}
				NOT = {
					province_id = 5267
				}
			}
			add_permanent_claim = ROOT
		}
		southwest_china_superregion = {
			limit = {
				owned_by = ROOT
			}
			add_core = ROOT
		}
		southwest_china_superregion = {
			limit = {
				NOT = {
					owned_by = ROOT
				}
				NOT = {
					province_id = 5268
				}
			}
			add_permanent_claim = ROOT
		}
		country_event = {
			id = chinese_factions.1
		}
	}
}
country_event = {
	id = red_turban.9
	title = "red_turban.9.t"
	desc = "red_turban.9.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		has_country_flag = mandate_of_heaven_claimed
		any_province = {
			AND = {
				continent = east_asia
				OR = {
					superregion = north_china_superregion
					superregion = east_china_superregion
					superregion = southwest_china_superregion
				}
			}
			OR = {
				owned_by = ROOT
				owner = {
					NOT = {
						culture_group = chinese_group
					}
				}
			}
			any_core_country = {
				OR = {
					culture_group = chinese_group
					culture_group = zuqun
				}
				exists = no
			}
		}
	}
	option = {
		name = "red_turban.3a"
		every_province = {
			limit = {
				is_city = yes
				AND = {
					continent = east_asia
					OR = {
						superregion = north_china_superregion
						superregion = east_china_superregion
						superregion = southwest_china_superregion
					}
				}
			}
			every_core_country = {
				limit = {
					OR = {
						culture_group = chinese_group
						culture_group = zuqun
					}
					exists = no
				}
				remove_core = PREV
			}
			every_core_country = {
				limit = {
					OR = {
						culture_group = chinese_group
						culture_group = zuqun
					}
					exists = no
				}
				remove_core = PREV
			}
			every_core_country = {
				limit = {
					OR = {
						culture_group = chinese_group
						culture_group = zuqun
					}
					exists = no
				}
				remove_core = PREV
			}
		}
	}
}
country_event = {
	id = red_turban.10
	title = "red_turban.10.t"
	desc = "red_turban.10.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	hidden = yes
	trigger = {
		OR = {
			has_country_flag = barbarian_claimant_china
			has_country_flag = mandate_of_heaven_claimed
			has_country_flag = red_turban_reb
			has_country_modifier = mongol_xingsheng
		}
		any_owned_province = {
			AND = {
				continent = east_asia
				OR = {
					superregion = north_china_superregion
					superregion = east_china_superregion
					superregion = southwest_china_superregion
				}
			}
			NOT = {
				is_core = ROOT
			}
		}
	}
	option = {
		name = "red_turban.3a"
		every_owned_province = {
			limit = {
				AND = {
					continent = east_asia
					OR = {
						superregion = north_china_superregion
						superregion = east_china_superregion
						superregion = southwest_china_superregion
					}
				}
				NOT = {
					is_core = ROOT
				}
			}
			add_core = ROOT
		}
	}
}
country_event = {
	id = red_turban.11
	title = "red_turban.11.t"
	desc = "red_turban.11.d"
	picture = SIEGE_eventPicture
	hidden = yes
	trigger = {
		has_country_flag = red_turban_reb
		ai = yes
		is_at_war = no
		any_neighbor_country = {
			OR = {
				culture_group = chinese_group
				culture_group = zuqun
			}
			NOT = {
				truce_with = ROOT
			}
			NOT = {
				alliance_with = ROOT
			}
			NOT = {
				is_subject_of = ROOT
			}
			NOT = {
				overlord_of = ROOT
			}
			is_at_war = no
			ai = yes
		}
	}
	mean_time_to_happen = {
		months = 12
	}
	option = {
		name = "red_turban.3a"
		random_neighbor_country = {
			limit = {
				OR = {
					culture_group = chinese_group
					culture_group = zuqun
				}
				NOT = {
					truce_with = ROOT
				}
				NOT = {
					alliance_with = ROOT
				}
				NOT = {
					is_subject_of = ROOT
				}
				NOT = {
					overlord_of = ROOT
				}
				is_at_war = no
				ai = yes
			}
			declare_war_with_cb = {
				who = ROOT
				casus_belli = cb_chinese_civil_war
			}
		}
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = {
					treasury = 50
				}
			}
			modifier = {
				factor = 0
				num_of_loans = 10
			}
			modifier = {
				factor = 0
				NOT = {
					manpower = 10
				}
			}
		}
	}
	option = {
		name = "red_turban.3b"
	}
}
country_event = {
	id = red_turban.12
	title = "red_turban.12.t"
	desc = "red_turban.12.d"
	picture = SIEGE_eventPicture
	hidden = yes
	trigger = {
		had_country_flag = {
			flag = red_turban_reb
			days = 7300
		}
	}
	mean_time_to_happen = {
		months = 6
	}
	option = {
		name = "red_turban.3a"
		clr_country_flag = red_turban_reb
	}
}
country_event = {
	id = red_turban.13
	title = "red_turban.13.t"
	desc = {
		trigger = {
			OR = {
				AND = {
					OR = {
						AND = {
							OR = {
								culture_group = chinese_group
								has_country_flag = barbarian_claimant_china
							}
							has_reform = celestial_empire
						}
						has_reform = celestial_empire_legacy
					}
				}
				government = tribal
			}
		}
		desc = red_turban.13.db
	}
	desc = {
		trigger = {
			government = monarchy
		}
		desc = red_turban.13.da
	}
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = sinification
				}
				set_variable = {
					which = tribes_loyalty_removed_a
					value = 75
				}
				set_variable = {
					which = nobles_loyalty_added_a
					value = 15
				}
			}
		}
	}
	option = {
		name = "red_turban.13a"
		trigger = {
			AND = {
				OR = {
					AND = {
						OR = {
							culture_group = chinese_group
							has_country_flag = barbarian_claimant_china
						}
						has_reform = celestial_empire
					}
					has_reform = celestial_empire_legacy
				}
			}
			NOT = {
				has_country_flag = sinification
			}
		}
		if = {
			limit = {
				government_rank = 6
			}
			add_country_modifier = {
				name = "territorial_princes"
				duration = -1
			}
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = "red_turban.13c"
		trigger = {
			NOT = {
				AND = {
					OR = {
						AND = {
							has_reform = steppe_horde
							NOT = {
								has_country_modifier = title_6
								has_country_flag = title_6
							}
						}
						has_reform = steppe_horde_legacy
					}
				}
			}
			NOT = {
				AND = {
					OR = {
						AND = {
							culture_group = japanese
							has_reform = celestial_empire
						}
						has_reform = daimyo_legacy
						has_reform = shogunate_legacy
						has_reform = indep_daimyo_legacy
					}
				}
			}
		}
		change_government = monarchy
		add_government_reform = celestial_empire
		add_government_reform = delegated_rulers
		add_government_reform = appointed_elite
		set_legacy_government = indep_daimyo_legacy
		if = {
			limit = {
				government_rank = 6
			}
			add_country_modifier = {
				name = "territorial_princes"
				duration = -1
			}
		}
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = "red_turban.13d"
		trigger = {
			NOT = {
				AND = {
					OR = {
						AND = {
							has_reform = steppe_horde
							NOT = {
								has_country_modifier = title_6
								has_country_flag = title_6
							}
						}
						has_reform = steppe_horde_legacy
					}
				}
			}
			NOT = {
				AND = {
					OR = {
						AND = {
							OR = {
								culture_group = chinese_group
								has_country_flag = barbarian_claimant_china
							}
							has_reform = celestial_empire
						}
						has_reform = celestial_empire_legacy
					}
				}
			}
		}
		change_government = monarchy
		add_government_reform = celestial_empire
		add_government_reform = bureaucracy
		add_government_reform = appointed_elite
		set_legacy_government = celestial_empire_legacy
		ai_chance = {
			factor = 1
		}
	}
	option = {
		name = "red_turban.13e"
		trigger = {
			AND = {
				OR = {
					AND = {
						has_reform = steppe_horde
						NOT = {
							has_country_modifier = title_6
							has_country_flag = title_6
						}
					}
					has_reform = steppe_horde_legacy
				}
			}
		}
		change_government = monarchy
		add_government_reform = celestial_empire
		add_government_reform = delegated_rulers
		add_government_reform = appointed_elite
		set_legacy_government = indep_daimyo_legacy
		if = {
			limit = {
				government_rank = 6
			}
			add_country_modifier = {
				name = "territorial_princes"
				duration = -1
			}
		}
		ai_chance = {
			factor = 1
			modifier = {
				factor = 50
				culture_group = altaic
			}
		}
	}
	after = {
		country_event = {
			id = tianxia.120
			days = 5
		}
		if = {
			limit = {
				has_country_flag = sinification
			}
			clr_country_flag = sinification
			if = {
				limit = {
					check_variable = {
						which = estate_tribals_weight_share
						value = 0.01
					}
				}
				custom_tooltip = estate_tribes_loyalty_removed_a
				hidden_effect = {
					set_variable = {
						which = tribes_loyalty_removed
						value = 0
					}
					set_variable = {
						which = tribes_loyalty_removed
						which = tribes_loyalty_removed_a
					}
					if = {
						limit = {
							check_variable = {
								which = tribes_loyalty_removed
								value = 64
							}
						}
						add_estate_loyalty = {
							estate = estate_tribes
							loyalty = -64
						}
						change_variable = {
							which = estate_tribals_loyalty
							value = -0.64
						}
						subtract_variable = {
							which = tribes_loyalty_removed
							value = 64
						}
					}
					if = {
						limit = {
							check_variable = {
								which = tribes_loyalty_removed
								value = 32
							}
						}
						add_estate_loyalty = {
							estate = estate_tribes
							loyalty = -32
						}
						change_variable = {
							which = estate_tribals_loyalty
							value = -0.32
						}
						subtract_variable = {
							which = tribes_loyalty_removed
							value = 32
						}
					}
					if = {
						limit = {
							check_variable = {
								which = tribes_loyalty_removed
								value = 16
							}
						}
						add_estate_loyalty = {
							estate = estate_tribes
							loyalty = -16
						}
						change_variable = {
							which = estate_tribals_loyalty
							value = -0.16
						}
						subtract_variable = {
							which = tribes_loyalty_removed
							value = 16
						}
					}
					if = {
						limit = {
							check_variable = {
								which = tribes_loyalty_removed
								value = 8
							}
						}
						add_estate_loyalty = {
							estate = estate_tribes
							loyalty = -8
						}
						change_variable = {
							which = estate_tribals_loyalty
							value = -0.08
						}
						subtract_variable = {
							which = tribes_loyalty_removed
							value = 8
						}
					}
					if = {
						limit = {
							check_variable = {
								which = tribes_loyalty_removed
								value = 4
							}
						}
						add_estate_loyalty = {
							estate = estate_tribes
							loyalty = -4
						}
						change_variable = {
							which = estate_tribals_loyalty
							value = -0.04
						}
						subtract_variable = {
							which = tribes_loyalty_removed
							value = 4
						}
					}
					if = {
						limit = {
							check_variable = {
								which = tribes_loyalty_removed
								value = 2
							}
						}
						add_estate_loyalty = {
							estate = estate_tribes
							loyalty = -2
						}
						change_variable = {
							which = estate_tribals_loyalty
							value = -0.02
						}
						subtract_variable = {
							which = tribes_loyalty_removed
							value = 2
						}
					}
					if = {
						limit = {
							check_variable = {
								which = tribes_loyalty_removed
								value = 1
							}
						}
						add_estate_loyalty = {
							estate = estate_tribes
							loyalty = -1
						}
						change_variable = {
							which = estate_tribals_loyalty
							value = -0.01
						}
						subtract_variable = {
							which = tribes_loyalty_removed
							value = 1
						}
					}
					if = {
						limit = {
							NOT = {
								check_variable = {
									which = estate_tribals_loyalty
									value = 0.01
								}
							}
						}
						set_variable = {
							which = estate_tribals_loyalty
							value = 0.01
						}
					}
					every_owned_province = {
						limit = {
							has_province_flag = tribals_control_province
						}
						hidden_effect = {
							set_variable = {
								which = estate_tribals_loyalty
								which = owner
							}
							set_variable = {
								which = EstateProv_UnrestSave
								which = EstateProv_Unrest
							}
							set_variable = {
								which = EstateProv_Unrest
								which = estate_tribals_loyalty
							}
							set_variable = {
								which = estate_tribals_loyalty
								value = 0
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest
										value = 0.6
									}
								}
								set_province_flag = loss
								subtract_variable = {
									which = EstateProv_Unrest
									value = 0.6
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_Unrest
											value = 0.401
										}
									}
								}
								set_province_flag = gain
								subtract_variable = {
									which = EstateProv_Unrest
									value = 0.4
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = -1
								}
							}
							else = {
								set_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 16.62
							}
							set_variable = {
								which = inp_m_exp
								which = EstateProv_Unrest
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = inp_m_exp
											value = 0
										}
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
								change_variable = {
									which = err.math.exp.undef
									value = 1
								}
							}
							else_if = {
								limit = {
									is_variable_equal = {
										which = inp_m_exp
										value = 0
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
							}
							else = {
								set_variable = {
									which = exp_m_exp
									value = 1.7
								}
								set_variable = {
									which = int_m_exp
									which = exp_m_exp
								}
								multiply_variable = {
									which = int_m_exp
									value = 0.001
								}
								multiply_variable = {
									which = int_m_exp
									value = 1000
								}
								set_variable = {
									which = dec_m_exp
									which = exp_m_exp
								}
								subtract_variable = {
									which = dec_m_exp
									which = int_m_exp
								}
								set_variable = {
									which = inp
									which = inp_m_exp
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = inp
												value = 0.001
											}
										}
									}
									set_variable = {
										which = ln_val
										value = 0
									}
									change_variable = {
										which = err.math.ln.undef
										value = 1
									}
								}
								else = {
									set_variable = {
										which = ln_val
										value = 0
									}
									set_variable = {
										which = scale
										value = 10000
									}
									set_variable = {
										which = k
										value = 0
									}
									set_variable = {
										which = k_div
										which = scale
									}
									while = {
										limit = {
											check_variable = {
												which = inp
												value = 2.001
											}
										}
										multiply_variable = {
											which = inp
											value = 0.5
										}
										change_variable = {
											which = ln_val
											value = 6931.472
										}
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = inp
													value = 1
												}
											}
										}
										multiply_variable = {
											which = inp
											value = 2
										}
										subtract_variable = {
											which = ln_val
											value = 6931.472
										}
									}
									multiply_variable = {
										which = inp
										which = scale
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = k
													value = 10
												}
											}
										}
										change_variable = {
											which = k
											value = 1
										}
										multiply_variable = {
											which = k_div
											value = 0.5
										}
										set_variable = {
											which = t_m_ln
											which = scale
										}
										change_variable = {
											which = t_m_ln
											which = k_div
										}
										if = {
											limit = {
												check_variable = {
													which = inp
													which = t_m_ln
												}
											}
											divide_variable = {
												which = inp
												which = t_m_ln
											}
											multiply_variable = {
												which = inp
												which = scale
											}
											set_variable = {
												which = lt_ind
												which = k
											}
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 6
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 8
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 9
															}
														}
														if = {
															limit = {
																check_variable = {
																	which = lt_ind
																	value = 10
																}
															}
															set_variable = {
																which = lt_val
																value = 9.761
															}
														}
														else = {
															set_variable = {
																which = lt_val
																value = 19.512
															}
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 38.986
														}
													}
												}
												else = {
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 7
															}
														}
														set_variable = {
															which = lt_val
															value = 77.821
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 155.042
														}
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 3
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 4
															}
														}
														if = {
															limit = {
																check_variable = {
																	which = lt_ind
																	value = 5
																}
															}
															set_variable = {
																which = lt_val
																value = 307.717
															}
														}
														else = {
															set_variable = {
																which = lt_val
																value = 606.246
															}
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 1177.83
														}
													}
												}
												else = {
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 2
															}
														}
														set_variable = {
															which = lt_val
															value = 2231.436
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 4054.651
														}
													}
												}
											}
											set_variable = {
												which = lt_ind
												value = 0
											}
											change_variable = {
												which = ln_val
												which = lt_val
											}
										}
										set_variable = {
											which = t_m_ln
											value = 0
										}
									}
									divide_variable = {
										which = ln_val
										value = 10000
									}
									set_variable = {
										which = scale
										value = 0
									}
									set_variable = {
										which = k
										value = 0
									}
									set_variable = {
										which = k_div
										value = 0
									}
									set_variable = {
										which = lt_val
										value = 0
									}
								}
								set_variable = {
									which = inp
									value = 0
								}
								multiply_variable = {
									which = dec_m_exp
									which = ln_val
								}
								set_variable = {
									which = math.e.expnt
									which = dec_m_exp
								}
								set_variable = {
									which = math.e.return
									value = 1
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = math.e.expnt
												value = -6.999
											}
										}
									}
									set_variable = {
										which = exp_val
										value = 0
									}
								}
								else = {
									while = {
										limit = {
											check_variable = {
												which = math.e.expnt
												value = 1
											}
										}
										subtract_variable = {
											which = math.e.expnt
											value = 1
										}
										multiply_variable = {
											which = math.e.return
											value = 2.718
										}
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = math.e.expnt
													value = 0
												}
											}
										}
										change_variable = {
											which = math.e.expnt
											value = 1
										}
										divide_variable = {
											which = math.e.return
											value = 2.718
										}
									}
									set_variable = {
										which = math.e.sm
										value = 1
									}
									if = {
										limit = {
											NOT = {
												is_variable_equal = {
													which = math.e.expnt
													value = 0
												}
											}
										}
										set_variable = {
											which = math.e.sq
											which = math.e.expnt
										}
										multiply_variable = {
											which = math.e.sq
											which = math.e.expnt
										}
										set_variable = {
											which = math.e.fct
											value = 2
										}
										set_variable = {
											which = math.e.fctl
											value = 2
										}
										set_variable = {
											which = math.e.a1
											which = math.e.sq
										}
										set_variable = {
											which = math.e.a2
											which = math.e.expnt
										}
										set_variable = {
											which = math.e.a3
											value = 2
										}
										set_variable = {
											which = math.e.tmp
											which = math.e.a2
										}
										multiply_variable = {
											which = math.e.tmp
											which = math.e.a3
										}
										change_variable = {
											which = math.e.tmp
											which = math.e.a1
										}
										divide_variable = {
											which = math.e.tmp
											which = math.e.fct
										}
										change_variable = {
											which = math.e.sm
											which = math.e.tmp
										}
										set_variable = {
											which = math.e.prec
											value = 3
										}
										subtract_variable = {
											which = math.e.prec
											value = 1
										}
										while = {
											limit = {
												check_variable = {
													which = math.e.prec
													value = 1
												}
											}
											subtract_variable = {
												which = math.e.prec
												value = 1
											}
											change_variable = {
												which = math.e.fctl
												value = 1
											}
											multiply_variable = {
												which = math.e.fct
												which = math.e.fctl
											}
											change_variable = {
												which = math.e.fctl
												value = 1
											}
											multiply_variable = {
												which = math.e.fct
												which = math.e.fctl
											}
											multiply_variable = {
												which = math.e.a1
												which = math.e.sq
											}
											multiply_variable = {
												which = math.e.a2
												which = math.e.sq
											}
											change_variable = {
												which = math.e.a3
												value = 2
											}
											set_variable = {
												which = math.e.tmp
												which = math.e.a2
											}
											multiply_variable = {
												which = math.e.tmp
												which = math.e.a3
											}
											change_variable = {
												which = math.e.tmp
												which = math.e.a1
											}
											divide_variable = {
												which = math.e.tmp
												which = math.e.fct
											}
											change_variable = {
												which = math.e.sm
												which = math.e.tmp
											}
										}
									}
									multiply_variable = {
										which = math.e.return
										which = math.e.sm
									}
									set_variable = {
										which = exp_val
										which = math.e.return
									}
									set_variable = {
										which = math.e.sm
										value = 0
									}
									set_variable = {
										which = math.e.tmp
										value = 0
									}
									set_variable = {
										which = math.e.a1
										value = 0
									}
									set_variable = {
										which = math.e.a2
										value = 0
									}
									set_variable = {
										which = math.e.a3
										value = 0
									}
									set_variable = {
										which = math.e.fctl
										value = 0
									}
									set_variable = {
										which = math.e.fct
										value = 0
									}
									set_variable = {
										which = math.e.prec
										value = 0
									}
									set_variable = {
										which = math.e.sq
										value = 0
									}
								}
								set_variable = {
									which = math.e.expnt
									value = 0
								}
								set_variable = {
									which = math.e.return
									value = 0
								}
								while = {
									limit = {
										check_variable = {
											which = int_m_exp
											value = 1
										}
									}
									subtract_variable = {
										which = int_m_exp
										value = 1
									}
									multiply_variable = {
										which = exp_val
										which = inp_m_exp
									}
								}
								set_variable = {
									which = exp_m_exp
									value = 0
								}
								set_variable = {
									which = int_m_exp
									value = 0
								}
								set_variable = {
									which = dec_m_exp
									value = 0
								}
								set_variable = {
									which = ln_val
									value = 0
								}
							}
							set_variable = {
								which = inp_m_exp
								value = 0
							}
							set_variable = {
								which = EstateProv_Unrest
								which = exp_val
							}
							set_variable = {
								which = exp_val
								value = 0
							}
							export_to_variable = {
								which = EstateProv_LA
								value = local_autonomy
							}
							multiply_variable = {
								which = EstateProv_LA
								value = 0.008
							}
							change_variable = {
								which = EstateProv_LA
								value = 0.2
							}
							multiply_variable = {
								which = EstateProv_Unrest
								which = EstateProv_LA
							}
							set_variable = {
								which = EstateProv_Unrest_Inp
								which = EstateProv_Unrest
							}
							if = {
								limit = {
									has_province_flag = loss
								}
								clr_province_flag = loss
								multiply_variable = {
									which = EstateProv_Unrest
									value = -1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 0.1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 10
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 25.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_25.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_25.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_25.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_25.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 12.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_12.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_12.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_12.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_12.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 6.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_6.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_6.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_6.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_6.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 3.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_3.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_3.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_3.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_3.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 1.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_1.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_1.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_1.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_1.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.1
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.1
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.1
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.1
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.1
								}
							}
							else_if = {
								limit = {
									has_province_flag = gain
								}
								clr_province_flag = gain
								multiply_variable = {
									which = EstateProv_Unrest
									value = 1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 0.1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 10
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 25.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_25.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_25.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_25.6
									}
									remove_province_modifier = EstateProv_UnrestGain_25.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 12.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_12.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_12.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_12.8
									}
									remove_province_modifier = EstateProv_UnrestGain_12.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 6.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_6.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_6.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_6.4
									}
									remove_province_modifier = EstateProv_UnrestGain_6.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 3.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_3.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_3.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_3.2
									}
									remove_province_modifier = EstateProv_UnrestGain_3.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 1.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_1.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_1.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_1.6
									}
									remove_province_modifier = EstateProv_UnrestGain_1.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.8
									}
									remove_province_modifier = EstateProv_UnrestGain_0.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.4
									}
									remove_province_modifier = EstateProv_UnrestGain_0.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.2
									}
									remove_province_modifier = EstateProv_UnrestGain_0.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.1
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.1
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.1
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.1
									}
									remove_province_modifier = EstateProv_UnrestGain_0.1
								}
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_UnrestSave
										value = 0.001
									}
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = EstateProv_Unrest
												value = 0.001
											}
										}
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_25.6
										}
										remove_province_modifier = EstateProv_UnrestGain_25.6
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_12.8
										}
										remove_province_modifier = EstateProv_UnrestGain_12.8
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_6.4
										}
										remove_province_modifier = EstateProv_UnrestGain_6.4
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_3.2
										}
										remove_province_modifier = EstateProv_UnrestGain_3.2
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_1.6
										}
										remove_province_modifier = EstateProv_UnrestGain_1.6
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.8
										}
										remove_province_modifier = EstateProv_UnrestGain_0.8
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.4
										}
										remove_province_modifier = EstateProv_UnrestGain_0.4
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.2
										}
										remove_province_modifier = EstateProv_UnrestGain_0.2
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.1
										}
										remove_province_modifier = EstateProv_UnrestGain_0.1
									}
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_UnrestSave
											value = 0
										}
									}
									check_variable = {
										which = EstateProv_Unrest
										value = 0
									}
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_25.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_25.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_12.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_12.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_6.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_6.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_3.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_3.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_1.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_1.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.1
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.1
								}
							}
							if = {
								limit = {
									is_variable_equal = {
										which = EstateProv_Unrest
										value = 0
									}
								}
								set_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							set_variable = {
								which = EstateProv_UnrestSave
								value = 0
							}
							set_variable = {
								which = EstateProv_LA
								value = 0
							}
							set_variable = {
								which = EstateProv_Unrest_Inp
								value = 0
							}
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = estate_greater_nobles_weight_share
						value = 0.05
					}
					OR = {
						check_variable = {
							which = estate_greater_nobles_weight_share
							which = estate_lesser_nobles_weight_share
						}
						check_variable = {
							which = estate_greater_nobles_weight_share
							value = 0.10
						}
					}
				}
				custom_tooltip = t_estate_greater_nobles_loyalty_added_a
				hidden_effect = {
					set_variable = {
						which = greater_nobles_loyalty_added
						value = 0
					}
					set_variable = {
						which = greater_nobles_loyalty_added
						which = nobles_loyalty_added_a
					}
					if = {
						limit = {
							check_variable = {
								which = greater_nobles_loyalty_added
								value = 64
							}
						}
						add_estate_loyalty = {
							estate = estate_greater_nobles
							loyalty = 64
						}
						change_variable = {
							which = estate_greater_nobles_loyalty
							value = 0.64
						}
						subtract_variable = {
							which = greater_nobles_loyalty_added
							value = 64
						}
					}
					if = {
						limit = {
							check_variable = {
								which = greater_nobles_loyalty_added
								value = 32
							}
						}
						add_estate_loyalty = {
							estate = estate_greater_nobles
							loyalty = 32
						}
						change_variable = {
							which = estate_greater_nobles_loyalty
							value = 0.32
						}
						subtract_variable = {
							which = greater_nobles_loyalty_added
							value = 32
						}
					}
					if = {
						limit = {
							check_variable = {
								which = greater_nobles_loyalty_added
								value = 16
							}
						}
						add_estate_loyalty = {
							estate = estate_greater_nobles
							loyalty = 16
						}
						change_variable = {
							which = estate_greater_nobles_loyalty
							value = 0.16
						}
						subtract_variable = {
							which = greater_nobles_loyalty_added
							value = 16
						}
					}
					if = {
						limit = {
							check_variable = {
								which = greater_nobles_loyalty_added
								value = 8
							}
						}
						add_estate_loyalty = {
							estate = estate_greater_nobles
							loyalty = 8
						}
						change_variable = {
							which = estate_greater_nobles_loyalty
							value = 0.08
						}
						subtract_variable = {
							which = greater_nobles_loyalty_added
							value = 8
						}
					}
					if = {
						limit = {
							check_variable = {
								which = greater_nobles_loyalty_added
								value = 4
							}
						}
						add_estate_loyalty = {
							estate = estate_greater_nobles
							loyalty = 4
						}
						change_variable = {
							which = estate_greater_nobles_loyalty
							value = 0.04
						}
						subtract_variable = {
							which = greater_nobles_loyalty_added
							value = 4
						}
					}
					if = {
						limit = {
							check_variable = {
								which = greater_nobles_loyalty_added
								value = 2
							}
						}
						add_estate_loyalty = {
							estate = estate_greater_nobles
							loyalty = 2
						}
						change_variable = {
							which = estate_greater_nobles_loyalty
							value = 0.02
						}
						subtract_variable = {
							which = greater_nobles_loyalty_added
							value = 2
						}
					}
					if = {
						limit = {
							check_variable = {
								which = greater_nobles_loyalty_added
								value = 1
							}
						}
						add_estate_loyalty = {
							estate = estate_greater_nobles
							loyalty = 1
						}
						change_variable = {
							which = estate_greater_nobles_loyalty
							value = 0.01
						}
						subtract_variable = {
							which = greater_nobles_loyalty_added
							value = 1
						}
					}
					if = {
						limit = {
							check_variable = {
								which = estate_greater_nobles_loyalty
								value = 1
							}
						}
						set_variable = {
							which = estate_greater_nobles_loyalty
							value = 1
						}
					}
					every_owned_province = {
						limit = {
							has_province_flag = greater_nobles_control_province
						}
						hidden_effect = {
							set_variable = {
								which = estate_greater_nobles_loyalty
								which = owner
							}
							set_variable = {
								which = EstateProv_UnrestSave
								which = EstateProv_Unrest
							}
							set_variable = {
								which = EstateProv_Unrest
								which = estate_greater_nobles_loyalty
							}
							set_variable = {
								which = estate_greater_nobles_loyalty
								value = 0
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest
										value = 0.6
									}
								}
								set_province_flag = loss
								subtract_variable = {
									which = EstateProv_Unrest
									value = 0.6
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_Unrest
											value = 0.401
										}
									}
								}
								set_province_flag = gain
								subtract_variable = {
									which = EstateProv_Unrest
									value = 0.4
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = -1
								}
							}
							else = {
								set_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 16.62
							}
							set_variable = {
								which = inp_m_exp
								which = EstateProv_Unrest
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = inp_m_exp
											value = 0
										}
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
								change_variable = {
									which = err.math.exp.undef
									value = 1
								}
							}
							else_if = {
								limit = {
									is_variable_equal = {
										which = inp_m_exp
										value = 0
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
							}
							else = {
								set_variable = {
									which = exp_m_exp
									value = 1.7
								}
								set_variable = {
									which = int_m_exp
									which = exp_m_exp
								}
								multiply_variable = {
									which = int_m_exp
									value = 0.001
								}
								multiply_variable = {
									which = int_m_exp
									value = 1000
								}
								set_variable = {
									which = dec_m_exp
									which = exp_m_exp
								}
								subtract_variable = {
									which = dec_m_exp
									which = int_m_exp
								}
								set_variable = {
									which = inp
									which = inp_m_exp
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = inp
												value = 0.001
											}
										}
									}
									set_variable = {
										which = ln_val
										value = 0
									}
									change_variable = {
										which = err.math.ln.undef
										value = 1
									}
								}
								else = {
									set_variable = {
										which = ln_val
										value = 0
									}
									set_variable = {
										which = scale
										value = 10000
									}
									set_variable = {
										which = k
										value = 0
									}
									set_variable = {
										which = k_div
										which = scale
									}
									while = {
										limit = {
											check_variable = {
												which = inp
												value = 2.001
											}
										}
										multiply_variable = {
											which = inp
											value = 0.5
										}
										change_variable = {
											which = ln_val
											value = 6931.472
										}
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = inp
													value = 1
												}
											}
										}
										multiply_variable = {
											which = inp
											value = 2
										}
										subtract_variable = {
											which = ln_val
											value = 6931.472
										}
									}
									multiply_variable = {
										which = inp
										which = scale
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = k
													value = 10
												}
											}
										}
										change_variable = {
											which = k
											value = 1
										}
										multiply_variable = {
											which = k_div
											value = 0.5
										}
										set_variable = {
											which = t_m_ln
											which = scale
										}
										change_variable = {
											which = t_m_ln
											which = k_div
										}
										if = {
											limit = {
												check_variable = {
													which = inp
													which = t_m_ln
												}
											}
											divide_variable = {
												which = inp
												which = t_m_ln
											}
											multiply_variable = {
												which = inp
												which = scale
											}
											set_variable = {
												which = lt_ind
												which = k
											}
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 6
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 8
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 9
															}
														}
														if = {
															limit = {
																check_variable = {
																	which = lt_ind
																	value = 10
																}
															}
															set_variable = {
																which = lt_val
																value = 9.761
															}
														}
														else = {
															set_variable = {
																which = lt_val
																value = 19.512
															}
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 38.986
														}
													}
												}
												else = {
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 7
															}
														}
														set_variable = {
															which = lt_val
															value = 77.821
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 155.042
														}
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 3
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 4
															}
														}
														if = {
															limit = {
																check_variable = {
																	which = lt_ind
																	value = 5
																}
															}
															set_variable = {
																which = lt_val
																value = 307.717
															}
														}
														else = {
															set_variable = {
																which = lt_val
																value = 606.246
															}
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 1177.83
														}
													}
												}
												else = {
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 2
															}
														}
														set_variable = {
															which = lt_val
															value = 2231.436
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 4054.651
														}
													}
												}
											}
											set_variable = {
												which = lt_ind
												value = 0
											}
											change_variable = {
												which = ln_val
												which = lt_val
											}
										}
										set_variable = {
											which = t_m_ln
											value = 0
										}
									}
									divide_variable = {
										which = ln_val
										value = 10000
									}
									set_variable = {
										which = scale
										value = 0
									}
									set_variable = {
										which = k
										value = 0
									}
									set_variable = {
										which = k_div
										value = 0
									}
									set_variable = {
										which = lt_val
										value = 0
									}
								}
								set_variable = {
									which = inp
									value = 0
								}
								multiply_variable = {
									which = dec_m_exp
									which = ln_val
								}
								set_variable = {
									which = math.e.expnt
									which = dec_m_exp
								}
								set_variable = {
									which = math.e.return
									value = 1
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = math.e.expnt
												value = -6.999
											}
										}
									}
									set_variable = {
										which = exp_val
										value = 0
									}
								}
								else = {
									while = {
										limit = {
											check_variable = {
												which = math.e.expnt
												value = 1
											}
										}
										subtract_variable = {
											which = math.e.expnt
											value = 1
										}
										multiply_variable = {
											which = math.e.return
											value = 2.718
										}
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = math.e.expnt
													value = 0
												}
											}
										}
										change_variable = {
											which = math.e.expnt
											value = 1
										}
										divide_variable = {
											which = math.e.return
											value = 2.718
										}
									}
									set_variable = {
										which = math.e.sm
										value = 1
									}
									if = {
										limit = {
											NOT = {
												is_variable_equal = {
													which = math.e.expnt
													value = 0
												}
											}
										}
										set_variable = {
											which = math.e.sq
											which = math.e.expnt
										}
										multiply_variable = {
											which = math.e.sq
											which = math.e.expnt
										}
										set_variable = {
											which = math.e.fct
											value = 2
										}
										set_variable = {
											which = math.e.fctl
											value = 2
										}
										set_variable = {
											which = math.e.a1
											which = math.e.sq
										}
										set_variable = {
											which = math.e.a2
											which = math.e.expnt
										}
										set_variable = {
											which = math.e.a3
											value = 2
										}
										set_variable = {
											which = math.e.tmp
											which = math.e.a2
										}
										multiply_variable = {
											which = math.e.tmp
											which = math.e.a3
										}
										change_variable = {
											which = math.e.tmp
											which = math.e.a1
										}
										divide_variable = {
											which = math.e.tmp
											which = math.e.fct
										}
										change_variable = {
											which = math.e.sm
											which = math.e.tmp
										}
										set_variable = {
											which = math.e.prec
											value = 3
										}
										subtract_variable = {
											which = math.e.prec
											value = 1
										}
										while = {
											limit = {
												check_variable = {
													which = math.e.prec
													value = 1
												}
											}
											subtract_variable = {
												which = math.e.prec
												value = 1
											}
											change_variable = {
												which = math.e.fctl
												value = 1
											}
											multiply_variable = {
												which = math.e.fct
												which = math.e.fctl
											}
											change_variable = {
												which = math.e.fctl
												value = 1
											}
											multiply_variable = {
												which = math.e.fct
												which = math.e.fctl
											}
											multiply_variable = {
												which = math.e.a1
												which = math.e.sq
											}
											multiply_variable = {
												which = math.e.a2
												which = math.e.sq
											}
											change_variable = {
												which = math.e.a3
												value = 2
											}
											set_variable = {
												which = math.e.tmp
												which = math.e.a2
											}
											multiply_variable = {
												which = math.e.tmp
												which = math.e.a3
											}
											change_variable = {
												which = math.e.tmp
												which = math.e.a1
											}
											divide_variable = {
												which = math.e.tmp
												which = math.e.fct
											}
											change_variable = {
												which = math.e.sm
												which = math.e.tmp
											}
										}
									}
									multiply_variable = {
										which = math.e.return
										which = math.e.sm
									}
									set_variable = {
										which = exp_val
										which = math.e.return
									}
									set_variable = {
										which = math.e.sm
										value = 0
									}
									set_variable = {
										which = math.e.tmp
										value = 0
									}
									set_variable = {
										which = math.e.a1
										value = 0
									}
									set_variable = {
										which = math.e.a2
										value = 0
									}
									set_variable = {
										which = math.e.a3
										value = 0
									}
									set_variable = {
										which = math.e.fctl
										value = 0
									}
									set_variable = {
										which = math.e.fct
										value = 0
									}
									set_variable = {
										which = math.e.prec
										value = 0
									}
									set_variable = {
										which = math.e.sq
										value = 0
									}
								}
								set_variable = {
									which = math.e.expnt
									value = 0
								}
								set_variable = {
									which = math.e.return
									value = 0
								}
								while = {
									limit = {
										check_variable = {
											which = int_m_exp
											value = 1
										}
									}
									subtract_variable = {
										which = int_m_exp
										value = 1
									}
									multiply_variable = {
										which = exp_val
										which = inp_m_exp
									}
								}
								set_variable = {
									which = exp_m_exp
									value = 0
								}
								set_variable = {
									which = int_m_exp
									value = 0
								}
								set_variable = {
									which = dec_m_exp
									value = 0
								}
								set_variable = {
									which = ln_val
									value = 0
								}
							}
							set_variable = {
								which = inp_m_exp
								value = 0
							}
							set_variable = {
								which = EstateProv_Unrest
								which = exp_val
							}
							set_variable = {
								which = exp_val
								value = 0
							}
							export_to_variable = {
								which = EstateProv_LA
								value = local_autonomy
							}
							multiply_variable = {
								which = EstateProv_LA
								value = 0.008
							}
							change_variable = {
								which = EstateProv_LA
								value = 0.2
							}
							multiply_variable = {
								which = EstateProv_Unrest
								which = EstateProv_LA
							}
							set_variable = {
								which = EstateProv_Unrest_Inp
								which = EstateProv_Unrest
							}
							if = {
								limit = {
									has_province_flag = loss
								}
								clr_province_flag = loss
								multiply_variable = {
									which = EstateProv_Unrest
									value = -1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 0.1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 10
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 25.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_25.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_25.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_25.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_25.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 12.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_12.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_12.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_12.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_12.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 6.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_6.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_6.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_6.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_6.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 3.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_3.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_3.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_3.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_3.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 1.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_1.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_1.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_1.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_1.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.1
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.1
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.1
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.1
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.1
								}
							}
							else_if = {
								limit = {
									has_province_flag = gain
								}
								clr_province_flag = gain
								multiply_variable = {
									which = EstateProv_Unrest
									value = 1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 0.1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 10
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 25.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_25.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_25.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_25.6
									}
									remove_province_modifier = EstateProv_UnrestGain_25.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 12.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_12.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_12.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_12.8
									}
									remove_province_modifier = EstateProv_UnrestGain_12.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 6.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_6.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_6.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_6.4
									}
									remove_province_modifier = EstateProv_UnrestGain_6.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 3.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_3.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_3.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_3.2
									}
									remove_province_modifier = EstateProv_UnrestGain_3.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 1.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_1.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_1.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_1.6
									}
									remove_province_modifier = EstateProv_UnrestGain_1.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.8
									}
									remove_province_modifier = EstateProv_UnrestGain_0.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.4
									}
									remove_province_modifier = EstateProv_UnrestGain_0.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.2
									}
									remove_province_modifier = EstateProv_UnrestGain_0.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.1
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.1
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.1
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.1
									}
									remove_province_modifier = EstateProv_UnrestGain_0.1
								}
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_UnrestSave
										value = 0.001
									}
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = EstateProv_Unrest
												value = 0.001
											}
										}
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_25.6
										}
										remove_province_modifier = EstateProv_UnrestGain_25.6
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_12.8
										}
										remove_province_modifier = EstateProv_UnrestGain_12.8
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_6.4
										}
										remove_province_modifier = EstateProv_UnrestGain_6.4
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_3.2
										}
										remove_province_modifier = EstateProv_UnrestGain_3.2
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_1.6
										}
										remove_province_modifier = EstateProv_UnrestGain_1.6
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.8
										}
										remove_province_modifier = EstateProv_UnrestGain_0.8
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.4
										}
										remove_province_modifier = EstateProv_UnrestGain_0.4
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.2
										}
										remove_province_modifier = EstateProv_UnrestGain_0.2
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.1
										}
										remove_province_modifier = EstateProv_UnrestGain_0.1
									}
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_UnrestSave
											value = 0
										}
									}
									check_variable = {
										which = EstateProv_Unrest
										value = 0
									}
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_25.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_25.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_12.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_12.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_6.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_6.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_3.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_3.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_1.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_1.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.1
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.1
								}
							}
							if = {
								limit = {
									is_variable_equal = {
										which = EstateProv_Unrest
										value = 0
									}
								}
								set_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							set_variable = {
								which = EstateProv_UnrestSave
								value = 0
							}
							set_variable = {
								which = EstateProv_LA
								value = 0
							}
							set_variable = {
								which = EstateProv_Unrest_Inp
								value = 0
							}
						}
					}
				}
			}
			if = {
				limit = {
					check_variable = {
						which = estate_lesser_nobles_weight_share
						value = 0.15
					}
					OR = {
						check_variable = {
							which = estate_lesser_nobles_weight_share
							which = estate_greater_nobles_weight_share
						}
						check_variable = {
							which = estate_lesser_nobles_weight_share
							value = 0.25
						}
					}
				}
				custom_tooltip = t_estate_lesser_nobles_loyalty_added_a
				hidden_effect = {
					set_variable = {
						which = lesser_nobles_loyalty_added
						value = 0
					}
					set_variable = {
						which = lesser_nobles_loyalty_added
						which = nobles_loyalty_added_a
					}
					if = {
						limit = {
							check_variable = {
								which = lesser_nobles_loyalty_added
								value = 64
							}
						}
						add_estate_loyalty = {
							estate = estate_lesser_nobles
							loyalty = 64
						}
						change_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0.64
						}
						subtract_variable = {
							which = lesser_nobles_loyalty_added
							value = 64
						}
					}
					if = {
						limit = {
							check_variable = {
								which = lesser_nobles_loyalty_added
								value = 32
							}
						}
						add_estate_loyalty = {
							estate = estate_lesser_nobles
							loyalty = 32
						}
						change_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0.32
						}
						subtract_variable = {
							which = lesser_nobles_loyalty_added
							value = 32
						}
					}
					if = {
						limit = {
							check_variable = {
								which = lesser_nobles_loyalty_added
								value = 16
							}
						}
						add_estate_loyalty = {
							estate = estate_lesser_nobles
							loyalty = 16
						}
						change_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0.16
						}
						subtract_variable = {
							which = lesser_nobles_loyalty_added
							value = 16
						}
					}
					if = {
						limit = {
							check_variable = {
								which = lesser_nobles_loyalty_added
								value = 8
							}
						}
						add_estate_loyalty = {
							estate = estate_lesser_nobles
							loyalty = 8
						}
						change_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0.08
						}
						subtract_variable = {
							which = lesser_nobles_loyalty_added
							value = 8
						}
					}
					if = {
						limit = {
							check_variable = {
								which = lesser_nobles_loyalty_added
								value = 4
							}
						}
						add_estate_loyalty = {
							estate = estate_lesser_nobles
							loyalty = 4
						}
						change_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0.04
						}
						subtract_variable = {
							which = lesser_nobles_loyalty_added
							value = 4
						}
					}
					if = {
						limit = {
							check_variable = {
								which = lesser_nobles_loyalty_added
								value = 2
							}
						}
						add_estate_loyalty = {
							estate = estate_lesser_nobles
							loyalty = 2
						}
						change_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0.02
						}
						subtract_variable = {
							which = lesser_nobles_loyalty_added
							value = 2
						}
					}
					if = {
						limit = {
							check_variable = {
								which = lesser_nobles_loyalty_added
								value = 1
							}
						}
						add_estate_loyalty = {
							estate = estate_lesser_nobles
							loyalty = 1
						}
						change_variable = {
							which = estate_lesser_nobles_loyalty
							value = 0.01
						}
						subtract_variable = {
							which = lesser_nobles_loyalty_added
							value = 1
						}
					}
					if = {
						limit = {
							check_variable = {
								which = estate_lesser_nobles_loyalty
								value = 1
							}
						}
						set_variable = {
							which = estate_lesser_nobles_loyalty
							value = 1
						}
					}
					every_owned_province = {
						limit = {
							has_province_flag = lesser_nobles_control_province
						}
						hidden_effect = {
							set_variable = {
								which = estate_lesser_nobles_loyalty
								which = owner
							}
							set_variable = {
								which = EstateProv_UnrestSave
								which = EstateProv_Unrest
							}
							set_variable = {
								which = EstateProv_Unrest
								which = estate_lesser_nobles_loyalty
							}
							set_variable = {
								which = estate_lesser_nobles_loyalty
								value = 0
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_Unrest
										value = 0.6
									}
								}
								set_province_flag = loss
								subtract_variable = {
									which = EstateProv_Unrest
									value = 0.6
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_Unrest
											value = 0.401
										}
									}
								}
								set_province_flag = gain
								subtract_variable = {
									which = EstateProv_Unrest
									value = 0.4
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = -1
								}
							}
							else = {
								set_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							multiply_variable = {
								which = EstateProv_Unrest
								value = 16.62
							}
							set_variable = {
								which = inp_m_exp
								which = EstateProv_Unrest
							}
							if = {
								limit = {
									NOT = {
										check_variable = {
											which = inp_m_exp
											value = 0
										}
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
								change_variable = {
									which = err.math.exp.undef
									value = 1
								}
							}
							else_if = {
								limit = {
									is_variable_equal = {
										which = inp_m_exp
										value = 0
									}
								}
								set_variable = {
									which = exp_val
									value = 0
								}
							}
							else = {
								set_variable = {
									which = exp_m_exp
									value = 1.7
								}
								set_variable = {
									which = int_m_exp
									which = exp_m_exp
								}
								multiply_variable = {
									which = int_m_exp
									value = 0.001
								}
								multiply_variable = {
									which = int_m_exp
									value = 1000
								}
								set_variable = {
									which = dec_m_exp
									which = exp_m_exp
								}
								subtract_variable = {
									which = dec_m_exp
									which = int_m_exp
								}
								set_variable = {
									which = inp
									which = inp_m_exp
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = inp
												value = 0.001
											}
										}
									}
									set_variable = {
										which = ln_val
										value = 0
									}
									change_variable = {
										which = err.math.ln.undef
										value = 1
									}
								}
								else = {
									set_variable = {
										which = ln_val
										value = 0
									}
									set_variable = {
										which = scale
										value = 10000
									}
									set_variable = {
										which = k
										value = 0
									}
									set_variable = {
										which = k_div
										which = scale
									}
									while = {
										limit = {
											check_variable = {
												which = inp
												value = 2.001
											}
										}
										multiply_variable = {
											which = inp
											value = 0.5
										}
										change_variable = {
											which = ln_val
											value = 6931.472
										}
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = inp
													value = 1
												}
											}
										}
										multiply_variable = {
											which = inp
											value = 2
										}
										subtract_variable = {
											which = ln_val
											value = 6931.472
										}
									}
									multiply_variable = {
										which = inp
										which = scale
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = k
													value = 10
												}
											}
										}
										change_variable = {
											which = k
											value = 1
										}
										multiply_variable = {
											which = k_div
											value = 0.5
										}
										set_variable = {
											which = t_m_ln
											which = scale
										}
										change_variable = {
											which = t_m_ln
											which = k_div
										}
										if = {
											limit = {
												check_variable = {
													which = inp
													which = t_m_ln
												}
											}
											divide_variable = {
												which = inp
												which = t_m_ln
											}
											multiply_variable = {
												which = inp
												which = scale
											}
											set_variable = {
												which = lt_ind
												which = k
											}
											if = {
												limit = {
													check_variable = {
														which = lt_ind
														value = 6
													}
												}
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 8
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 9
															}
														}
														if = {
															limit = {
																check_variable = {
																	which = lt_ind
																	value = 10
																}
															}
															set_variable = {
																which = lt_val
																value = 9.761
															}
														}
														else = {
															set_variable = {
																which = lt_val
																value = 19.512
															}
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 38.986
														}
													}
												}
												else = {
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 7
															}
														}
														set_variable = {
															which = lt_val
															value = 77.821
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 155.042
														}
													}
												}
											}
											else = {
												if = {
													limit = {
														check_variable = {
															which = lt_ind
															value = 3
														}
													}
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 4
															}
														}
														if = {
															limit = {
																check_variable = {
																	which = lt_ind
																	value = 5
																}
															}
															set_variable = {
																which = lt_val
																value = 307.717
															}
														}
														else = {
															set_variable = {
																which = lt_val
																value = 606.246
															}
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 1177.83
														}
													}
												}
												else = {
													if = {
														limit = {
															check_variable = {
																which = lt_ind
																value = 2
															}
														}
														set_variable = {
															which = lt_val
															value = 2231.436
														}
													}
													else = {
														set_variable = {
															which = lt_val
															value = 4054.651
														}
													}
												}
											}
											set_variable = {
												which = lt_ind
												value = 0
											}
											change_variable = {
												which = ln_val
												which = lt_val
											}
										}
										set_variable = {
											which = t_m_ln
											value = 0
										}
									}
									divide_variable = {
										which = ln_val
										value = 10000
									}
									set_variable = {
										which = scale
										value = 0
									}
									set_variable = {
										which = k
										value = 0
									}
									set_variable = {
										which = k_div
										value = 0
									}
									set_variable = {
										which = lt_val
										value = 0
									}
								}
								set_variable = {
									which = inp
									value = 0
								}
								multiply_variable = {
									which = dec_m_exp
									which = ln_val
								}
								set_variable = {
									which = math.e.expnt
									which = dec_m_exp
								}
								set_variable = {
									which = math.e.return
									value = 1
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = math.e.expnt
												value = -6.999
											}
										}
									}
									set_variable = {
										which = exp_val
										value = 0
									}
								}
								else = {
									while = {
										limit = {
											check_variable = {
												which = math.e.expnt
												value = 1
											}
										}
										subtract_variable = {
											which = math.e.expnt
											value = 1
										}
										multiply_variable = {
											which = math.e.return
											value = 2.718
										}
									}
									while = {
										limit = {
											NOT = {
												check_variable = {
													which = math.e.expnt
													value = 0
												}
											}
										}
										change_variable = {
											which = math.e.expnt
											value = 1
										}
										divide_variable = {
											which = math.e.return
											value = 2.718
										}
									}
									set_variable = {
										which = math.e.sm
										value = 1
									}
									if = {
										limit = {
											NOT = {
												is_variable_equal = {
													which = math.e.expnt
													value = 0
												}
											}
										}
										set_variable = {
											which = math.e.sq
											which = math.e.expnt
										}
										multiply_variable = {
											which = math.e.sq
											which = math.e.expnt
										}
										set_variable = {
											which = math.e.fct
											value = 2
										}
										set_variable = {
											which = math.e.fctl
											value = 2
										}
										set_variable = {
											which = math.e.a1
											which = math.e.sq
										}
										set_variable = {
											which = math.e.a2
											which = math.e.expnt
										}
										set_variable = {
											which = math.e.a3
											value = 2
										}
										set_variable = {
											which = math.e.tmp
											which = math.e.a2
										}
										multiply_variable = {
											which = math.e.tmp
											which = math.e.a3
										}
										change_variable = {
											which = math.e.tmp
											which = math.e.a1
										}
										divide_variable = {
											which = math.e.tmp
											which = math.e.fct
										}
										change_variable = {
											which = math.e.sm
											which = math.e.tmp
										}
										set_variable = {
											which = math.e.prec
											value = 3
										}
										subtract_variable = {
											which = math.e.prec
											value = 1
										}
										while = {
											limit = {
												check_variable = {
													which = math.e.prec
													value = 1
												}
											}
											subtract_variable = {
												which = math.e.prec
												value = 1
											}
											change_variable = {
												which = math.e.fctl
												value = 1
											}
											multiply_variable = {
												which = math.e.fct
												which = math.e.fctl
											}
											change_variable = {
												which = math.e.fctl
												value = 1
											}
											multiply_variable = {
												which = math.e.fct
												which = math.e.fctl
											}
											multiply_variable = {
												which = math.e.a1
												which = math.e.sq
											}
											multiply_variable = {
												which = math.e.a2
												which = math.e.sq
											}
											change_variable = {
												which = math.e.a3
												value = 2
											}
											set_variable = {
												which = math.e.tmp
												which = math.e.a2
											}
											multiply_variable = {
												which = math.e.tmp
												which = math.e.a3
											}
											change_variable = {
												which = math.e.tmp
												which = math.e.a1
											}
											divide_variable = {
												which = math.e.tmp
												which = math.e.fct
											}
											change_variable = {
												which = math.e.sm
												which = math.e.tmp
											}
										}
									}
									multiply_variable = {
										which = math.e.return
										which = math.e.sm
									}
									set_variable = {
										which = exp_val
										which = math.e.return
									}
									set_variable = {
										which = math.e.sm
										value = 0
									}
									set_variable = {
										which = math.e.tmp
										value = 0
									}
									set_variable = {
										which = math.e.a1
										value = 0
									}
									set_variable = {
										which = math.e.a2
										value = 0
									}
									set_variable = {
										which = math.e.a3
										value = 0
									}
									set_variable = {
										which = math.e.fctl
										value = 0
									}
									set_variable = {
										which = math.e.fct
										value = 0
									}
									set_variable = {
										which = math.e.prec
										value = 0
									}
									set_variable = {
										which = math.e.sq
										value = 0
									}
								}
								set_variable = {
									which = math.e.expnt
									value = 0
								}
								set_variable = {
									which = math.e.return
									value = 0
								}
								while = {
									limit = {
										check_variable = {
											which = int_m_exp
											value = 1
										}
									}
									subtract_variable = {
										which = int_m_exp
										value = 1
									}
									multiply_variable = {
										which = exp_val
										which = inp_m_exp
									}
								}
								set_variable = {
									which = exp_m_exp
									value = 0
								}
								set_variable = {
									which = int_m_exp
									value = 0
								}
								set_variable = {
									which = dec_m_exp
									value = 0
								}
								set_variable = {
									which = ln_val
									value = 0
								}
							}
							set_variable = {
								which = inp_m_exp
								value = 0
							}
							set_variable = {
								which = EstateProv_Unrest
								which = exp_val
							}
							set_variable = {
								which = exp_val
								value = 0
							}
							export_to_variable = {
								which = EstateProv_LA
								value = local_autonomy
							}
							multiply_variable = {
								which = EstateProv_LA
								value = 0.008
							}
							change_variable = {
								which = EstateProv_LA
								value = 0.2
							}
							multiply_variable = {
								which = EstateProv_Unrest
								which = EstateProv_LA
							}
							set_variable = {
								which = EstateProv_Unrest_Inp
								which = EstateProv_Unrest
							}
							if = {
								limit = {
									has_province_flag = loss
								}
								clr_province_flag = loss
								multiply_variable = {
									which = EstateProv_Unrest
									value = -1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 0.1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 10
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 25.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_25.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_25.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_25.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_25.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 12.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_12.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_12.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_12.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_12.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 6.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_6.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_6.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_6.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_6.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 3.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_3.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_3.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_3.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_3.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 1.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_1.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_1.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_1.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_1.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.1
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestLoss_0.1
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestLoss_0.1
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.1
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.1
								}
							}
							else_if = {
								limit = {
									has_province_flag = gain
								}
								clr_province_flag = gain
								multiply_variable = {
									which = EstateProv_Unrest
									value = 1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 0.1
								}
								multiply_variable = {
									which = EstateProv_Unrest
									value = 10
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 25.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 25.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_25.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_25.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_25.6
									}
									remove_province_modifier = EstateProv_UnrestGain_25.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 12.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 12.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_12.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_12.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_12.8
									}
									remove_province_modifier = EstateProv_UnrestGain_12.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 6.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 6.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_6.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_6.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_6.4
									}
									remove_province_modifier = EstateProv_UnrestGain_6.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 3.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 3.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_3.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_3.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_3.2
									}
									remove_province_modifier = EstateProv_UnrestGain_3.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 1.6
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 1.6
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_1.6
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_1.6
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_1.6
									}
									remove_province_modifier = EstateProv_UnrestGain_1.6
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.8
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.8
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.8
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.8
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.8
									}
									remove_province_modifier = EstateProv_UnrestGain_0.8
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.4
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.4
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.4
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.4
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.4
									}
									remove_province_modifier = EstateProv_UnrestGain_0.4
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.2
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.2
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.2
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.2
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.2
									}
									remove_province_modifier = EstateProv_UnrestGain_0.2
								}
								if = {
									limit = {
										check_variable = {
											which = EstateProv_Unrest_Inp
											value = 0.1
										}
									}
									subtract_variable = {
										which = EstateProv_Unrest_Inp
										value = 0.1
									}
									if = {
										limit = {
											NOT = {
												has_province_modifier = EstateProv_UnrestGain_0.1
											}
										}
										add_province_modifier = {
											name = EstateProv_UnrestGain_0.1
											duration = -1
											hidden = yes
										}
									}
								}
								else_if = {
									limit = {
										has_province_modifier = EstateProv_UnrestGain_0.1
									}
									remove_province_modifier = EstateProv_UnrestGain_0.1
								}
							}
							if = {
								limit = {
									check_variable = {
										which = EstateProv_UnrestSave
										value = 0.001
									}
								}
								if = {
									limit = {
										NOT = {
											check_variable = {
												which = EstateProv_Unrest
												value = 0.001
											}
										}
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_25.6
										}
										remove_province_modifier = EstateProv_UnrestGain_25.6
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_12.8
										}
										remove_province_modifier = EstateProv_UnrestGain_12.8
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_6.4
										}
										remove_province_modifier = EstateProv_UnrestGain_6.4
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_3.2
										}
										remove_province_modifier = EstateProv_UnrestGain_3.2
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_1.6
										}
										remove_province_modifier = EstateProv_UnrestGain_1.6
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.8
										}
										remove_province_modifier = EstateProv_UnrestGain_0.8
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.4
										}
										remove_province_modifier = EstateProv_UnrestGain_0.4
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.2
										}
										remove_province_modifier = EstateProv_UnrestGain_0.2
									}
									if = {
										limit = {
											has_province_modifier = EstateProv_UnrestGain_0.1
										}
										remove_province_modifier = EstateProv_UnrestGain_0.1
									}
								}
							}
							else_if = {
								limit = {
									NOT = {
										check_variable = {
											which = EstateProv_UnrestSave
											value = 0
										}
									}
									check_variable = {
										which = EstateProv_Unrest
										value = 0
									}
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_25.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_25.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_12.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_12.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_6.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_6.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_3.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_3.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_1.6
									}
									remove_province_modifier = EstateProv_UnrestLoss_1.6
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.8
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.8
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.4
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.4
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.2
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.2
								}
								if = {
									limit = {
										has_province_modifier = EstateProv_UnrestLoss_0.1
									}
									remove_province_modifier = EstateProv_UnrestLoss_0.1
								}
							}
							if = {
								limit = {
									is_variable_equal = {
										which = EstateProv_Unrest
										value = 0
									}
								}
								set_variable = {
									which = EstateProv_Unrest
									value = 0
								}
							}
							set_variable = {
								which = EstateProv_UnrestSave
								value = 0
							}
							set_variable = {
								which = EstateProv_LA
								value = 0
							}
							set_variable = {
								which = EstateProv_Unrest_Inp
								value = 0
							}
						}
					}
				}
			}
		}
	}
}
country_event = {
	id = red_turban.14
	title = "red_turban.14.t"
	desc = "red_turban.14.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	trigger = {
		culture_group = chinese_group
		any_known_country = {
			war_with = ROOT
			war_score_against = {
				who = ROOT
				value = 85
			}
			OR = {
				culture_group = chinese_group
				has_country_flag = barbarian_claimant_china
				has_country_flag = mandate_of_heaven_claimed
			}
		}
	}
	option = {
		name = "red_turban.14a"
		if = {
			limit = {
				has_saved_event_target = white_lotus_tag
			}
			if = {
				limit = {
					event_target:white_lotus_tag = {
						tag = ROOT
					}
				}
				random_known_country = {
					limit = {
						has_country_flag = white_lotus_rebellion
					}
					clr_country_flag = white_lotus_rebellion
				}
			}
		}
		if = {
			limit = {
				tag = SNG
				dynasty = "Liu"
				heir_has_ruler_dynasty = no
				NOT = {
					is_year = 1400
				}
			}
			random_subject_country = {
				country_event = {
					id = red_turban.27
				}
			}
		}
		release_all_subjects = yes
		every_owned_province = {
			limit = {
				NOT = {
					controlled_by = REB
				}
				is_capital = no
			}
			remove_core = ROOT
			if = {
				limit = {
					controller = {
						OR = {
							culture_group = chinese_group
							has_country_flag = barbarian_claimant_china
							has_country_flag = mandate_of_heaven_claimed
						}
					}
				}
				add_core = controller
				cede_province = controller
			}
			if = {
				limit = {
					ROOT = {
						overlord = {
							is_emperor_of_china = yes
						}
					}
				}
				ROOT = {
					overlord = {
						add_mandate = -0.5
					}
				}
			}
			else_if = {
				limit = {
					controller = {
						is_emperor_of_china = yes
					}
				}
				controller = {
					add_mandate = 0.5
				}
			}
			else_if = {
				limit = {
					controller = {
						overlord = {
							is_emperor_of_china = yes
						}
					}
				}
				controller = {
					overlord = {
						add_mandate = 0.5
					}
				}
			}
		}
		if = {
			limit = {
				capital_scope = {
					NOT = {
						controlled_by = ROOT
					}
				}
			}
			capital_scope = {
				controller = {
					every_province = {
						limit = {
							is_core = ROOT
						}
						add_core = PREV
						if = {
							limit = {
								ROOT = {
									overlord = {
										is_emperor_of_china = yes
									}
								}
							}
							ROOT = {
								overlord = {
									add_mandate = -0.5
								}
							}
						}
						else_if = {
							limit = {
								controller = {
									is_emperor_of_china = yes
								}
							}
							controller = {
								add_mandate = 0.5
							}
						}
						else_if = {
							limit = {
								controller = {
									overlord = {
										is_emperor_of_china = yes
									}
								}
							}
							controller = {
								overlord = {
									add_mandate = 0.5
								}
							}
						}
					}
					inherit = ROOT
				}
			}
		}
		else = {
			random_known_country = {
				limit = {
					war_with = ROOT
					war_score_against = {
						who = ROOT
						value = 5
					}
					OR = {
						culture_group = chinese_group
						has_country_flag = barbarian_claimant_china
						has_country_flag = mandate_of_heaven_claimed
					}
				}
				every_province = {
					limit = {
						owned_by = ROOT
					}
					add_core = PREV
					if = {
						limit = {
							ROOT = {
								overlord = {
									is_emperor_of_china = yes
								}
							}
						}
						ROOT = {
							overlord = {
								add_mandate = -0.5
							}
						}
					}
					else_if = {
						limit = {
							PREV = {
								is_emperor_of_china = yes
							}
						}
						PREV = {
							add_mandate = 0.5
						}
					}
					else_if = {
						limit = {
							PREV = {
								overlord = {
									is_emperor_of_china = yes
								}
							}
						}
						PREV = {
							overlord = {
								add_mandate = 0.5
							}
						}
					}
				}
				inherit = ROOT
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = "red_turban.14b"
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = red_turban.15
	title = "red_turban.15.t"
	desc = "red_turban.15.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = "red_turban.15a"
		MXI = {
			inherit = CSE
			hidden_effect = {
				capital_scope = {
					if = {
						limit = {
							has_province_modifier = misc_expenses_5242.88
						}
						remove_province_modifier = misc_expenses_5242.88
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_2621.44
						}
						remove_province_modifier = misc_expenses_2621.44
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_1310.72
						}
						remove_province_modifier = misc_expenses_1310.72
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_655.36
						}
						remove_province_modifier = misc_expenses_655.36
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_327.68
						}
						remove_province_modifier = misc_expenses_327.68
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_163.84
						}
						remove_province_modifier = misc_expenses_163.84
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_81.92
						}
						remove_province_modifier = misc_expenses_81.92
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_40.96
						}
						remove_province_modifier = misc_expenses_40.96
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_20.48
						}
						remove_province_modifier = misc_expenses_20.48
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_10.24
						}
						remove_province_modifier = misc_expenses_10.24
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_5.12
						}
						remove_province_modifier = misc_expenses_5.12
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_2.56
						}
						remove_province_modifier = misc_expenses_2.56
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_1.28
						}
						remove_province_modifier = misc_expenses_1.28
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.64
						}
						remove_province_modifier = misc_expenses_0.64
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.32
						}
						remove_province_modifier = misc_expenses_0.32
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.16
						}
						remove_province_modifier = misc_expenses_0.16
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.08
						}
						remove_province_modifier = misc_expenses_0.08
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.04
						}
						remove_province_modifier = misc_expenses_0.04
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.02
						}
						remove_province_modifier = misc_expenses_0.02
					}
					if = {
						limit = {
							has_province_modifier = misc_expenses_0.01
						}
						remove_province_modifier = misc_expenses_0.01
					}
					set_variable = {
						which = misc_expenses_cache
						value = 0
					}
				}
			}
			if = {
				limit = {
					is_part_of_hre = yes
					ROOT = {
						is_part_of_hre = no
					}
				}
				set_in_empire = no
				swap_non_generic_missions = yes
				emperor = {
					add_opinion = {
						who = ROOT
						modifier = hre_province_left
					}
				}
				add_imperial_influence = -1
			}
			set_capital = 4035
			hidden_effect = {
				country_event = {
					id = miscexpenses.002
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = "red_turban.15b"
		liaoning_area = {
			add_claim = MXI
		}
		ai_chance = {
			factor = 0
		}
	}
}
country_event = {
	id = red_turban.16
	title = "red_turban.16.t"
	desc = "red_turban.16.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = "red_turban.16a"
		hidden_effect = {
			white_peace = MXI
		}
		create_subject = {
			who = MXI
			subject_type = tributary_state
		}
		MXI = {
			country_event = {
				id = red_turban.17
			}
		}
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.16b"
		ai_chance = {
			factor = 0
		}
	}
	option = {
		name = "red_turban.16c"
		hidden_effect = {
			white_peace = MXI
		}
		create_subject = {
			who = MXI
			subject_type = tributary_state
		}
		liaoning_area = {
			hidden_effect = {
				if = {
					limit = {
						NOT = {
							is_core = ROOT
						}
					}
					add_core = ROOT
				}
				if = {
					limit = {
						culture = uriankhai
					}
					change_culture = jurchen
				}
			}
			if = {
				limit = {
					owned_by = MXI
				}
				cede_province = ROOT
			}
		}
		if = {
			limit = {
				primary_culture = korean
			}
			MXI = {
				every_owned_province = {
					limit = {
						region = korea_region
					}
					cede_province = ROOT
				}
			}
		}
		hidden_effect = {
			donggye_area = {
				limit = {
					culture = uriankhai
				}
				change_culture = jurchen
			}
			korea_region = {
				remove_core = MXI
			}
			every_province = {
				limit = {
					OR = {
						area = khorchin_area
						owned_by = MXI
					}
					culture = mongol
				}
				change_culture = uriankhai
				add_core = MXI
			}
		}
		if = {
			limit = {
				NOT = {
					calc_true_if = {
						all_country = {
							exists = yes
							primary_culture = jurchen
						}
						amount = 6
					}
				}
			}
			if = {
				limit = {
					NOT = {
						exists = MJZ
					}
				}
				hidden_effect = {
					east_manchuria_region = {
						remove_core = MJZ
					}
					west_manchuria_region = {
						remove_core = MJZ
					}
				}
				MXI = {
					jianzhou_group = {
						limit = {
							owned_by = PREV
						}
						remove_core = MXI
						add_core = MJZ
						cede_province = MJZ
						change_culture = jurchen
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						exists = MWK
					}
				}
				hidden_effect = {
					east_manchuria_region = {
						remove_core = MWK
					}
					west_manchuria_region = {
						remove_core = MWK
					}
				}
				MXI = {
					jianzhou_group = {
						limit = {
							owned_by = PREV
						}
						remove_core = MXI
						add_core = MWK
						cede_province = MWK
						change_culture = jurchen
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						exists = MHR
					}
				}
				hidden_effect = {
					east_manchuria_region = {
						remove_core = MHR
					}
					west_manchuria_region = {
						remove_core = MHR
					}
				}
				MXI = {
					jianzhou_group = {
						limit = {
							owned_by = PREV
						}
						remove_core = MXI
						add_core = MHR
						cede_province = MHR
						change_culture = jurchen
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						exists = MUD
					}
				}
				hidden_effect = {
					east_manchuria_region = {
						remove_core = MUD
					}
					west_manchuria_region = {
						remove_core = MUD
					}
				}
				MXI = {
					jianzhou_group = {
						limit = {
							owned_by = PREV
						}
						remove_core = MXI
						add_core = MUD
						cede_province = MUD
						change_culture = jurchen
					}
				}
			}
			else_if = {
				limit = {
					NOT = {
						exists = MNA
					}
				}
				hidden_effect = {
					east_manchuria_region = {
						remove_core = MNA
					}
					west_manchuria_region = {
						remove_core = MNA
					}
				}
				MXI = {
					jianzhou_group = {
						limit = {
							owned_by = PREV
						}
						remove_core = MXI
						add_core = MNA
						cede_province = MNA
						change_culture = jurchen
					}
				}
			}
			if = {
				limit = {
					NOT = {
						calc_true_if = {
							all_country = {
								exists = yes
								primary_culture = jurchen
							}
							amount = 6
						}
					}
				}
				if = {
					limit = {
						NOT = {
							exists = MJZ
						}
					}
					hidden_effect = {
						east_manchuria_region = {
							remove_core = MJZ
						}
						west_manchuria_region = {
							remove_core = MJZ
						}
					}
					MXI = {
						haixi_group = {
							limit = {
								owned_by = PREV
							}
							remove_core = MXI
							add_core = MJZ
							cede_province = MJZ
							change_culture = jurchen
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = MWK
						}
					}
					hidden_effect = {
						east_manchuria_region = {
							remove_core = MWK
						}
						west_manchuria_region = {
							remove_core = MWK
						}
					}
					MXI = {
						haixi_group = {
							limit = {
								owned_by = PREV
							}
							remove_core = MXI
							add_core = MWK
							cede_province = MWK
							change_culture = jurchen
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = MHR
						}
					}
					hidden_effect = {
						east_manchuria_region = {
							remove_core = MHR
						}
						west_manchuria_region = {
							remove_core = MHR
						}
					}
					MXI = {
						haixi_group = {
							limit = {
								owned_by = PREV
							}
							remove_core = MXI
							add_core = MHR
							cede_province = MHR
							change_culture = jurchen
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = MUD
						}
					}
					hidden_effect = {
						east_manchuria_region = {
							remove_core = MUD
						}
						west_manchuria_region = {
							remove_core = MUD
						}
					}
					MXI = {
						haixi_group = {
							limit = {
								owned_by = PREV
							}
							remove_core = MXI
							add_core = MUD
							cede_province = MUD
							change_culture = jurchen
						}
					}
				}
				else_if = {
					limit = {
						NOT = {
							exists = MNA
						}
					}
					hidden_effect = {
						east_manchuria_region = {
							remove_core = MNA
						}
						west_manchuria_region = {
							remove_core = MNA
						}
					}
					MXI = {
						haixi_group = {
							limit = {
								owned_by = PREV
							}
							remove_core = MXI
							add_core = MNA
							cede_province = MNA
							change_culture = jurchen
						}
					}
				}
			}
			else = {
				random_country = {
					limit = {
						primary_culture = jurchen
						NOT = {
							capital_scope = {
								province_group = jianzhou_group
							}
						}
					}
					country_event = {
						id = red_turban.18
					}
				}
			}
		}
		else = {
			random_country = {
				limit = {
					primary_culture = jurchen
				}
				country_event = {
					id = red_turban.18
				}
			}
		}
		every_known_country = {
			limit = {
				accepted_culture = uriankhai
				NOT = {
					any_owned_province = {
						culture = uriankhai
					}
				}
			}
			remove_accepted_culture = uriankhai
			add_accepted_culture = jurchen
		}
		ai_chance = {
			factor = 90
		}
	}
}
country_event = {
	id = red_turban.17
	title = "red_turban.17.t"
	desc = "red_turban.17.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	is_triggered_only = yes
	option = {
		name = "red_turban.17a"
		change_government = monarchy
		add_government_reform = celestial_empire
		add_government_reform = delegated_rulers
		add_government_reform = appointed_elite
		set_legacy_government = indep_daimyo_legacy
	}
}
country_event = {
	id = red_turban.18
	title = "red_turban.18.t"
	desc = "red_turban.18.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	option = {
		name = "red_turban.18a"
		trigger = {
			jianzhou_group = {
				owned_by = MXI
			}
		}
		MXI = {
			every_owned_province = {
				limit = {
					province_group = jianzhou_group
				}
				remove_core = MXI
				add_core = ROOT
				cede_province = ROOT
				change_culture = jurchen
			}
		}
		hidden_effect = {
			east_manchuria_region = {
				limit = {
					NOT = {
						province_group = jianzhou_group
					}
				}
				remove_core = ROOT
			}
			west_manchuria_region = {
				limit = {
					NOT = {
						province_group = jianzhou_group
					}
				}
				remove_core = ROOT
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 3256
					culture = daur
				}
			}
			cede_province = MYR
			change_culture = daur
			add_core = MYR
		}
		random_owned_province = {
			limit = {
				NOT = {
					province_group = jianzhou_group
				}
				any_neighbor_province = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
					}
				}
			}
			random_neighbor_province = {
				limit = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
						NOT = {
							capital_scope = {
								province_group = haixi_group
							}
						}
					}
				}
				owner = {
					every_province = {
						limit = {
							owned_by = ROOT
							NOT = {
								is_core = ROOT
							}
						}
						add_core = PREV
						cede_province = PREV
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					haixi_group = {
						owned_by = MXI
					}
				}
				random_country = {
					limit = {
						NOT = {
							tag = ROOT
						}
						primary_culture = jurchen
					}
					country_event = {
						id = red_turban.19
					}
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = "red_turban.18b"
		trigger = {
			haixi_group = {
				owned_by = MXI
			}
		}
		MXI = {
			every_owned_province = {
				limit = {
					province_group = haixi_group
				}
				remove_core = MXI
				add_core = ROOT
				cede_province = ROOT
				change_culture = jurchen
			}
		}
		hidden_effect = {
			east_manchuria_region = {
				limit = {
					NOT = {
						province_group = haixi_group
					}
				}
				remove_core = ROOT
			}
			west_manchuria_region = {
				limit = {
					NOT = {
						province_group = haixi_group
					}
				}
				remove_core = ROOT
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 3256
					culture = daur
				}
			}
			cede_province = MYR
			change_culture = daur
			add_core = MYR
		}
		random_owned_province = {
			limit = {
				NOT = {
					province_group = haixi_group
				}
				any_neighbor_province = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
					}
				}
			}
			random_neighbor_province = {
				limit = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
						NOT = {
							capital_scope = {
								province_group = jianzhou_group
							}
						}
					}
				}
				owner = {
					every_province = {
						limit = {
							owned_by = ROOT
							NOT = {
								is_core = ROOT
							}
						}
						add_core = PREV
						cede_province = PREV
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					jianzhou_group = {
						owned_by = MXI
					}
				}
				random_country = {
					limit = {
						NOT = {
							tag = ROOT
						}
						primary_culture = jurchen
					}
					country_event = {
						id = red_turban.19
					}
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = "red_turban.18c"
		trigger = {
			NOT = {
				ai = yes
			}
		}
		hidden_effect = {
			random_country = {
				limit = {
					NOT = {
						tag = ROOT
					}
					primary_culture = jurchen
				}
				country_event = {
					id = red_turban.19
				}
			}
		}
	}
}
country_event = {
	id = red_turban.19
	title = "red_turban.18.t"
	desc = "red_turban.18.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	option = {
		name = "red_turban.18a"
		trigger = {
			jianzhou_group = {
				owned_by = MXI
			}
		}
		MXI = {
			every_owned_province = {
				limit = {
					province_group = jianzhou_group
				}
				remove_core = MXI
				add_core = ROOT
				cede_province = ROOT
				change_culture = jurchen
			}
		}
		hidden_effect = {
			east_manchuria_region = {
				limit = {
					NOT = {
						province_group = jianzhou_group
					}
				}
				remove_core = ROOT
			}
			west_manchuria_region = {
				limit = {
					NOT = {
						province_group = jianzhou_group
					}
				}
				remove_core = ROOT
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 3256
					culture = daur
				}
			}
			cede_province = MYR
			change_culture = daur
			add_core = MYR
		}
		random_owned_province = {
			limit = {
				NOT = {
					province_group = jianzhou_group
				}
				any_neighbor_province = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
					}
				}
			}
			random_neighbor_province = {
				limit = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
						NOT = {
							capital_scope = {
								province_group = haixi_group
							}
						}
					}
				}
				owner = {
					every_province = {
						limit = {
							owned_by = ROOT
							NOT = {
								is_core = ROOT
							}
						}
						add_core = PREV
						cede_province = PREV
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					haixi_group = {
						owned_by = MXI
					}
				}
				random_country = {
					limit = {
						NOT = {
							tag = ROOT
						}
						primary_culture = jurchen
					}
					country_event = {
						id = red_turban.19
					}
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = "red_turban.18b"
		trigger = {
			haixi_group = {
				owned_by = MXI
			}
		}
		MXI = {
			every_owned_province = {
				limit = {
					province_group = haixi_group
				}
				remove_core = MXI
				add_core = ROOT
				cede_province = ROOT
				change_culture = jurchen
			}
		}
		hidden_effect = {
			east_manchuria_region = {
				limit = {
					NOT = {
						province_group = haixi_group
					}
				}
				remove_core = ROOT
			}
			west_manchuria_region = {
				limit = {
					NOT = {
						province_group = haixi_group
					}
				}
				remove_core = ROOT
			}
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 3256
					culture = daur
				}
			}
			cede_province = MYR
			change_culture = daur
			add_core = MYR
		}
		random_owned_province = {
			limit = {
				NOT = {
					province_group = haixi_group
				}
				any_neighbor_province = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
					}
				}
			}
			random_neighbor_province = {
				limit = {
					NOT = {
						owned_by = ROOT
					}
					owner = {
						primary_culture = jurchen
						NOT = {
							capital_scope = {
								province_group = jianzhou_group
							}
						}
					}
				}
				owner = {
					every_province = {
						limit = {
							owned_by = ROOT
							NOT = {
								is_core = ROOT
							}
						}
						add_core = PREV
						cede_province = PREV
					}
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					jianzhou_group = {
						owned_by = MXI
					}
				}
				random_country = {
					limit = {
						NOT = {
							tag = ROOT
						}
						primary_culture = jurchen
					}
					country_event = {
						id = red_turban.19
					}
				}
			}
		}
		ai_chance = {
			factor = 100
		}
	}
	option = {
		name = "red_turban.18c"
		trigger = {
			NOT = {
				ai = yes
			}
		}
		hidden_effect = {
			random_country = {
				limit = {
					NOT = {
						tag = ROOT
					}
					primary_culture = jurchen
				}
				country_event = {
					id = red_turban.18
				}
			}
		}
	}
}
country_event = {
	id = red_turban.20
	title = "red_turban.20.t"
	desc = "red_turban.20.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	immediate = {
		remove_country_modifier = mongol_xingsheng
		every_owned_province = {
			add_core = FROM
		}
	}
	option = {
		name = "red_turban.20a"
		every_owned_province = {
			add_core = FROM
		}
		FROM = {
			country_event = {
				id = red_turban.21
			}
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				liberty_desire = 50
			}
		}
	}
	option = {
		name = "red_turban.20b"
		FROM = {
			country_event = {
				id = red_turban.22
			}
			free_vassal = ROOT
			hidden_effect = {
				set_variable = {
					which = "Demesne_in_the_Mandate_of_Heaven"
					value = 0
				}
				north_china_superregion = {
					limit = {
						country_or_vassal_holds = FROM
					}
					owner = {
						change_variable = {
							which = "Demesne_in_the_Mandate_of_Heaven"
							value = 1
						}
					}
				}
				east_china_superregion = {
					limit = {
						country_or_vassal_holds = FROM
					}
					owner = {
						change_variable = {
							which = "Demesne_in_the_Mandate_of_Heaven"
							value = 1
						}
					}
				}
				southwest_china_superregion = {
					limit = {
						country_or_vassal_holds = FROM
					}
					owner = {
						change_variable = {
							which = "Demesne_in_the_Mandate_of_Heaven"
							value = 1
						}
					}
				}
			}
		}
		ai_chance = {
			factor = 10
		}
	}
}
country_event = {
	id = red_turban.21
	title = "red_turban.21.t"
	desc = "red_turban.21.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	option = {
		name = "red_turban.20a"
		inherit = FROM
	}
}
country_event = {
	id = red_turban.22
	title = "red_turban.22.t"
	desc = "red_turban.22.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	option = {
		name = "red_turban.22a"
		trigger = {
			ai = yes
		}
		declare_war_with_cb = {
			who = FROM
			casus_belli = cb_chinese_civil_war
		}
		ai_chance = {
			factor = 10
			modifier = {
				factor = 0
				FROM = {
					num_of_cities = 20
				}
			}
		}
	}
	option = {
		name = "red_turban.22a"
		add_prestige = -10
		ai_chance = {
			factor = 10
		}
	}
}
country_event = {
	id = red_turban.23
	title = "red_turban.23.t"
	desc = "red_turban.23.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	trigger = {
		is_year = 1363
		NOT = {
			is_year = 1400
		}
		tag = SNG
		dynasty = "Liu"
		heir_has_ruler_dynasty = no
		check_variable = {
			which = "Demesne_in_the_Mandate_of_Heaven"
			value = 100
		}
	}
	mean_time_to_happen = {
		months = 10
	}
	option = {
		name = "red_turban.23a"
		kill_ruler = yes
		set_dynasty = "Zhao"
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.23b"
		every_subject_country = {
			country_event = {
				id = tianxia.14
				days = 10
				random = 3
			}
		}
		country_event = {
			id = tianxia.35
		}
		kill_heir = yes
		define_heir = {
			dynasty = "Liu"
		}
		ai_chance = {
			factor = 90
		}
	}
}
country_event = {
	id = red_turban.24
	title = "red_turban.24.t"
	desc = "red_turban.24.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	hidden = yes
	option = {
		name = "red_turban.24a"
		every_subject_country = {
			limit = {
				has_country_flag = red_turban_reb
			}
			grant_independence = yes
		}
	}
}
country_event = {
	id = red_turban.25
	title = "red_turban.25.t"
	desc = "red_turban.25.d"
	picture = SIEGE_eventPicture
	fire_only_once = yes
	trigger = {
		tag = YUA
		overlord_of = CYU
		NOT = {
			exists = QII
		}
	}
	mean_time_to_happen = {
		months = 12
	}
	option = {
		name = "red_turban.25a"
		CYU = {
			country_event = {
				id = red_turban.26
				days = 30
				random = 10
			}
			remove_country_modifier = title_1
			remove_country_modifier = title_2
			remove_country_modifier = title_3
			remove_country_modifier = title_4
			remove_country_modifier = title_6
			add_country_modifier = {
				name = title_5
				duration = -1
			}
			clr_country_flag = title_1
			clr_country_flag = title_2
			clr_country_flag = title_3
			clr_country_flag = title_4
			clr_country_flag = title_5
			clr_country_flag = title_6
		}
	}
	option = {
		name = "red_turban.25b"
		add_prestige = -10
		CYU = {
			add_liberty_desire = 50
		}
	}
}
country_event = {
	id = red_turban.26
	title = "red_turban.26.t"
	desc = "red_turban.26.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	option = {
		name = "red_turban.25a"
		add_prestige = 10
		change_tag = QII
	}
	option = {
		name = "red_turban.25b"
		trigger = {
			ai = no
		}
		add_prestige = 10
	}
}
country_event = {
	id = red_turban.27
	title = "red_turban.27.t"
	desc = "red_turban.27.d"
	picture = SIEGE_eventPicture
	is_triggered_only = yes
	immediate = {
		SNG = {
			exile_heir_as = han_liner
		}
	}
	option = {
		name = "red_turban.27a"
		kill_heir = yes
		set_heir = han_liner
		set_dynasty = "Zhao"
		change_tag = SNG
		if = {
			limit = {
				exists = XNG
				AND = {
					OR = {
						is_subject = no
						is_subject_of_type = tributary_state
						is_subject_of_type = close_tributary_state
					}
				}
			}
			create_subject = {
				who = XNG
				subject_type = warlord
			}
		}
		if = {
			limit = {
				exists = SHU
				AND = {
					OR = {
						is_subject = no
						is_subject_of_type = tributary_state
						is_subject_of_type = close_tributary_state
					}
				}
			}
			create_subject = {
				who = SHU
				subject_type = warlord
			}
		}
		if = {
			limit = {
				exists = QII
				AND = {
					OR = {
						is_subject = no
						is_subject_of_type = tributary_state
						is_subject_of_type = close_tributary_state
					}
				}
				NOT = {
					AND = {
						OR = {
							dynasty = "Qublaid"
							dynasty = "Ariq-Bkid"
							dynasty = "Chagatayid"
							dynasty = "Dayanid"
							dynasty = "gedeid"
							dynasty = "Toluid"
							dynasty = "Jochid"
							dynasty = "Shaybanid"
							dynasty = "Geray"
							dynasty = "Edigid"
							dynasty = "Janid"
							dynasty = "Qasarid"
						}
					}
				}
			}
			create_subject = {
				who = QII
				subject_type = warlord
			}
		}
		ai_chance = {
			factor = 10
		}
	}
	option = {
		name = "red_turban.27b"
		if = {
			limit = {
				exists = XNG
				AND = {
					OR = {
						is_subject = no
						is_subject_of_type = tributary_state
						is_subject_of_type = close_tributary_state
					}
				}
			}
			create_subject = {
				who = XNG
				subject_type = warlord
			}
		}
		if = {
			limit = {
				exists = SHU
				AND = {
					OR = {
						is_subject = no
						is_subject_of_type = tributary_state
						is_subject_of_type = close_tributary_state
					}
				}
			}
			create_subject = {
				who = SHU
				subject_type = warlord
			}
		}
		if = {
			limit = {
				exists = QII
				AND = {
					OR = {
						is_subject = no
						is_subject_of_type = tributary_state
						is_subject_of_type = close_tributary_state
					}
				}
				NOT = {
					has_country_modifier = mongol_xingsheng
				}
			}
			create_subject = {
				who = QII
				subject_type = warlord
			}
		}
		ai_chance = {
			factor = 90
		}
	}
}
